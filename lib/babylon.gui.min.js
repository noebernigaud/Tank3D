!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("babylonjs")):"function"==typeof define&&define.amd?define("babylonjs-gui",["babylonjs"],e):"object"==typeof exports?exports["babylonjs-gui"]=e(require("babylonjs")):(t.BABYLON=t.BABYLON||{},t.BABYLON.GUI=e(t.BABYLON))}("undefined"!=typeof self?self:"undefined"!=typeof global?global:this,(function(t){return(()=>{"use strict";var e={520:e=>{e.exports=t}},i={};function o(t){var s=i[t];if(void 0!==s)return s.exports;var n=i[t]={exports:{}};return e[t](n,n.exports,o),n.exports}o.d=(t,e)=>{for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};return(()=>{o.d(s,{default:()=>Xt});var t={};o.r(t),o.d(t,{AbstractButton3D:()=>nt,AdvancedDynamicTexture:()=>$,AdvancedDynamicTextureInstrumentation:()=>J,BaseSlider:()=>L,Button:()=>x,Button3D:()=>rt,Checkbox:()=>B,CheckboxGroup:()=>k,ColorPicker:()=>I,Container:()=>g,Container3D:()=>at,Control:()=>f,Control3D:()=>ot,CornerHandle:()=>Bt,CylinderPanel:()=>_t,DisplayGrid:()=>j,Ellipse:()=>R,FluentBackplateMaterial:()=>Pt,FluentButtonMaterial:()=>ft,FluentMaterial:()=>ct,FluentMaterialDefines:()=>ht,FocusableButton:()=>S,GUI3DManager:()=>Gt,GizmoHandle:()=>xt,Grid:()=>P,HandMenu:()=>St,HandleMaterial:()=>vt,HandleState:()=>bt,HolographicBackplate:()=>Wt,HolographicButton:()=>dt,HolographicSlate:()=>It,Image:()=>b,ImageBasedSlider:()=>K,ImageScrollBar:()=>W,InputPassword:()=>w,InputText:()=>T,KeyPropertySet:()=>X,Line:()=>M,MRDLBackplateMaterial:()=>At,MRDLSliderBarMaterial:()=>Lt,MRDLSliderThumbMaterial:()=>Nt,Matrix2D:()=>u,Measure:()=>c,MeshButton3D:()=>wt,MultiLine:()=>E,MultiLinePoint:()=>O,NearMenu:()=>Mt,PlanePanel:()=>Ot,RadioButton:()=>D,RadioGroup:()=>A,Rectangle:()=>m,ScatterPanel:()=>Et,ScrollBar:()=>H,ScrollViewer:()=>G,SelectionPanel:()=>Q,SelectorGroup:()=>N,SideHandle:()=>yt,SlateGizmo:()=>Ct,Slider:()=>F,Slider3D:()=>zt,SliderGroup:()=>z,SpherePanel:()=>Qt,StackPanel:()=>y,StackPanel3D:()=>Vt,Style:()=>q,TextBlock:()=>v,TextWrapper:()=>C,TextWrapping:()=>p,ToggleButton:()=>U,TouchButton3D:()=>gt,TouchHolographicButton:()=>mt,TouchHolographicMenu:()=>Rt,TouchMeshButton3D:()=>Ht,ValueAndUnit:()=>r,Vector2WithInfo:()=>d,Vector3WithInfo:()=>it,VirtualKeyboard:()=>Y,VolumeBasedPanel:()=>lt,XmlLoader:()=>et,name:()=>Z});var e={};function i(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r}o.r(e),o.d(e,{AbstractButton3D:()=>nt,AdvancedDynamicTexture:()=>$,AdvancedDynamicTextureInstrumentation:()=>J,BaseSlider:()=>L,Button:()=>x,Button3D:()=>rt,Checkbox:()=>B,CheckboxGroup:()=>k,ColorPicker:()=>I,Container:()=>g,Container3D:()=>at,Control:()=>f,Control3D:()=>ot,CornerHandle:()=>Bt,CylinderPanel:()=>_t,DisplayGrid:()=>j,Ellipse:()=>R,FluentBackplateMaterial:()=>Pt,FluentButtonMaterial:()=>ft,FluentMaterial:()=>ct,FluentMaterialDefines:()=>ht,FocusableButton:()=>S,GUI3DManager:()=>Gt,GizmoHandle:()=>xt,Grid:()=>P,HandMenu:()=>St,HandleMaterial:()=>vt,HandleState:()=>bt,HolographicBackplate:()=>Wt,HolographicButton:()=>dt,HolographicSlate:()=>It,Image:()=>b,ImageBasedSlider:()=>K,ImageScrollBar:()=>W,InputPassword:()=>w,InputText:()=>T,KeyPropertySet:()=>X,Line:()=>M,MRDLBackplateMaterial:()=>At,MRDLSliderBarMaterial:()=>Lt,MRDLSliderThumbMaterial:()=>Nt,Matrix2D:()=>u,Measure:()=>c,MeshButton3D:()=>wt,MultiLine:()=>E,MultiLinePoint:()=>O,NearMenu:()=>Mt,PlanePanel:()=>Ot,RadioButton:()=>D,RadioGroup:()=>A,Rectangle:()=>m,ScatterPanel:()=>Et,ScrollBar:()=>H,ScrollViewer:()=>G,SelectionPanel:()=>Q,SelectorGroup:()=>N,SideHandle:()=>yt,SlateGizmo:()=>Ct,Slider:()=>F,Slider3D:()=>zt,SliderGroup:()=>z,SpherePanel:()=>Qt,StackPanel:()=>y,StackPanel3D:()=>Vt,Style:()=>q,TextBlock:()=>v,TextWrapper:()=>C,TextWrapping:()=>p,ToggleButton:()=>U,TouchButton3D:()=>gt,TouchHolographicButton:()=>mt,TouchHolographicMenu:()=>Rt,TouchMeshButton3D:()=>Ht,ValueAndUnit:()=>r,Vector2WithInfo:()=>d,Vector3WithInfo:()=>it,VirtualKeyboard:()=>Y,VolumeBasedPanel:()=>lt,XmlLoader:()=>et,name:()=>Z}),Object.create,Object.create;var n=o(520);class r{constructor(t,e=r.UNITMODE_PIXEL,i=!0){this.negativeValueAllowed=i,this._value=1,this._unit=r.UNITMODE_PIXEL,this.ignoreAdaptiveScaling=!1,this.onChangedObservable=new n.Observable,this._value=t,this._unit=e,this._originalUnit=e}get isPercentage(){return this._unit===r.UNITMODE_PERCENTAGE}get isPixel(){return this._unit===r.UNITMODE_PIXEL}get internalValue(){return this._value}get value(){return this._value}set value(t){t!==this._value&&(this._value=t,this.onChangedObservable.notifyObservers())}get unit(){return this._unit}set unit(t){t!==this._unit&&(this._unit=t,this.onChangedObservable.notifyObservers())}getValueInPixel(t,e){return this.isPixel?this.getValue(t):this.getValue(t)*e}updateInPlace(t,e=r.UNITMODE_PIXEL){return this.value===t&&this.unit===e||(this._value=t,this._unit=e,this.onChangedObservable.notifyObservers()),this}getValue(t){if(t&&!this.ignoreAdaptiveScaling&&this.unit!==r.UNITMODE_PERCENTAGE){let e=0,i=0;if(t.idealWidth&&(e=this._value*t.getSize().width/t.idealWidth),t.idealHeight&&(i=this._value*t.getSize().height/t.idealHeight),t.useSmallestIdeal&&t.idealWidth&&t.idealHeight)return window.innerWidth<window.innerHeight?e:i;if(t.idealWidth)return e;if(t.idealHeight)return i}return this._value}toString(t,e){switch(this._unit){case r.UNITMODE_PERCENTAGE:const i=100*this.getValue(t);return(e?i.toFixed(e):i)+"%";case r.UNITMODE_PIXEL:const o=this.getValue(t);return(e?o.toFixed(e):o)+"px"}return this._unit.toString()}fromString(t){const e=r._Regex.exec(t.toString());if(!e||0===e.length)return!1;let i=parseFloat(e[1]),o=this._originalUnit;if(this.negativeValueAllowed||i<0&&(i=0),4===e.length)switch(e[3]){case"px":o=r.UNITMODE_PIXEL;break;case"%":o=r.UNITMODE_PERCENTAGE,i/=100}return(i!==this._value||o!==this._unit)&&(this._value=i,this._unit=o,this.onChangedObservable.notifyObservers(),!0)}static get UNITMODE_PERCENTAGE(){return r._UNITMODE_PERCENTAGE}static get UNITMODE_PIXEL(){return r._UNITMODE_PIXEL}}r._Regex=/(^-?\d*(\.\d+)?)(%|px)?/,r._UNITMODE_PERCENTAGE=0,r._UNITMODE_PIXEL=1;const a=[new n.Vector2(0,0),new n.Vector2(0,0),new n.Vector2(0,0),new n.Vector2(0,0)],l=[new n.Vector2(0,0),new n.Vector2(0,0),new n.Vector2(0,0),new n.Vector2(0,0)],_=new n.Vector2(0,0),h=new n.Vector2(0,0);class c{constructor(t,e,i,o){this.left=t,this.top=e,this.width=i,this.height=o}copyFrom(t){this.left=t.left,this.top=t.top,this.width=t.width,this.height=t.height}copyFromFloats(t,e,i,o){this.left=t,this.top=e,this.width=i,this.height=o}static CombineToRef(t,e,i){const o=Math.min(t.left,e.left),s=Math.min(t.top,e.top),n=Math.max(t.left+t.width,e.left+e.width),r=Math.max(t.top+t.height,e.top+e.height);i.left=o,i.top=s,i.width=n-o,i.height=r-s}addAndTransformToRef(t,e,i,o,s,n){const r=this.left+e,c=this.top+i,d=this.width+o,u=this.height+s;a[0].copyFromFloats(r,c),a[1].copyFromFloats(r+d,c),a[2].copyFromFloats(r+d,c+u),a[3].copyFromFloats(r,c+u),_.copyFromFloats(Number.MAX_VALUE,Number.MAX_VALUE),h.copyFromFloats(0,0);for(let e=0;e<4;e++)t.transformCoordinates(a[e].x,a[e].y,l[e]),_.x=Math.floor(Math.min(_.x,l[e].x)),_.y=Math.floor(Math.min(_.y,l[e].y)),h.x=Math.ceil(Math.max(h.x,l[e].x)),h.y=Math.ceil(Math.max(h.y,l[e].y));n.left=_.x,n.top=_.y,n.width=h.x-_.x,n.height=h.y-_.y}transformToRef(t,e){this.addAndTransformToRef(t,0,0,0,0,e)}isEqualsTo(t){return this.left===t.left&&this.top===t.top&&this.width===t.width&&this.height===t.height}static Empty(){return new c(0,0,0,0)}}class d extends n.Vector2{constructor(t,e=0){super(t.x,t.y),this.buttonIndex=e}}class u{constructor(t,e,i,o,s,n){this.m=new Float32Array(6),this.fromValues(t,e,i,o,s,n)}fromValues(t,e,i,o,s,n){return this.m[0]=t,this.m[1]=e,this.m[2]=i,this.m[3]=o,this.m[4]=s,this.m[5]=n,this}determinant(){return this.m[0]*this.m[3]-this.m[1]*this.m[2]}invertToRef(t){const e=this.m[0],i=this.m[1],o=this.m[2],s=this.m[3],r=this.m[4],a=this.m[5],l=this.determinant();if(l<n.Epsilon*n.Epsilon)return t.m[0]=0,t.m[1]=0,t.m[2]=0,t.m[3]=0,t.m[4]=0,t.m[5]=0,this;const _=1/l,h=o*a-s*r,c=i*r-e*a;return t.m[0]=s*_,t.m[1]=-i*_,t.m[2]=-o*_,t.m[3]=e*_,t.m[4]=h*_,t.m[5]=c*_,this}multiplyToRef(t,e){const i=this.m[0],o=this.m[1],s=this.m[2],n=this.m[3],r=this.m[4],a=this.m[5],l=t.m[0],_=t.m[1],h=t.m[2],c=t.m[3],d=t.m[4],u=t.m[5];return e.m[0]=i*l+o*h,e.m[1]=i*_+o*c,e.m[2]=s*l+n*h,e.m[3]=s*_+n*c,e.m[4]=r*l+a*h+d,e.m[5]=r*_+a*c+u,this}transformCoordinates(t,e,i){return i.x=t*this.m[0]+e*this.m[2]+this.m[4],i.y=t*this.m[1]+e*this.m[3]+this.m[5],this}static Identity(){return new u(1,0,0,1,0,0)}static IdentityToRef(t){t.m[0]=1,t.m[1]=0,t.m[2]=0,t.m[3]=1,t.m[4]=0,t.m[5]=0}static TranslationToRef(t,e,i){i.fromValues(1,0,0,1,t,e)}static ScalingToRef(t,e,i){i.fromValues(t,0,0,e,0,0)}static RotationToRef(t,e){const i=Math.sin(t),o=Math.cos(t);e.fromValues(o,i,-i,o,0,0)}static ComposeToRef(t,e,i,o,s,n,r){u.TranslationToRef(t,e,u._TempPreTranslationMatrix),u.ScalingToRef(o,s,u._TempScalingMatrix),u.RotationToRef(i,u._TempRotationMatrix),u.TranslationToRef(-t,-e,u._TempPostTranslationMatrix),u._TempPreTranslationMatrix.multiplyToRef(u._TempScalingMatrix,u._TempCompose0),u._TempCompose0.multiplyToRef(u._TempRotationMatrix,u._TempCompose1),n?(u._TempCompose1.multiplyToRef(u._TempPostTranslationMatrix,u._TempCompose2),u._TempCompose2.multiplyToRef(n,r)):u._TempCompose1.multiplyToRef(u._TempPostTranslationMatrix,r)}}u._TempPreTranslationMatrix=u.Identity(),u._TempPostTranslationMatrix=u.Identity(),u._TempRotationMatrix=u.Identity(),u._TempScalingMatrix=u.Identity(),u._TempCompose0=u.Identity(),u._TempCompose1=u.Identity(),u._TempCompose2=u.Identity();class f{constructor(t){this.name=t,this._alpha=1,this._alphaSet=!1,this._zIndex=0,this._currentMeasure=c.Empty(),this._tempPaddingMeasure=c.Empty(),this._fontFamily="Arial",this._fontStyle="",this._fontWeight="",this._fontSize=new r(18,r.UNITMODE_PIXEL,!1),this._width=new r(1,r.UNITMODE_PERCENTAGE,!1),this._height=new r(1,r.UNITMODE_PERCENTAGE,!1),this._color="",this._style=null,this._horizontalAlignment=f.HORIZONTAL_ALIGNMENT_CENTER,this._verticalAlignment=f.VERTICAL_ALIGNMENT_CENTER,this._isDirty=!0,this._wasDirty=!1,this._tempParentMeasure=c.Empty(),this._prevCurrentMeasureTransformedIntoGlobalSpace=c.Empty(),this._cachedParentMeasure=c.Empty(),this._descendantsOnlyPadding=!1,this._paddingLeft=new r(0),this._paddingRight=new r(0),this._paddingTop=new r(0),this._paddingBottom=new r(0),this._left=new r(0),this._top=new r(0),this._scaleX=1,this._scaleY=1,this._rotation=0,this._transformCenterX=.5,this._transformCenterY=.5,this._transformMatrix=u.Identity(),this._invertTransformMatrix=u.Identity(),this._transformedPosition=n.Vector2.Zero(),this._isMatrixDirty=!0,this._isVisible=!0,this._isHighlighted=!1,this._highlightColor="#4affff",this._highlightLineWidth=2,this._fontSet=!1,this._dummyVector2=n.Vector2.Zero(),this._downCount=0,this._enterCount=-1,this._doNotRender=!1,this._downPointerIds={},this._evaluatedMeasure=new c(0,0,0,0),this._evaluatedParentMeasure=new c(0,0,0,0),this._isEnabled=!0,this._disabledColor="#9a9a9a",this._disabledColorItem="#6a6a6a",this._isReadOnly=!1,this._rebuildLayout=!1,this._customData={},this._isClipped=!1,this._automaticSize=!1,this.metadata=null,this.isHitTestVisible=!0,this.isPointerBlocker=!1,this.isFocusInvisible=!1,this.clipChildren=!0,this.clipContent=!0,this.useBitmapCache=!1,this._shadowOffsetX=0,this._shadowOffsetY=0,this._shadowBlur=0,this._previousShadowBlur=0,this._shadowColor="black",this.hoverCursor="",this._linkOffsetX=new r(0),this._linkOffsetY=new r(0),this.onWheelObservable=new n.Observable,this.onPointerMoveObservable=new n.Observable,this.onPointerOutObservable=new n.Observable,this.onPointerDownObservable=new n.Observable,this.onPointerUpObservable=new n.Observable,this.onPointerClickObservable=new n.Observable,this.onPointerEnterObservable=new n.Observable,this.onDirtyObservable=new n.Observable,this.onBeforeDrawObservable=new n.Observable,this.onAfterDrawObservable=new n.Observable,this.onDisposeObservable=new n.Observable,this.fixedRatio=0,this._fixedRatioMasterIsWidth=!0,this._tmpMeasureA=new c(0,0,0,0)}get isReadOnly(){return this._isReadOnly}set isReadOnly(t){this._isReadOnly=t}get transformedMeasure(){return this._evaluatedMeasure}get shadowOffsetX(){return this._shadowOffsetX}set shadowOffsetX(t){this._shadowOffsetX!==t&&(this._shadowOffsetX=t,this._markAsDirty())}get shadowOffsetY(){return this._shadowOffsetY}set shadowOffsetY(t){this._shadowOffsetY!==t&&(this._shadowOffsetY=t,this._markAsDirty())}get shadowBlur(){return this._shadowBlur}set shadowBlur(t){this._shadowBlur!==t&&(this._previousShadowBlur=this._shadowBlur,this._shadowBlur=t,this._markAsDirty())}get shadowColor(){return this._shadowColor}set shadowColor(t){this._shadowColor!==t&&(this._shadowColor=t,this._markAsDirty())}get typeName(){return this._getTypeName()}getClassName(){return this._getTypeName()}get host(){return this._host}get fontOffset(){return this._fontOffset}set fontOffset(t){this._fontOffset=t}get alpha(){return this._alpha}set alpha(t){this._alpha!==t&&(this._alphaSet=!0,this._alpha=t,this._markAsDirty())}get highlightLineWidth(){return this._highlightLineWidth}set highlightLineWidth(t){this._highlightLineWidth!==t&&(this._highlightLineWidth=t,this._markAsDirty())}get isHighlighted(){return this._isHighlighted}set isHighlighted(t){this._isHighlighted!==t&&(this._isHighlighted=t,this._markAsDirty())}get highlightColor(){return this._highlightColor}set highlightColor(t){this._highlightColor!==t&&(this._highlightColor=t,this._markAsDirty())}get scaleX(){return this._scaleX}set scaleX(t){this._scaleX!==t&&(this._scaleX=t,this._markAsDirty(),this._markMatrixAsDirty())}get scaleY(){return this._scaleY}set scaleY(t){this._scaleY!==t&&(this._scaleY=t,this._markAsDirty(),this._markMatrixAsDirty())}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._markAsDirty(),this._markMatrixAsDirty())}get transformCenterY(){return this._transformCenterY}set transformCenterY(t){this._transformCenterY!==t&&(this._transformCenterY=t,this._markAsDirty(),this._markMatrixAsDirty())}get transformCenterX(){return this._transformCenterX}set transformCenterX(t){this._transformCenterX!==t&&(this._transformCenterX=t,this._markAsDirty(),this._markMatrixAsDirty())}get horizontalAlignment(){return this._horizontalAlignment}set horizontalAlignment(t){this._horizontalAlignment!==t&&(this._horizontalAlignment=t,this._markAsDirty())}get verticalAlignment(){return this._verticalAlignment}set verticalAlignment(t){this._verticalAlignment!==t&&(this._verticalAlignment=t,this._markAsDirty())}get width(){return this._width.toString(this._host)}set width(t){this._fixedRatioMasterIsWidth=!0,this._width.toString(this._host)!==t&&this._width.fromString(t)&&this._markAsDirty()}get widthInPixels(){return this._width.getValueInPixel(this._host,this._cachedParentMeasure.width)}set widthInPixels(t){isNaN(t)||(this._fixedRatioMasterIsWidth=!0,this.width=t+"px")}get height(){return this._height.toString(this._host)}set height(t){this._fixedRatioMasterIsWidth=!1,this._height.toString(this._host)!==t&&this._height.fromString(t)&&this._markAsDirty()}get heightInPixels(){return this._height.getValueInPixel(this._host,this._cachedParentMeasure.height)}set heightInPixels(t){isNaN(t)||(this._fixedRatioMasterIsWidth=!1,this.height=t+"px")}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily!==t&&(this._fontFamily=t,this._resetFontCache())}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this._resetFontCache())}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this._resetFontCache())}get style(){return this._style}set style(t){this._style&&(this._style.onChangedObservable.remove(this._styleObserver),this._styleObserver=null),this._style=t,this._style&&(this._styleObserver=this._style.onChangedObservable.add((()=>{this._markAsDirty(),this._resetFontCache()}))),this._markAsDirty(),this._resetFontCache()}get _isFontSizeInPercentage(){return this._fontSize.isPercentage}get fontSizeInPixels(){const t=this._style?this._style._fontSize:this._fontSize;return t.isPixel?t.getValue(this._host):t.getValueInPixel(this._host,this._tempParentMeasure.height||this._cachedParentMeasure.height)}set fontSizeInPixels(t){isNaN(t)||(this.fontSize=t+"px")}get fontSize(){return this._fontSize.toString(this._host)}set fontSize(t){this._fontSize.toString(this._host)!==t&&this._fontSize.fromString(t)&&(this._markAsDirty(),this._resetFontCache())}get color(){return this._color}set color(t){this._color!==t&&(this._color=t,this._markAsDirty())}get zIndex(){return this._zIndex}set zIndex(t){this.zIndex!==t&&(this._zIndex=t,this.parent&&this.parent._reOrderControl(this))}get notRenderable(){return this._doNotRender}set notRenderable(t){this._doNotRender!==t&&(this._doNotRender=t,this._markAsDirty())}get isVisible(){return this._isVisible}set isVisible(t){this._isVisible!==t&&(this._isVisible=t,this._markAsDirty(!0))}get isDirty(){return this._isDirty}get linkedMesh(){return this._linkedMesh}get descendantsOnlyPadding(){return this._descendantsOnlyPadding}set descendantsOnlyPadding(t){this._descendantsOnlyPadding!==t&&(this._descendantsOnlyPadding=t,this._markAsDirty())}get paddingLeft(){return this._paddingLeft.toString(this._host)}set paddingLeft(t){this._paddingLeft.fromString(t)&&this._markAsDirty()}get paddingLeftInPixels(){return this._paddingLeft.getValueInPixel(this._host,this._cachedParentMeasure.width)}set paddingLeftInPixels(t){isNaN(t)||(this.paddingLeft=t+"px")}get _paddingLeftInPixels(){return this._descendantsOnlyPadding?0:this.paddingLeftInPixels}get paddingRight(){return this._paddingRight.toString(this._host)}set paddingRight(t){this._paddingRight.fromString(t)&&this._markAsDirty()}get paddingRightInPixels(){return this._paddingRight.getValueInPixel(this._host,this._cachedParentMeasure.width)}set paddingRightInPixels(t){isNaN(t)||(this.paddingRight=t+"px")}get _paddingRightInPixels(){return this._descendantsOnlyPadding?0:this.paddingRightInPixels}get paddingTop(){return this._paddingTop.toString(this._host)}set paddingTop(t){this._paddingTop.fromString(t)&&this._markAsDirty()}get paddingTopInPixels(){return this._paddingTop.getValueInPixel(this._host,this._cachedParentMeasure.height)}set paddingTopInPixels(t){isNaN(t)||(this.paddingTop=t+"px")}get _paddingTopInPixels(){return this._descendantsOnlyPadding?0:this.paddingTopInPixels}get paddingBottom(){return this._paddingBottom.toString(this._host)}set paddingBottom(t){this._paddingBottom.fromString(t)&&this._markAsDirty()}get paddingBottomInPixels(){return this._paddingBottom.getValueInPixel(this._host,this._cachedParentMeasure.height)}set paddingBottomInPixels(t){isNaN(t)||(this.paddingBottom=t+"px")}get _paddingBottomInPixels(){return this._descendantsOnlyPadding?0:this.paddingBottomInPixels}get left(){return this._left.toString(this._host)}set left(t){this._left.fromString(t)&&this._markAsDirty()}get leftInPixels(){return this._left.getValueInPixel(this._host,this._cachedParentMeasure.width)}set leftInPixels(t){isNaN(t)||(this.left=t+"px")}get top(){return this._top.toString(this._host)}set top(t){this._top.fromString(t)&&this._markAsDirty()}get topInPixels(){return this._top.getValueInPixel(this._host,this._cachedParentMeasure.height)}set topInPixels(t){isNaN(t)||(this.top=t+"px")}get linkOffsetX(){return this._linkOffsetX.toString(this._host)}set linkOffsetX(t){this._linkOffsetX.fromString(t)&&this._markAsDirty()}get linkOffsetXInPixels(){return this._linkOffsetX.getValueInPixel(this._host,this._cachedParentMeasure.width)}set linkOffsetXInPixels(t){isNaN(t)||(this.linkOffsetX=t+"px")}get linkOffsetY(){return this._linkOffsetY.toString(this._host)}set linkOffsetY(t){this._linkOffsetY.fromString(t)&&this._markAsDirty()}get linkOffsetYInPixels(){return this._linkOffsetY.getValueInPixel(this._host,this._cachedParentMeasure.height)}set linkOffsetYInPixels(t){isNaN(t)||(this.linkOffsetY=t+"px")}get centerX(){return this._currentMeasure.left+this._currentMeasure.width/2}get centerY(){return this._currentMeasure.top+this._currentMeasure.height/2}get isEnabled(){return this._isEnabled}set isEnabled(t){if(this._isEnabled===t)return;this._isEnabled=t,this._markAsDirty();const e=t=>{if(t.host){for(const e in t.host._lastControlOver)t===this.host._lastControlOver[e]&&(t._onPointerOut(t,null,!0),delete t.host._lastControlOver[e]);void 0!==t.children&&t.children.forEach(e)}};e(this)}get disabledColor(){return this._disabledColor}set disabledColor(t){this._disabledColor!==t&&(this._disabledColor=t,this._markAsDirty())}get disabledColorItem(){return this._disabledColorItem}set disabledColorItem(t){this._disabledColorItem!==t&&(this._disabledColorItem=t,this._markAsDirty())}_getTypeName(){return"Control"}getAscendantOfClass(t){return this.parent?this.parent.getClassName()===t?this.parent:this.parent.getAscendantOfClass(t):null}markAsDirty(t=!1){this._markAsDirty(t)}markAllAsDirty(){this._markAllAsDirty()}_resetFontCache(){this._fontSet=!0,this._markAsDirty()}isAscendant(t){return!!this.parent&&(this.parent===t||this.parent.isAscendant(t))}getLocalCoordinates(t){const e=n.Vector2.Zero();return this.getLocalCoordinatesToRef(t,e),e}getLocalCoordinatesToRef(t,e){return e.x=t.x-this._currentMeasure.left,e.y=t.y-this._currentMeasure.top,this}getParentLocalCoordinates(t){const e=n.Vector2.Zero();return e.x=t.x-this._cachedParentMeasure.left,e.y=t.y-this._cachedParentMeasure.top,e}moveToVector3(t,e){if(!this._host||this.parent!==this._host._rootContainer)return void n.Tools.Error("Cannot move a control to a vector3 if the control is not at root level");this.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,this.verticalAlignment=f.VERTICAL_ALIGNMENT_TOP;const i=this._host._getGlobalViewport(),o=n.Vector3.Project(t,n.Matrix.Identity(),e.getTransformMatrix(),i);this._moveToProjectedPosition(o),o.z<0||o.z>1?this.notRenderable=!0:this.notRenderable=!1}getDescendantsToRef(t,e=!1,i){}getDescendants(t,e){const i=new Array;return this.getDescendantsToRef(i,t,e),i}linkWithMesh(t){if(!this._host||this.parent&&this.parent!==this._host._rootContainer)return void(t&&n.Tools.Error("Cannot link a control to a mesh if the control is not at root level"));const e=this._host._linkedControls.indexOf(this);if(-1!==e)return this._linkedMesh=t,void(t||this._host._linkedControls.splice(e,1));t&&(this.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,this.verticalAlignment=f.VERTICAL_ALIGNMENT_TOP,this._linkedMesh=t,this._host._linkedControls.push(this))}setPadding(t,e,i,o){const s=t,n=null!=e?e:s,r=null!=i?i:s,a=null!=o?o:n;this.paddingTop=s,this.paddingRight=n,this.paddingBottom=r,this.paddingLeft=a}setPaddingInPixels(t,e,i,o){const s=t,n=null!=e?e:s,r=null!=i?i:s,a=null!=o?o:n;this.paddingTopInPixels=s,this.paddingRightInPixels=n,this.paddingBottomInPixels=r,this.paddingLeftInPixels=a}_moveToProjectedPosition(t){var e;const i=this._left.getValue(this._host),o=this._top.getValue(this._host),s=null===(e=this.parent)||void 0===e?void 0:e._currentMeasure;s&&this._processMeasures(s,this._host.getContext());let n=t.x+this._linkOffsetX.getValue(this._host)-this._currentMeasure.width/2,r=t.y+this._linkOffsetY.getValue(this._host)-this._currentMeasure.height/2;this._left.ignoreAdaptiveScaling&&this._top.ignoreAdaptiveScaling&&(Math.abs(n-i)<.5&&(n=i),Math.abs(r-o)<.5&&(r=o)),this.left=n+"px",this.top=r+"px",this._left.ignoreAdaptiveScaling=!0,this._top.ignoreAdaptiveScaling=!0,this._markAsDirty()}_offsetLeft(t){this._isDirty=!0,this._currentMeasure.left+=t}_offsetTop(t){this._isDirty=!0,this._currentMeasure.top+=t}_markMatrixAsDirty(){this._isMatrixDirty=!0,this._flagDescendantsAsMatrixDirty()}_flagDescendantsAsMatrixDirty(){}_intersectsRect(t,e){return this._transform(e),!(this._evaluatedMeasure.left>=t.left+t.width||this._evaluatedMeasure.top>=t.top+t.height||this._evaluatedMeasure.left+this._evaluatedMeasure.width<=t.left||this._evaluatedMeasure.top+this._evaluatedMeasure.height<=t.top)}_computeAdditionnalOffsetX(){return 0}_computeAdditionnalOffsetY(){return 0}invalidateRect(){if(this._transform(),this.host&&this.host.useInvalidateRectOptimization){this._currentMeasure.transformToRef(this._transformMatrix,this._tmpMeasureA),c.CombineToRef(this._tmpMeasureA,this._prevCurrentMeasureTransformedIntoGlobalSpace,this._tmpMeasureA);const t=this.shadowOffsetX,e=this.shadowOffsetY,i=Math.max(this._previousShadowBlur,this.shadowBlur),o=Math.min(Math.min(t,0)-2*i,0),s=Math.max(Math.max(t,0)+2*i,0),n=Math.min(Math.min(e,0)-2*i,0),r=Math.max(Math.max(e,0)+2*i,0),a=this._computeAdditionnalOffsetX(),l=this._computeAdditionnalOffsetY();this.host.invalidateRect(Math.floor(this._tmpMeasureA.left+o-a),Math.floor(this._tmpMeasureA.top+n-l),Math.ceil(this._tmpMeasureA.left+this._tmpMeasureA.width+s+a),Math.ceil(this._tmpMeasureA.top+this._tmpMeasureA.height+r+l))}}_markAsDirty(t=!1){(this._isVisible||t)&&(this._isDirty=!0,this._markMatrixAsDirty(),this._host&&this._host.markAsDirty())}_markAllAsDirty(){this._markAsDirty(),this._font&&this._prepareFont()}_link(t){this._host=t,this._host&&(this.uniqueId=this._host.getScene().getUniqueId())}_transform(t){if(!this._isMatrixDirty&&1===this._scaleX&&1===this._scaleY&&0===this._rotation)return;const e=this._currentMeasure.width*this._transformCenterX+this._currentMeasure.left,i=this._currentMeasure.height*this._transformCenterY+this._currentMeasure.top;t&&(t.translate(e,i),t.rotate(this._rotation),t.scale(this._scaleX,this._scaleY),t.translate(-e,-i)),(this._isMatrixDirty||this._cachedOffsetX!==e||this._cachedOffsetY!==i)&&(this._cachedOffsetX=e,this._cachedOffsetY=i,this._isMatrixDirty=!1,this._flagDescendantsAsMatrixDirty(),u.ComposeToRef(-e,-i,this._rotation,this._scaleX,this._scaleY,this.parent?this.parent._transformMatrix:null,this._transformMatrix),this._transformMatrix.invertToRef(this._invertTransformMatrix),this._currentMeasure.transformToRef(this._transformMatrix,this._evaluatedMeasure))}_renderHighlight(t){this.isHighlighted&&(t.save(),t.strokeStyle=this._highlightColor,t.lineWidth=this._highlightLineWidth,this._renderHighlightSpecific(t),t.restore())}_renderHighlightSpecific(t){t.strokeRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)}_applyStates(t){this._isFontSizeInPercentage&&(this._fontSet=!0),this._host&&this._host.useSmallestIdeal&&!this._font&&(this._fontSet=!0),this._fontSet&&(this._prepareFont(),this._fontSet=!1),this._font&&(t.font=this._font),this._color&&(t.fillStyle=this._color),f.AllowAlphaInheritance?t.globalAlpha*=this._alpha:this._alphaSet&&(t.globalAlpha=this.parent&&!this.parent.renderToIntermediateTexture?this.parent.alpha*this._alpha:this._alpha)}_layout(t,e){if(!this.isDirty&&(!this.isVisible||this.notRenderable))return!1;if(this._isDirty||!this._cachedParentMeasure.isEqualsTo(t)){this.host._numLayoutCalls++,this._currentMeasure.addAndTransformToRef(this._transformMatrix,0|-this._paddingLeftInPixels,0|-this._paddingTopInPixels,0|this._paddingRightInPixels,0|this._paddingBottomInPixels,this._prevCurrentMeasureTransformedIntoGlobalSpace),e.save(),this._applyStates(e);let i=0;do{this._rebuildLayout=!1,this._processMeasures(t,e),i++}while(this._rebuildLayout&&i<3);i>=3&&n.Logger.Error(`Layout cycle detected in GUI (Control name=${this.name}, uniqueId=${this.uniqueId})`),e.restore(),this.invalidateRect(),this._evaluateClippingState(t)}return this._wasDirty=this._isDirty,this._isDirty=!1,!0}_processMeasures(t,e){this._tempPaddingMeasure.copyFrom(t),this.parent&&this.parent.descendantsOnlyPadding&&(this._tempPaddingMeasure.left+=this.parent.paddingLeftInPixels,this._tempPaddingMeasure.top+=this.parent.paddingTopInPixels,this._tempPaddingMeasure.width-=this.parent.paddingLeftInPixels+this.parent.paddingRightInPixels,this._tempPaddingMeasure.height-=this.parent.paddingTopInPixels+this.parent.paddingBottomInPixels),this._currentMeasure.copyFrom(this._tempPaddingMeasure),this._preMeasure(this._tempPaddingMeasure,e),this._measure(),this._computeAlignment(this._tempPaddingMeasure,e),this._currentMeasure.left=0|this._currentMeasure.left,this._currentMeasure.top=0|this._currentMeasure.top,this._currentMeasure.width=0|this._currentMeasure.width,this._currentMeasure.height=0|this._currentMeasure.height,this._additionalProcessing(this._tempPaddingMeasure,e),this._cachedParentMeasure.copyFrom(this._tempPaddingMeasure),this._currentMeasure.transformToRef(this._transformMatrix,this._evaluatedMeasure),this.onDirtyObservable.hasObservers()&&this.onDirtyObservable.notifyObservers(this)}_evaluateClippingState(t){if(this._currentMeasure.transformToRef(this._transformMatrix,this._evaluatedMeasure),this.parent&&this.parent.clipChildren){if(t.transformToRef(this.parent._transformMatrix,this._evaluatedParentMeasure),this._evaluatedMeasure.left>this._evaluatedParentMeasure.left+this._evaluatedParentMeasure.width)return void(this._isClipped=!0);if(this._evaluatedMeasure.left+this._evaluatedMeasure.width<this._evaluatedParentMeasure.left)return void(this._isClipped=!0);if(this._evaluatedMeasure.top>this._evaluatedParentMeasure.top+this._evaluatedParentMeasure.height)return void(this._isClipped=!0);if(this._evaluatedMeasure.top+this._evaluatedMeasure.height<this._evaluatedParentMeasure.top)return void(this._isClipped=!0)}this._isClipped=!1}_measure(){this._width.isPixel?this._currentMeasure.width=this._width.getValue(this._host):this._currentMeasure.width*=this._width.getValue(this._host),this._height.isPixel?this._currentMeasure.height=this._height.getValue(this._host):this._currentMeasure.height*=this._height.getValue(this._host),0!==this.fixedRatio&&(this._fixedRatioMasterIsWidth?this._currentMeasure.height=this._currentMeasure.width*this.fixedRatio:this._currentMeasure.width=this._currentMeasure.height*this.fixedRatio)}_computeAlignment(t,e){const i=this._currentMeasure.width,o=this._currentMeasure.height,s=t.width,n=t.height;let r=0,a=0;switch(this.horizontalAlignment){case f.HORIZONTAL_ALIGNMENT_LEFT:r=0;break;case f.HORIZONTAL_ALIGNMENT_RIGHT:r=s-i;break;case f.HORIZONTAL_ALIGNMENT_CENTER:r=(s-i)/2}switch(this.verticalAlignment){case f.VERTICAL_ALIGNMENT_TOP:a=0;break;case f.VERTICAL_ALIGNMENT_BOTTOM:a=n-o;break;case f.VERTICAL_ALIGNMENT_CENTER:a=(n-o)/2}this.descendantsOnlyPadding||(this._paddingLeft.isPixel?(this._currentMeasure.left+=this._paddingLeft.getValue(this._host),this._currentMeasure.width-=this._paddingLeft.getValue(this._host)):(this._currentMeasure.left+=s*this._paddingLeft.getValue(this._host),this._currentMeasure.width-=s*this._paddingLeft.getValue(this._host)),this._paddingRight.isPixel?this._currentMeasure.width-=this._paddingRight.getValue(this._host):this._currentMeasure.width-=s*this._paddingRight.getValue(this._host),this._paddingTop.isPixel?(this._currentMeasure.top+=this._paddingTop.getValue(this._host),this._currentMeasure.height-=this._paddingTop.getValue(this._host)):(this._currentMeasure.top+=n*this._paddingTop.getValue(this._host),this._currentMeasure.height-=n*this._paddingTop.getValue(this._host)),this._paddingBottom.isPixel?this._currentMeasure.height-=this._paddingBottom.getValue(this._host):this._currentMeasure.height-=n*this._paddingBottom.getValue(this._host)),this._left.isPixel?this._currentMeasure.left+=this._left.getValue(this._host):this._currentMeasure.left+=s*this._left.getValue(this._host),this._top.isPixel?this._currentMeasure.top+=this._top.getValue(this._host):this._currentMeasure.top+=n*this._top.getValue(this._host),this._currentMeasure.left+=r,this._currentMeasure.top+=a}_preMeasure(t,e){}_additionalProcessing(t,e){}_clipForChildren(t){}_clip(t,e){if(t.beginPath(),f._ClipMeasure.copyFrom(this._currentMeasure),e){e.transformToRef(this._invertTransformMatrix,this._tmpMeasureA);const t=new c(0,0,0,0);t.left=Math.max(this._tmpMeasureA.left,this._currentMeasure.left),t.top=Math.max(this._tmpMeasureA.top,this._currentMeasure.top),t.width=Math.min(this._tmpMeasureA.left+this._tmpMeasureA.width,this._currentMeasure.left+this._currentMeasure.width)-t.left,t.height=Math.min(this._tmpMeasureA.top+this._tmpMeasureA.height,this._currentMeasure.top+this._currentMeasure.height)-t.top,f._ClipMeasure.copyFrom(t)}if(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY){const e=this.shadowOffsetX,i=this.shadowOffsetY,o=this.shadowBlur,s=Math.min(Math.min(e,0)-2*o,0),n=Math.max(Math.max(e,0)+2*o,0),r=Math.min(Math.min(i,0)-2*o,0),a=Math.max(Math.max(i,0)+2*o,0);t.rect(f._ClipMeasure.left+s,f._ClipMeasure.top+r,f._ClipMeasure.width+n-s,f._ClipMeasure.height+a-r)}else t.rect(f._ClipMeasure.left,f._ClipMeasure.top,f._ClipMeasure.width,f._ClipMeasure.height);t.clip()}_render(t,e){return!this.isVisible||this.notRenderable||this._isClipped?(this._isDirty=!1,!1):(this.host._numRenderCalls++,t.save(),this._applyStates(t),this._transform(t),this.clipContent&&this._clip(t,e),this.onBeforeDrawObservable.hasObservers()&&this.onBeforeDrawObservable.notifyObservers(this),this.useBitmapCache&&!this._wasDirty&&this._cacheData?t.putImageData(this._cacheData,this._currentMeasure.left,this._currentMeasure.top):this._draw(t,e),this.useBitmapCache&&this._wasDirty&&(this._cacheData=t.getImageData(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)),this._renderHighlight(t),this.onAfterDrawObservable.hasObservers()&&this.onAfterDrawObservable.notifyObservers(this),t.restore(),!0)}_draw(t,e){}contains(t,e){return this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y,!(t<this._currentMeasure.left||t>this._currentMeasure.left+this._currentMeasure.width||e<this._currentMeasure.top||e>this._currentMeasure.top+this._currentMeasure.height||(this.isPointerBlocker&&(this._host._shouldBlockPointer=!0),0))}_processPicking(t,e,i,o,s,n,r,a){return!(!this._isEnabled||!this.isHitTestVisible||!this.isVisible||this._doNotRender||!this.contains(t,e)||(this._processObservables(o,t,e,i,s,n,r,a),0))}_onPointerMove(t,e,i,o){this.onPointerMoveObservable.notifyObservers(e,-1,t,this,o)&&null!=this.parent&&this.parent._onPointerMove(t,e,i,o)}_onPointerEnter(t,e){return!!this._isEnabled&&(!(this._enterCount>0)&&(-1===this._enterCount&&(this._enterCount=0),this._enterCount++,this.onPointerEnterObservable.notifyObservers(this,-1,t,this,e)&&null!=this.parent&&this.parent._onPointerEnter(t,e),!0))}_onPointerOut(t,e,i=!1){if(!(i||this._isEnabled&&t!==this))return;this._enterCount=0;let o=!0;t.isAscendant(this)||(o=this.onPointerOutObservable.notifyObservers(this,-1,t,this,e)),o&&null!=this.parent&&this.parent._onPointerOut(t,e,i)}_onPointerDown(t,e,i,o,s){return this._onPointerEnter(this,s),0===this._downCount&&(this._downCount++,this._downPointerIds[i]=!0,this.onPointerDownObservable.notifyObservers(new d(e,o),-1,t,this,s)&&null!=this.parent&&this.parent._onPointerDown(t,e,i,o,s),!0)}_onPointerUp(t,e,i,o,s,n){if(!this._isEnabled)return;this._downCount=0,delete this._downPointerIds[i];let r=s;s&&(this._enterCount>0||-1===this._enterCount)&&(r=this.onPointerClickObservable.notifyObservers(new d(e,o),-1,t,this,n)),this.onPointerUpObservable.notifyObservers(new d(e,o),-1,t,this,n)&&null!=this.parent&&this.parent._onPointerUp(t,e,i,o,r,n)}_forcePointerUp(t=null){if(null!==t)this._onPointerUp(this,n.Vector2.Zero(),t,0,!0);else for(const t in this._downPointerIds)this._onPointerUp(this,n.Vector2.Zero(),+t,0,!0)}_onWheelScroll(t,e){this._isEnabled&&this.onWheelObservable.notifyObservers(new n.Vector2(t,e))&&null!=this.parent&&this.parent._onWheelScroll(t,e)}_onCanvasBlur(){}_processObservables(t,e,i,o,s,r,a,l){if(!this._isEnabled)return!1;if(this._dummyVector2.copyFromFloats(e,i),t===n.PointerEventTypes.POINTERMOVE){this._onPointerMove(this,this._dummyVector2,s,o);const t=this._host._lastControlOver[s];return t&&t!==this&&t._onPointerOut(this,o),t!==this&&this._onPointerEnter(this,o),this._host._lastControlOver[s]=this,!0}return t===n.PointerEventTypes.POINTERDOWN?(this._onPointerDown(this,this._dummyVector2,s,r,o),this._host._registerLastControlDown(this,s),this._host._lastPickedControl=this,!0):t===n.PointerEventTypes.POINTERUP?(this._host._lastControlDown[s]&&this._host._lastControlDown[s]._onPointerUp(this,this._dummyVector2,s,r,!0,o),delete this._host._lastControlDown[s],!0):!(t!==n.PointerEventTypes.POINTERWHEEL||!this._host._lastControlOver[s]||(this._host._lastControlOver[s]._onWheelScroll(a,l),0))}_prepareFont(){(this._font||this._fontSet)&&(this._style?this._font=this._style.fontStyle+" "+this._style.fontWeight+" "+this.fontSizeInPixels+"px "+this._style.fontFamily:this._font=this._fontStyle+" "+this._fontWeight+" "+this.fontSizeInPixels+"px "+this._fontFamily,this._fontOffset=f._GetFontOffset(this._font),this.getDescendants().forEach((t=>t._markAllAsDirty())))}serialize(t){n.SerializationHelper.Serialize(this,t),t.name=this.name,t.className=this.getClassName(),this._font&&(t.fontFamily=this._fontFamily,t.fontSize=this.fontSize,t.fontWeight=this.fontWeight,t.fontStyle=this.fontStyle)}_parseFromContent(t,e){t.fontFamily&&(this.fontFamily=t.fontFamily),t.fontSize&&(this.fontSize=t.fontSize),t.fontWeight&&(this.fontWeight=t.fontWeight),t.fontStyle&&(this.fontStyle=t.fontStyle)}dispose(){this.onDirtyObservable.clear(),this.onBeforeDrawObservable.clear(),this.onAfterDrawObservable.clear(),this.onPointerDownObservable.clear(),this.onPointerEnterObservable.clear(),this.onPointerMoveObservable.clear(),this.onPointerOutObservable.clear(),this.onPointerUpObservable.clear(),this.onPointerClickObservable.clear(),this.onWheelObservable.clear(),this._styleObserver&&this._style&&(this._style.onChangedObservable.remove(this._styleObserver),this._styleObserver=null),this.parent&&(this.parent.removeControl(this),this.parent=null),this._host&&this._host._linkedControls.indexOf(this)>-1&&this.linkWithMesh(null),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear()}static get HORIZONTAL_ALIGNMENT_LEFT(){return f._HORIZONTAL_ALIGNMENT_LEFT}static get HORIZONTAL_ALIGNMENT_RIGHT(){return f._HORIZONTAL_ALIGNMENT_RIGHT}static get HORIZONTAL_ALIGNMENT_CENTER(){return f._HORIZONTAL_ALIGNMENT_CENTER}static get VERTICAL_ALIGNMENT_TOP(){return f._VERTICAL_ALIGNMENT_TOP}static get VERTICAL_ALIGNMENT_BOTTOM(){return f._VERTICAL_ALIGNMENT_BOTTOM}static get VERTICAL_ALIGNMENT_CENTER(){return f._VERTICAL_ALIGNMENT_CENTER}static _GetFontOffset(t){if(f._FontHeightSizes[t])return f._FontHeightSizes[t];const e=n.EngineStore.LastCreatedEngine;if(!e)throw new Error("Invalid engine. Unable to create a canvas.");const i=e.getFontOffset(t);return f._FontHeightSizes[t]=i,i}static Parse(t,e){const i=n.Tools.Instantiate("BABYLON.GUI."+t.className),o=n.SerializationHelper.Parse((()=>new i),t,null);return o.name=t.name,o._parseFromContent(t,e),o}static drawEllipse(t,e,i,o,s){s.translate(t,e),s.scale(i,o),s.beginPath(),s.arc(0,0,1,0,2*Math.PI),s.closePath(),s.scale(1/i,1/o),s.translate(-t,-e)}}f.AllowAlphaInheritance=!1,f._ClipMeasure=new c(0,0,0,0),f._HORIZONTAL_ALIGNMENT_LEFT=0,f._HORIZONTAL_ALIGNMENT_RIGHT=1,f._HORIZONTAL_ALIGNMENT_CENTER=2,f._VERTICAL_ALIGNMENT_TOP=0,f._VERTICAL_ALIGNMENT_BOTTOM=1,f._VERTICAL_ALIGNMENT_CENTER=2,f._FontHeightSizes={},f.AddHeader=()=>{},i([(0,n.serialize)()],f.prototype,"metadata",void 0),i([(0,n.serialize)()],f.prototype,"isHitTestVisible",void 0),i([(0,n.serialize)()],f.prototype,"isPointerBlocker",void 0),i([(0,n.serialize)()],f.prototype,"isFocusInvisible",void 0),i([(0,n.serialize)()],f.prototype,"clipChildren",void 0),i([(0,n.serialize)()],f.prototype,"clipContent",void 0),i([(0,n.serialize)()],f.prototype,"useBitmapCache",void 0),i([(0,n.serialize)()],f.prototype,"shadowOffsetX",null),i([(0,n.serialize)()],f.prototype,"shadowOffsetY",null),i([(0,n.serialize)()],f.prototype,"shadowBlur",null),i([(0,n.serialize)()],f.prototype,"shadowColor",null),i([(0,n.serialize)()],f.prototype,"hoverCursor",void 0),i([(0,n.serialize)()],f.prototype,"fontOffset",null),i([(0,n.serialize)()],f.prototype,"alpha",null),i([(0,n.serialize)()],f.prototype,"scaleX",null),i([(0,n.serialize)()],f.prototype,"scaleY",null),i([(0,n.serialize)()],f.prototype,"rotation",null),i([(0,n.serialize)()],f.prototype,"transformCenterY",null),i([(0,n.serialize)()],f.prototype,"transformCenterX",null),i([(0,n.serialize)()],f.prototype,"horizontalAlignment",null),i([(0,n.serialize)()],f.prototype,"verticalAlignment",null),i([(0,n.serialize)()],f.prototype,"fixedRatio",void 0),i([(0,n.serialize)()],f.prototype,"width",null),i([(0,n.serialize)()],f.prototype,"height",null),i([(0,n.serialize)()],f.prototype,"style",null),i([(0,n.serialize)()],f.prototype,"color",null),i([(0,n.serialize)()],f.prototype,"zIndex",null),i([(0,n.serialize)()],f.prototype,"notRenderable",null),i([(0,n.serialize)()],f.prototype,"isVisible",null),i([(0,n.serialize)()],f.prototype,"descendantsOnlyPadding",null),i([(0,n.serialize)()],f.prototype,"paddingLeft",null),i([(0,n.serialize)()],f.prototype,"paddingRight",null),i([(0,n.serialize)()],f.prototype,"paddingTop",null),i([(0,n.serialize)()],f.prototype,"paddingBottom",null),i([(0,n.serialize)()],f.prototype,"left",null),i([(0,n.serialize)()],f.prototype,"top",null),i([(0,n.serialize)()],f.prototype,"linkOffsetX",null),i([(0,n.serialize)()],f.prototype,"linkOffsetY",null),i([(0,n.serialize)()],f.prototype,"isEnabled",null),i([(0,n.serialize)()],f.prototype,"disabledColor",null),i([(0,n.serialize)()],f.prototype,"disabledColorItem",null),i([(0,n.serialize)()],f.prototype,"overlapGroup",void 0),i([(0,n.serialize)()],f.prototype,"overlapDeltaMultiplier",void 0),(0,n.RegisterClass)("BABYLON.GUI.Control",f);class g extends f{constructor(t){super(t),this.name=t,this._children=new Array,this._measureForChildren=c.Empty(),this._background="",this._adaptWidthToChildren=!1,this._adaptHeightToChildren=!1,this._renderToIntermediateTexture=!1,this._intermediateTexture=null,this.logLayoutCycleErrors=!1,this.maxLayoutCycle=3}get renderToIntermediateTexture(){return this._renderToIntermediateTexture}set renderToIntermediateTexture(t){this._renderToIntermediateTexture!==t&&(this._renderToIntermediateTexture=t,this._markAsDirty())}get adaptHeightToChildren(){return this._adaptHeightToChildren}set adaptHeightToChildren(t){this._adaptHeightToChildren!==t&&(this._adaptHeightToChildren=t,t&&(this.height="100%"),this._markAsDirty())}get adaptWidthToChildren(){return this._adaptWidthToChildren}set adaptWidthToChildren(t){this._adaptWidthToChildren!==t&&(this._adaptWidthToChildren=t,t&&(this.width="100%"),this._markAsDirty())}get background(){return this._background}set background(t){this._background!==t&&(this._background=t,this._markAsDirty())}get children(){return this._children}get isReadOnly(){return this._isReadOnly}set isReadOnly(t){this._isReadOnly=t;for(const e of this._children)e.isReadOnly=t}_getTypeName(){return"Container"}_flagDescendantsAsMatrixDirty(){for(const t of this.children)t._markMatrixAsDirty()}getChildByName(t){for(const e of this.children)if(e.name===t)return e;return null}getChildByType(t,e){for(const t of this.children)if(t.typeName===e)return t;return null}containsControl(t){return-1!==this.children.indexOf(t)}addControl(t){return t?(-1!==this._children.indexOf(t)||(t._link(this._host),t._markAllAsDirty(),this._reOrderControl(t),this._markAsDirty()),this):this}clearControls(){const t=this.children.slice();for(const e of t)this.removeControl(e);return this}removeControl(t){const e=this._children.indexOf(t);return-1!==e&&(this._children.splice(e,1),t.parent=null),t.linkWithMesh(null),this._host&&this._host._cleanControlAfterRemoval(t),this._markAsDirty(),this}_reOrderControl(t){this.removeControl(t);let e=!1;for(let i=0;i<this._children.length;i++)if(this._children[i].zIndex>t.zIndex){this._children.splice(i,0,t),e=!0;break}e||this._children.push(t),t.parent=this,this._markAsDirty()}_offsetLeft(t){super._offsetLeft(t);for(const e of this._children)e._offsetLeft(t)}_offsetTop(t){super._offsetTop(t);for(const e of this._children)e._offsetTop(t)}_markAllAsDirty(){super._markAllAsDirty();for(let t=0;t<this._children.length;t++)this._children[t]._markAllAsDirty()}_localDraw(t){this._background&&(t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fillStyle=this._background,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height),t.restore())}_link(t){super._link(t);for(const e of this._children)e._link(t)}_beforeLayout(){}_processMeasures(t,e){!this._isDirty&&this._cachedParentMeasure.isEqualsTo(t)||(super._processMeasures(t,e),this._evaluateClippingState(t),this._renderToIntermediateTexture&&(this._intermediateTexture&&this._host.getScene()!=this._intermediateTexture.getScene()&&(this._intermediateTexture.dispose(),this._intermediateTexture=null),this._intermediateTexture?this._intermediateTexture.scaleTo(this._currentMeasure.width,this._currentMeasure.height):(this._intermediateTexture=new n.DynamicTexture("",{width:this._currentMeasure.width,height:this._currentMeasure.height},this._host.getScene(),!1,n.Texture.NEAREST_SAMPLINGMODE,n.Constants.TEXTUREFORMAT_RGBA,!1),this._intermediateTexture.hasAlpha=!0)))}_layout(t,e){var i,o;if(!this.isDirty&&(!this.isVisible||this.notRenderable))return!1;this.host._numLayoutCalls++,this._isDirty&&this._currentMeasure.transformToRef(this._transformMatrix,this._prevCurrentMeasureTransformedIntoGlobalSpace);let s=0;e.save(),this._applyStates(e),this._beforeLayout();do{let n=-1,r=-1;if(this._rebuildLayout=!1,this._processMeasures(t,e),!this._isClipped){for(const t of this._children)t._tempParentMeasure.copyFrom(this._measureForChildren),t._layout(this._measureForChildren,e)&&(this.adaptWidthToChildren&&t._width.isPixel&&(n=Math.max(n,t._currentMeasure.width+t._paddingLeftInPixels+t._paddingRightInPixels)),this.adaptHeightToChildren&&t._height.isPixel&&(r=Math.max(r,t._currentMeasure.height+t._paddingTopInPixels+t._paddingBottomInPixels)));this.adaptWidthToChildren&&n>=0&&(n+=this.paddingLeftInPixels+this.paddingRightInPixels,this.width!==n+"px"&&(null===(i=this.parent)||void 0===i||i._markAsDirty(),this.width=n+"px",this._rebuildLayout=!0)),this.adaptHeightToChildren&&r>=0&&(r+=this.paddingTopInPixels+this.paddingBottomInPixels,this.height!==r+"px"&&(null===(o=this.parent)||void 0===o||o._markAsDirty(),this.height=r+"px",this._rebuildLayout=!0)),this._postMeasure()}s++}while(this._rebuildLayout&&s<this.maxLayoutCycle);return s>=3&&this.logLayoutCycleErrors&&n.Logger.Error(`Layout cycle detected in GUI (Container name=${this.name}, uniqueId=${this.uniqueId})`),e.restore(),this._isDirty&&(this.invalidateRect(),this._isDirty=!1),!0}_postMeasure(){}_draw(t,e){const i=this._renderToIntermediateTexture&&this._intermediateTexture,o=i?this._intermediateTexture.getContext():t;i&&(o.save(),o.translate(-this._currentMeasure.left,-this._currentMeasure.top),e?o.clearRect(e.left,e.top,e.width,e.height):o.clearRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)),this._localDraw(o),t.save(),this.clipChildren&&this._clipForChildren(o);for(const t of this._children)e&&!t._intersectsRect(e)||t._render(o,e);i&&(o.restore(),t.save(),t.globalAlpha=this.alpha,t.drawImage(o.canvas,this._currentMeasure.left,this._currentMeasure.top),t.restore()),t.restore()}getDescendantsToRef(t,e=!1,i){if(this.children)for(let o=0;o<this.children.length;o++){const s=this.children[o];i&&!i(s)||t.push(s),e||s.getDescendantsToRef(t,!1,i)}}_processPicking(t,e,i,o,s,n,r,a){if(!this._isEnabled||!this.isVisible||this.notRenderable)return!1;const l=super.contains(t,e);if(!l&&this.clipChildren)return!1;for(let l=this._children.length-1;l>=0;l--){const _=this._children[l];if(_._processPicking(t,e,i,o,s,n,r,a))return _.hoverCursor&&this._host._changeCursor(_.hoverCursor),!0}return!!l&&!!this.isHitTestVisible&&this._processObservables(o,t,e,i,s,n,r,a)}_additionalProcessing(t,e){super._additionalProcessing(t,e),this._measureForChildren.copyFrom(this._currentMeasure)}serialize(t){if(super.serialize(t),this.children.length){t.children=[];for(const e of this.children){const i={};e.serialize(i),t.children.push(i)}}}dispose(){var t;super.dispose();for(let t=this.children.length-1;t>=0;t--)this.children[t].dispose();null===(t=this._intermediateTexture)||void 0===t||t.dispose()}_parseFromContent(t,e){if(super._parseFromContent(t,e),this._link(e),t.children)for(const i of t.children)this.addControl(f.Parse(i,e))}}i([(0,n.serialize)()],g.prototype,"renderToIntermediateTexture",null),i([(0,n.serialize)()],g.prototype,"maxLayoutCycle",void 0),i([(0,n.serialize)()],g.prototype,"adaptHeightToChildren",null),i([(0,n.serialize)()],g.prototype,"adaptWidthToChildren",null),i([(0,n.serialize)()],g.prototype,"background",null),(0,n.RegisterClass)("BABYLON.GUI.Container",g);class m extends g{constructor(t){super(t),this.name=t,this._thickness=1,this._cornerRadius=0}get thickness(){return this._thickness}set thickness(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())}get cornerRadius(){return this._cornerRadius}set cornerRadius(t){t<0&&(t=0),this._cornerRadius!==t&&(this._cornerRadius=t,this._markAsDirty())}_getTypeName(){return"Rectangle"}_computeAdditionnalOffsetX(){return this._cornerRadius?1:0}_computeAdditionnalOffsetY(){return this._cornerRadius?1:0}_localDraw(t){t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._background&&(t.fillStyle="Button"===this.typeName?this.isEnabled?this._background:this.disabledColor:this._background,this._cornerRadius?(this._drawRoundedRect(t,this._thickness/2),t.fill()):t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)),this._thickness&&((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this.color&&(t.strokeStyle=this.color),t.lineWidth=this._thickness,this._cornerRadius?(this._drawRoundedRect(t,this._thickness/2),t.stroke()):t.strokeRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,this._currentMeasure.width-this._thickness,this._currentMeasure.height-this._thickness)),t.restore()}_additionalProcessing(t,e){super._additionalProcessing(t,e),this._measureForChildren.width-=2*this._thickness,this._measureForChildren.height-=2*this._thickness,this._measureForChildren.left+=this._thickness,this._measureForChildren.top+=this._thickness}_drawRoundedRect(t,e=0){const i=this._currentMeasure.left+e,o=this._currentMeasure.top+e,s=this._currentMeasure.width-2*e,n=this._currentMeasure.height-2*e,r=Math.min(n/2-2,Math.min(s/2-2,this._cornerRadius));t.beginPath(),t.moveTo(i+r,o),t.lineTo(i+s-r,o),t.quadraticCurveTo(i+s,o,i+s,o+r),t.lineTo(i+s,o+n-r),t.quadraticCurveTo(i+s,o+n,i+s-r,o+n),t.lineTo(i+r,o+n),t.quadraticCurveTo(i,o+n,i,o+n-r),t.lineTo(i,o+r),t.quadraticCurveTo(i,o,i+r,o),t.closePath()}_clipForChildren(t){this._cornerRadius&&(this._drawRoundedRect(t,this._thickness),t.clip())}}var p;i([(0,n.serialize)()],m.prototype,"thickness",null),i([(0,n.serialize)()],m.prototype,"cornerRadius",null),(0,n.RegisterClass)("BABYLON.GUI.Rectangle",m),function(t){t[t.Clip=0]="Clip",t[t.WordWrap=1]="WordWrap",t[t.Ellipsis=2]="Ellipsis",t[t.WordWrapEllipsis=3]="WordWrapEllipsis"}(p||(p={}));class v extends f{constructor(t,e=""){super(t),this.name=t,this._text="",this._textWrapping=p.Clip,this._textHorizontalAlignment=f.HORIZONTAL_ALIGNMENT_CENTER,this._textVerticalAlignment=f.VERTICAL_ALIGNMENT_CENTER,this._resizeToFit=!1,this._lineSpacing=new r(0),this._outlineWidth=0,this._outlineColor="white",this._underline=!1,this._lineThrough=!1,this.onTextChangedObservable=new n.Observable,this.onLinesReadyObservable=new n.Observable,this.text=e}get lines(){return this._lines}get resizeToFit(){return this._resizeToFit}set resizeToFit(t){this._resizeToFit!==t&&(this._resizeToFit=t,this._resizeToFit&&(this._width.ignoreAdaptiveScaling=!0,this._height.ignoreAdaptiveScaling=!0),this._markAsDirty())}get textWrapping(){return this._textWrapping}set textWrapping(t){this._textWrapping!==t&&(this._textWrapping=+t,this._markAsDirty())}get text(){return this._text}set text(t){this._text!==t&&(this._text=t+"",this._markAsDirty(),this.onTextChangedObservable.notifyObservers(this))}get textHorizontalAlignment(){return this._textHorizontalAlignment}set textHorizontalAlignment(t){this._textHorizontalAlignment!==t&&(this._textHorizontalAlignment=t,this._markAsDirty())}get textVerticalAlignment(){return this._textVerticalAlignment}set textVerticalAlignment(t){this._textVerticalAlignment!==t&&(this._textVerticalAlignment=t,this._markAsDirty())}set lineSpacing(t){this._lineSpacing.fromString(t)&&this._markAsDirty()}get lineSpacing(){return this._lineSpacing.toString(this._host)}get outlineWidth(){return this._outlineWidth}set outlineWidth(t){this._outlineWidth!==t&&(this._outlineWidth=t,this._markAsDirty())}get underline(){return this._underline}set underline(t){this._underline!==t&&(this._underline=t,this._markAsDirty())}get lineThrough(){return this._lineThrough}set lineThrough(t){this._lineThrough!==t&&(this._lineThrough=t,this._markAsDirty())}get outlineColor(){return this._outlineColor}set outlineColor(t){this._outlineColor!==t&&(this._outlineColor=t,this._markAsDirty())}_getTypeName(){return"TextBlock"}_processMeasures(t,e){this._fontOffset&&!this.isDirty||(this._fontOffset=f._GetFontOffset(e.font)),super._processMeasures(t,e),this._lines=this._breakLines(this._currentMeasure.width,this._currentMeasure.height,e),this.onLinesReadyObservable.notifyObservers(this);let i=0;for(let t=0;t<this._lines.length;t++){const e=this._lines[t];e.width>i&&(i=e.width)}if(this._resizeToFit){if(this._textWrapping===p.Clip){const t=this._paddingLeftInPixels+this._paddingRightInPixels+i|0;t!==this._width.internalValue&&(this._width.updateInPlace(t,r.UNITMODE_PIXEL),this._rebuildLayout=!0)}let t=this._paddingTopInPixels+this._paddingBottomInPixels+this._fontOffset.height*this._lines.length|0;if(this._lines.length>0&&0!==this._lineSpacing.internalValue){let e=0;e=this._lineSpacing.isPixel?this._lineSpacing.getValue(this._host):this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height),t+=(this._lines.length-1)*e}t!==this._height.internalValue&&(this._height.updateInPlace(t,r.UNITMODE_PIXEL),this._rebuildLayout=!0)}}_drawText(t,e,i,o){const s=this._currentMeasure.width;let n=0;switch(this._textHorizontalAlignment){case f.HORIZONTAL_ALIGNMENT_LEFT:n=0;break;case f.HORIZONTAL_ALIGNMENT_RIGHT:n=s-e;break;case f.HORIZONTAL_ALIGNMENT_CENTER:n=(s-e)/2}(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(o.shadowColor=this.shadowColor,o.shadowBlur=this.shadowBlur,o.shadowOffsetX=this.shadowOffsetX,o.shadowOffsetY=this.shadowOffsetY),this.outlineWidth&&o.strokeText(t,this._currentMeasure.left+n,i),o.fillText(t,this._currentMeasure.left+n,i),this._underline&&(o.beginPath(),o.lineWidth=Math.round(.05*this.fontSizeInPixels),o.moveTo(this._currentMeasure.left+n,i+3),o.lineTo(this._currentMeasure.left+n+e,i+3),o.stroke(),o.closePath()),this._lineThrough&&(o.beginPath(),o.lineWidth=Math.round(.05*this.fontSizeInPixels),o.moveTo(this._currentMeasure.left+n,i-this.fontSizeInPixels/3),o.lineTo(this._currentMeasure.left+n+e,i-this.fontSizeInPixels/3),o.stroke(),o.closePath())}_draw(t,e){t.save(),this._applyStates(t),this._renderLines(t),t.restore()}_applyStates(t){super._applyStates(t),this.outlineWidth&&(t.lineWidth=this.outlineWidth,t.strokeStyle=this.outlineColor,t.lineJoin="miter",t.miterLimit=2)}_breakLines(t,e,i){const o=[],s=this.text.split("\n");if(this._textWrapping===p.Ellipsis)for(var n of s)o.push(this._parseLineEllipsis(n,t,i));else if(this._textWrapping===p.WordWrap)for(var n of s)o.push(...this._parseLineWordWrap(n,t,i));else if(this._textWrapping===p.WordWrapEllipsis)for(var n of s)o.push(...this._parseLineWordWrapEllipsis(n,t,e,i));else for(var n of s)o.push(this._parseLine(n,i));return o}_parseLine(t="",e){const i=e.measureText(t);return{text:t,width:Math.abs(i.actualBoundingBoxLeft)+Math.abs(i.actualBoundingBoxRight)}}_getCharsToRemove(t,e,i){const o=t>e?t-e:0,s=t/i;return Math.max(Math.floor(o/s),1)}_parseLineEllipsis(t="",e,i){let o=i.measureText(t),s=Math.abs(o.actualBoundingBoxLeft)+Math.abs(o.actualBoundingBoxRight),n=this._getCharsToRemove(s,e,t.length);const r=Array.from&&Array.from(t);if(r)for(;r.length&&s>e;)r.splice(r.length-n,n),t=`${r.join("")}`,o=i.measureText(t),s=Math.abs(o.actualBoundingBoxLeft)+Math.abs(o.actualBoundingBoxRight),n=this._getCharsToRemove(s,e,t.length);else{for(;t.length>2&&s>e;)t=t.slice(0,-n),o=i.measureText(t+""),s=Math.abs(o.actualBoundingBoxLeft)+Math.abs(o.actualBoundingBoxRight),n=this._getCharsToRemove(s,e,t.length);t+=""}return{text:t,width:s}}_parseLineWordWrap(t="",e,i){const o=[],s=this.wordSplittingFunction?this.wordSplittingFunction(t):t.split(" ");let n=i.measureText(t),r=Math.abs(n.actualBoundingBoxLeft)+Math.abs(n.actualBoundingBoxRight);for(let a=0;a<s.length;a++){const l=a>0?t+" "+s[a]:s[0],_=i.measureText(l),h=Math.abs(_.actualBoundingBoxLeft)+Math.abs(_.actualBoundingBoxRight);h>e&&a>0?(o.push({text:t,width:r}),t=s[a],n=i.measureText(t),r=Math.abs(n.actualBoundingBoxLeft)+Math.abs(n.actualBoundingBoxRight)):(r=h,t=l)}return o.push({text:t,width:r}),o}_parseLineWordWrapEllipsis(t="",e,i,o){const s=this._parseLineWordWrap(t,e,o);for(let t=1;t<=s.length;t++)if(this._computeHeightForLinesOf(t)>i&&t>1){const i=s[t-2],n=s[t-1];s[t-2]=this._parseLineEllipsis(`${i.text+n.text}`,e,o);const r=s.length-t+1;for(let t=0;t<r;t++)s.pop();return s}return s}_renderLines(t){const e=this._currentMeasure.height;let i=0;switch(this._textVerticalAlignment){case f.VERTICAL_ALIGNMENT_TOP:i=this._fontOffset.ascent;break;case f.VERTICAL_ALIGNMENT_BOTTOM:i=e-this._fontOffset.height*(this._lines.length-1)-this._fontOffset.descent;break;case f.VERTICAL_ALIGNMENT_CENTER:i=this._fontOffset.ascent+(e-this._fontOffset.height*this._lines.length)/2}i+=this._currentMeasure.top;for(let e=0;e<this._lines.length;e++){const o=this._lines[e];0!==e&&0!==this._lineSpacing.internalValue&&(this._lineSpacing.isPixel?i+=this._lineSpacing.getValue(this._host):i+=this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height)),this._drawText(o.text,o.width,i,t),i+=this._fontOffset.height}}_computeHeightForLinesOf(t){let e=this._paddingTopInPixels+this._paddingBottomInPixels+this._fontOffset.height*t;if(t>0&&0!==this._lineSpacing.internalValue){let i=0;i=this._lineSpacing.isPixel?this._lineSpacing.getValue(this._host):this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height),e+=(t-1)*i}return e}computeExpectedHeight(){var t;if(this.text&&this.widthInPixels){const e=null===(t=n.EngineStore.LastCreatedEngine)||void 0===t?void 0:t.createCanvas(0,0).getContext("2d");if(e){this._applyStates(e),this._fontOffset||(this._fontOffset=f._GetFontOffset(e.font));const t=this._lines?this._lines:this._breakLines(this.widthInPixels-this._paddingLeftInPixels-this._paddingRightInPixels,this.heightInPixels-this._paddingTopInPixels-this._paddingBottomInPixels,e);return this._computeHeightForLinesOf(t.length)}}return 0}dispose(){super.dispose(),this.onTextChangedObservable.clear()}}i([(0,n.serialize)()],v.prototype,"resizeToFit",null),i([(0,n.serialize)()],v.prototype,"textWrapping",null),i([(0,n.serialize)()],v.prototype,"text",null),i([(0,n.serialize)()],v.prototype,"textHorizontalAlignment",null),i([(0,n.serialize)()],v.prototype,"textVerticalAlignment",null),i([(0,n.serialize)()],v.prototype,"lineSpacing",null),i([(0,n.serialize)()],v.prototype,"outlineWidth",null),i([(0,n.serialize)()],v.prototype,"underline",null),i([(0,n.serialize)()],v.prototype,"lineThrough",null),i([(0,n.serialize)()],v.prototype,"outlineColor",null),(0,n.RegisterClass)("BABYLON.GUI.TextBlock",v);class b extends f{constructor(t,e=null){super(t),this.name=t,this._workingCanvas=null,this._loaded=!1,this._stretch=b.STRETCH_FILL,this._autoScale=!1,this._sourceLeft=0,this._sourceTop=0,this._sourceWidth=0,this._sourceHeight=0,this._svgAttributesComputationCompleted=!1,this._isSVG=!1,this._cellWidth=0,this._cellHeight=0,this._cellId=-1,this._populateNinePatchSlicesFromImage=!1,this._imageDataCache={data:null,key:""},this.onImageLoadedObservable=new n.Observable,this.onSVGAttributesComputedObservable=new n.Observable,this.source=e}get isLoaded(){return this._loaded}get detectPointerOnOpaqueOnly(){return this._detectPointerOnOpaqueOnly}set detectPointerOnOpaqueOnly(t){this._detectPointerOnOpaqueOnly!==t&&(this._detectPointerOnOpaqueOnly=t)}get sliceLeft(){return this._sliceLeft}set sliceLeft(t){this._sliceLeft!==t&&(this._sliceLeft=t,this._markAsDirty())}get sliceRight(){return this._sliceRight}set sliceRight(t){this._sliceRight!==t&&(this._sliceRight=t,this._markAsDirty())}get sliceTop(){return this._sliceTop}set sliceTop(t){this._sliceTop!==t&&(this._sliceTop=t,this._markAsDirty())}get sliceBottom(){return this._sliceBottom}set sliceBottom(t){this._sliceBottom!==t&&(this._sliceBottom=t,this._markAsDirty())}get sourceLeft(){return this._sourceLeft}set sourceLeft(t){this._sourceLeft!==t&&(this._sourceLeft=t,this._markAsDirty())}get sourceTop(){return this._sourceTop}set sourceTop(t){this._sourceTop!==t&&(this._sourceTop=t,this._markAsDirty())}get sourceWidth(){return this._sourceWidth}set sourceWidth(t){this._sourceWidth!==t&&(this._sourceWidth=t,this._markAsDirty())}get sourceHeight(){return this._sourceHeight}set sourceHeight(t){this._sourceHeight!==t&&(this._sourceHeight=t,this._markAsDirty())}get imageWidth(){return this._imageWidth}get imageHeight(){return this._imageHeight}get populateNinePatchSlicesFromImage(){return this._populateNinePatchSlicesFromImage}set populateNinePatchSlicesFromImage(t){this._populateNinePatchSlicesFromImage!==t&&(this._populateNinePatchSlicesFromImage=t,this._populateNinePatchSlicesFromImage&&this._loaded&&this._extractNinePatchSliceDataFromImage())}get isSVG(){return this._isSVG}get svgAttributesComputationCompleted(){return this._svgAttributesComputationCompleted}get autoScale(){return this._autoScale}set autoScale(t){this._autoScale!==t&&(this._autoScale=t,t&&this._loaded&&this.synchronizeSizeWithContent())}get stretch(){return this._stretch}set stretch(t){this._stretch!==t&&(this._stretch=t,this._markAsDirty())}_rotate90(t,e=!1){var i,o;const s=this._domImage.width,r=this._domImage.height,a=(null===(o=null===(i=this._host)||void 0===i?void 0:i.getScene())||void 0===o?void 0:o.getEngine())||n.EngineStore.LastCreatedEngine;if(!a)throw new Error("Invalid engine. Unable to create a canvas.");const l=a.createCanvas(r,s),_=l.getContext("2d");_.translate(l.width/2,l.height/2),_.rotate(t*Math.PI/2),_.drawImage(this._domImage,0,0,s,r,-s/2,-r/2,s,r);const h=l.toDataURL("image/jpg"),c=new b(this.name+"rotated",h);return e&&(c._stretch=this._stretch,c._autoScale=this._autoScale,c._cellId=this._cellId,c._cellWidth=t%1?this._cellHeight:this._cellWidth,c._cellHeight=t%1?this._cellWidth:this._cellHeight),this._handleRotationForSVGImage(this,c,t),this._imageDataCache.data=null,c}_handleRotationForSVGImage(t,e,i){t._isSVG&&(t._svgAttributesComputationCompleted?(this._rotate90SourceProperties(t,e,i),this._markAsDirty()):t.onSVGAttributesComputedObservable.addOnce((()=>{this._rotate90SourceProperties(t,e,i),this._markAsDirty()})))}_rotate90SourceProperties(t,e,i){let o=t.sourceLeft,s=t.sourceTop,n=t.domImage.width,r=t.domImage.height,a=o,l=s,_=t.sourceWidth,h=t.sourceHeight;if(0!=i){const t=i<0?-1:1;i%=4;for(let e=0;e<Math.abs(i);++e)a=-(s-r/2)*t+r/2,l=(o-n/2)*t+n/2,[_,h]=[h,_],i<0?l-=h:a-=_,o=a,s=l,[n,r]=[r,n]}e.sourceLeft=a,e.sourceTop=l,e.sourceWidth=_,e.sourceHeight=h}_extractNinePatchSliceDataFromImage(){var t,e;const i=this._domImage.width,o=this._domImage.height;if(!this._workingCanvas){const s=(null===(e=null===(t=this._host)||void 0===t?void 0:t.getScene())||void 0===e?void 0:e.getEngine())||n.EngineStore.LastCreatedEngine;if(!s)throw new Error("Invalid engine. Unable to create a canvas.");this._workingCanvas=s.createCanvas(i,o)}const s=this._workingCanvas.getContext("2d");s.drawImage(this._domImage,0,0,i,o);const r=s.getImageData(0,0,i,o);this._sliceLeft=-1,this._sliceRight=-1;for(let t=0;t<i;t++){const e=r.data[4*t+3];if(e>127&&-1===this._sliceLeft)this._sliceLeft=t;else if(e<127&&this._sliceLeft>-1){this._sliceRight=t;break}}this._sliceTop=-1,this._sliceBottom=-1;for(let t=0;t<o;t++){const e=r.data[t*i*4+3];if(e>127&&-1===this._sliceTop)this._sliceTop=t;else if(e<127&&this._sliceTop>-1){this._sliceBottom=t;break}}}set domImage(t){this._domImage=t,this._loaded=!1,this._imageDataCache.data=null,this._domImage.width?this._onImageLoaded():this._domImage.onload=()=>{this._onImageLoaded()}}get domImage(){return this._domImage}_onImageLoaded(){this._imageDataCache.data=null,this._imageWidth=this._domImage.width,this._imageHeight=this._domImage.height,this._loaded=!0,this._populateNinePatchSlicesFromImage&&this._extractNinePatchSliceDataFromImage(),this._autoScale&&this.synchronizeSizeWithContent(),this.onImageLoadedObservable.notifyObservers(this),this._markAsDirty()}get source(){return this._source}set source(t){var e,i;if(this._source===t)return;this._loaded=!1,this._source=t,this._imageDataCache.data=null,t&&(t=this._svgCheck(t));const o=(null===(i=null===(e=this._host)||void 0===e?void 0:e.getScene())||void 0===i?void 0:i.getEngine())||n.EngineStore.LastCreatedEngine;if(!o)throw new Error("Invalid engine. Unable to create a canvas.");this._domImage=o.createCanvasImage(),this._domImage.onload=()=>{this._onImageLoaded()},t&&(n.Tools.SetCorsBehavior(t,this._domImage),this._domImage.src=t)}_svgCheck(t){if(window.SVGSVGElement&&-1!==t.search(/.svg#/gi)&&t.indexOf("#")===t.lastIndexOf("#")){this._isSVG=!0;const e=t.split("#")[0],i=t.split("#")[1],o=document.body.querySelector('object[data="'+e+'"]');if(o){const e=o.contentDocument;if(e&&e.documentElement){const s=e.documentElement.getAttribute("viewBox"),n=Number(e.documentElement.getAttribute("width")),r=Number(e.documentElement.getAttribute("height"));if(e.getElementById(i)&&s&&n&&r)return this._getSVGAttribs(o,i),t}o.addEventListener("load",(()=>{this._getSVGAttribs(o,i)}))}else{const t=document.createElement("object");t.data=e,t.type="image/svg+xml",t.width="0%",t.height="0%",document.body.appendChild(t),t.onload=()=>{const t=document.body.querySelector('object[data="'+e+'"]');t&&this._getSVGAttribs(t,i)}}return e}return t}_getSVGAttribs(t,e){const i=t.contentDocument;if(i&&i.documentElement){const t=i.documentElement.getAttribute("viewBox"),o=Number(i.documentElement.getAttribute("width")),s=Number(i.documentElement.getAttribute("height")),n=i.getElementById(e);if(t&&o&&s&&n){const e=Number(t.split(" ")[2]),i=Number(t.split(" ")[3]),r=n.getBBox();let a=1,l=1,_=0,h=0;const c=n.transform.baseVal.consolidate().matrix;n.transform&&n.transform.baseVal.consolidate()&&(a=c.a,l=c.d,_=c.e,h=c.f),this.sourceLeft=(a*r.x+_)*o/e,this.sourceTop=(l*r.y+h)*s/i,this.sourceWidth=r.width*a*(o/e),this.sourceHeight=r.height*l*(s/i),this._svgAttributesComputationCompleted=!0,this.onSVGAttributesComputedObservable.notifyObservers(this)}}}get cellWidth(){return this._cellWidth}set cellWidth(t){this._cellWidth!==t&&(this._cellWidth=t,this._markAsDirty())}get cellHeight(){return this._cellHeight}set cellHeight(t){this._cellHeight!==t&&(this._cellHeight=t,this._markAsDirty())}get cellId(){return this._cellId}set cellId(t){this._cellId!==t&&(this._cellId=t,this._markAsDirty())}contains(t,e){if(!super.contains(t,e))return!1;if(!this._detectPointerOnOpaqueOnly||!this._workingCanvas)return!0;const i=0|this._currentMeasure.width,o=0|this._currentMeasure.height,s=i+"_"+o;let n=this._imageDataCache.data;if(!n||this._imageDataCache.key!==s){const t=this._workingCanvas.getContext("2d");this._imageDataCache.data=n=t.getImageData(0,0,i,o).data,this._imageDataCache.key=s}return n[4*((t=t-this._currentMeasure.left|0)+(e=e-this._currentMeasure.top|0)*i)+3]>0}_getTypeName(){return"Image"}synchronizeSizeWithContent(){this._loaded&&(this.width=this._domImage.width+"px",this.height=this._domImage.height+"px")}_processMeasures(t,e){if(this._loaded)switch(this._stretch){case b.STRETCH_NONE:case b.STRETCH_FILL:case b.STRETCH_UNIFORM:case b.STRETCH_NINE_PATCH:break;case b.STRETCH_EXTEND:this._autoScale&&this.synchronizeSizeWithContent(),this.parent&&this.parent.parent&&(this.parent.adaptWidthToChildren=!0,this.parent.adaptHeightToChildren=!0)}super._processMeasures(t,e)}_prepareWorkingCanvasForOpaqueDetection(){var t,e;if(!this._detectPointerOnOpaqueOnly)return;const i=this._currentMeasure.width,o=this._currentMeasure.height;if(!this._workingCanvas){const s=(null===(e=null===(t=this._host)||void 0===t?void 0:t.getScene())||void 0===e?void 0:e.getEngine())||n.EngineStore.LastCreatedEngine;if(!s)throw new Error("Invalid engine. Unable to create a canvas.");this._workingCanvas=s.createCanvas(i,o)}this._workingCanvas.getContext("2d").clearRect(0,0,i,o)}_drawImage(t,e,i,o,s,n,r,a,l){t.drawImage(this._domImage,e,i,o,s,n,r,a,l),this._detectPointerOnOpaqueOnly&&(t=this._workingCanvas.getContext("2d")).drawImage(this._domImage,e,i,o,s,n-this._currentMeasure.left,r-this._currentMeasure.top,a,l)}_draw(t){let e,i,o,s;if(t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),-1==this.cellId)e=this._sourceLeft,i=this._sourceTop,o=this._sourceWidth?this._sourceWidth:this._imageWidth,s=this._sourceHeight?this._sourceHeight:this._imageHeight;else{const t=this._domImage.naturalWidth/this.cellWidth,n=this.cellId/t>>0,r=this.cellId%t;e=this.cellWidth*r,i=this.cellHeight*n,o=this.cellWidth,s=this.cellHeight}if(this._prepareWorkingCanvasForOpaqueDetection(),this._applyStates(t),this._loaded)switch(this._stretch){case b.STRETCH_NONE:case b.STRETCH_FILL:this._drawImage(t,e,i,o,s,this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height);break;case b.STRETCH_UNIFORM:var n=this._currentMeasure.width/o,r=this._currentMeasure.height/s,a=Math.min(n,r),l=(this._currentMeasure.width-o*a)/2,_=(this._currentMeasure.height-s*a)/2;this._drawImage(t,e,i,o,s,this._currentMeasure.left+l,this._currentMeasure.top+_,o*a,s*a);break;case b.STRETCH_EXTEND:this._drawImage(t,e,i,o,s,this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height);break;case b.STRETCH_NINE_PATCH:this._renderNinePatch(t)}t.restore()}_renderNinePatch(t){const e=this._sliceLeft,i=this._sliceTop,o=this._imageHeight-this._sliceBottom,s=this._imageWidth-this._sliceRight,n=this._sliceRight-this._sliceLeft,r=this._sliceBottom-this._sliceTop,a=this._currentMeasure.width-s-e+2,l=this._currentMeasure.height-o-i+2,_=this._currentMeasure.left+e-1,h=this._currentMeasure.top+i-1,c=this._currentMeasure.left+this._currentMeasure.width-s,d=this._currentMeasure.top+this._currentMeasure.height-o;this._drawImage(t,0,0,e,i,this._currentMeasure.left,this._currentMeasure.top,e,i),this._drawImage(t,this._sliceLeft,0,n,i,_,this._currentMeasure.top,a,i),this._drawImage(t,this.sliceRight,0,s,i,c,this._currentMeasure.top,s,i),this._drawImage(t,0,this._sliceTop,e,r,this._currentMeasure.left,h,e,l),this._drawImage(t,this._sliceLeft,this._sliceTop,n,r,_,h,a,l),this._drawImage(t,this._sliceRight,this._sliceTop,s,r,c,h,s,l),this._drawImage(t,0,this._sliceBottom,e,o,this._currentMeasure.left,d,e,o),this._drawImage(t,this.sliceLeft,this._sliceBottom,n,o,_,d,a,o),this._drawImage(t,this._sliceRight,this._sliceBottom,s,o,c,d,s,o)}dispose(){super.dispose(),this.onImageLoadedObservable.clear(),this.onSVGAttributesComputedObservable.clear()}}b.STRETCH_NONE=0,b.STRETCH_FILL=1,b.STRETCH_UNIFORM=2,b.STRETCH_EXTEND=3,b.STRETCH_NINE_PATCH=4,i([(0,n.serialize)()],b.prototype,"detectPointerOnOpaqueOnly",null),i([(0,n.serialize)()],b.prototype,"sliceLeft",null),i([(0,n.serialize)()],b.prototype,"sliceRight",null),i([(0,n.serialize)()],b.prototype,"sliceTop",null),i([(0,n.serialize)()],b.prototype,"sliceBottom",null),i([(0,n.serialize)()],b.prototype,"sourceLeft",null),i([(0,n.serialize)()],b.prototype,"sourceTop",null),i([(0,n.serialize)()],b.prototype,"sourceWidth",null),i([(0,n.serialize)()],b.prototype,"sourceHeight",null),i([(0,n.serialize)()],b.prototype,"populateNinePatchSlicesFromImage",null),i([(0,n.serialize)()],b.prototype,"autoScale",null),i([(0,n.serialize)()],b.prototype,"stretch",null),i([(0,n.serialize)()],b.prototype,"source",null),i([(0,n.serialize)()],b.prototype,"cellWidth",null),i([(0,n.serialize)()],b.prototype,"cellHeight",null),i([(0,n.serialize)()],b.prototype,"cellId",null),(0,n.RegisterClass)("BABYLON.GUI.Image",b);class x extends m{constructor(t){super(t),this.name=t,this.delegatePickingToChildren=!1,this.thickness=1,this.isPointerBlocker=!0;let e=null;this.pointerEnterAnimation=()=>{e=this.alpha,this.alpha-=.1},this.pointerOutAnimation=()=>{null!==e&&(this.alpha=e)},this.pointerDownAnimation=()=>{this.scaleX-=.05,this.scaleY-=.05},this.pointerUpAnimation=()=>{this.scaleX+=.05,this.scaleY+=.05}}get image(){return this._image}get textBlock(){return this._textBlock}_getTypeName(){return"Button"}_processPicking(t,e,i,o,s,n,r,a){if(!this._isEnabled||!this.isHitTestVisible||!this.isVisible||this.notRenderable)return!1;if(!super.contains(t,e))return!1;if(this.delegatePickingToChildren){let i=!1;for(let o=this._children.length-1;o>=0;o--){const s=this._children[o];if(s.isEnabled&&s.isHitTestVisible&&s.isVisible&&!s.notRenderable&&s.contains(t,e)){i=!0;break}}if(!i)return!1}return this._processObservables(o,t,e,i,s,n,r,a),!0}_onPointerEnter(t,e){return!!super._onPointerEnter(t,e)&&(!this.isReadOnly&&this.pointerEnterAnimation&&this.pointerEnterAnimation(),!0)}_onPointerOut(t,e,i=!1){!this.isReadOnly&&this.pointerOutAnimation&&this.pointerOutAnimation(),super._onPointerOut(t,e,i)}_onPointerDown(t,e,i,o,s){return!!super._onPointerDown(t,e,i,o,s)&&(!this.isReadOnly&&this.pointerDownAnimation&&this.pointerDownAnimation(),!0)}_onPointerUp(t,e,i,o,s,n){!this.isReadOnly&&this.pointerUpAnimation&&this.pointerUpAnimation(),super._onPointerUp(t,e,i,o,s,n)}serialize(t){super.serialize(t),this._textBlock&&(t.textBlockName=this._textBlock.name),this._image&&(t.imageName=this._image.name)}_parseFromContent(t,e){super._parseFromContent(t,e),t.textBlockName&&(this._textBlock=this.getChildByName(t.textBlockName)),t.imageName&&(this._image=this.getChildByName(t.imageName))}static CreateImageButton(t,e,i){const o=new this(t),s=new v(t+"_button",e);s.textWrapping=!0,s.textHorizontalAlignment=f.HORIZONTAL_ALIGNMENT_CENTER,s.paddingLeft="20%",o.addControl(s);const n=new b(t+"_icon",i);return n.width="20%",n.stretch=b.STRETCH_UNIFORM,n.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,o.addControl(n),o._image=n,o._textBlock=s,o}static CreateImageOnlyButton(t,e){const i=new this(t),o=new b(t+"_icon",e);return o.stretch=b.STRETCH_FILL,o.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,i.addControl(o),i._image=o,i}static CreateSimpleButton(t,e){const i=new this(t),o=new v(t+"_button",e);return o.textWrapping=!0,o.textHorizontalAlignment=f.HORIZONTAL_ALIGNMENT_CENTER,i.addControl(o),i._textBlock=o,i}static CreateImageWithCenterTextButton(t,e,i){const o=new this(t),s=new b(t+"_icon",i);s.stretch=b.STRETCH_FILL,o.addControl(s);const n=new v(t+"_button",e);return n.textWrapping=!0,n.textHorizontalAlignment=f.HORIZONTAL_ALIGNMENT_CENTER,o.addControl(n),o._image=s,o._textBlock=n,o}}(0,n.RegisterClass)("BABYLON.GUI.Button",x);class y extends g{constructor(t){super(t),this.name=t,this._isVertical=!0,this._manualWidth=!1,this._manualHeight=!1,this._doNotTrackManualChanges=!1,this._spacing=0,this.ignoreLayoutWarnings=!1}get isVertical(){return this._isVertical}set isVertical(t){this._isVertical!==t&&(this._isVertical=t,this._markAsDirty())}get spacing(){return this._spacing}set spacing(t){this._spacing!==t&&(this._spacing=t,this._markAsDirty())}set width(t){this._doNotTrackManualChanges||(this._manualWidth=!0),this._width.toString(this._host)!==t&&this._width.fromString(t)&&this._markAsDirty()}get width(){return this._width.toString(this._host)}set height(t){this._doNotTrackManualChanges||(this._manualHeight=!0),this._height.toString(this._host)!==t&&this._height.fromString(t)&&this._markAsDirty()}get height(){return this._height.toString(this._host)}_getTypeName(){return"StackPanel"}_preMeasure(t,e){for(const t of this._children)this._isVertical?t.verticalAlignment=f.VERTICAL_ALIGNMENT_TOP:t.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT;super._preMeasure(t,e)}_additionalProcessing(t,e){super._additionalProcessing(t,e),this._measureForChildren.copyFrom(t),this._measureForChildren.left=this._currentMeasure.left,this._measureForChildren.top=this._currentMeasure.top,this.isVertical&&!this._manualWidth||(this._measureForChildren.width=this._currentMeasure.width),(this.isVertical||this._manualHeight)&&(this._measureForChildren.height=this._currentMeasure.height)}_postMeasure(){let t=0,e=0;const i=this._children.length;for(let o=0;o<i;o++){const s=this._children[o];s.isVisible&&!s.notRenderable&&(this._isVertical?(s.top!==e+"px"&&(s.top=e+"px",this._rebuildLayout=!0,s._top.ignoreAdaptiveScaling=!0),s._height.isPercentage&&!s._automaticSize?this.ignoreLayoutWarnings||n.Tools.Warn(`Control (Name:${s.name}, UniqueId:${s.uniqueId}) is using height in percentage mode inside a vertical StackPanel`):e+=s._currentMeasure.height+s._paddingTopInPixels+s._paddingBottomInPixels+(o<i-1?this._spacing:0)):(s.left!==t+"px"&&(s.left=t+"px",this._rebuildLayout=!0,s._left.ignoreAdaptiveScaling=!0),s._width.isPercentage&&!s._automaticSize?this.ignoreLayoutWarnings||n.Tools.Warn(`Control (Name:${s.name}, UniqueId:${s.uniqueId}) is using width in percentage mode inside a horizontal StackPanel`):t+=s._currentMeasure.width+s._paddingLeftInPixels+s._paddingRightInPixels+(o<i-1?this._spacing:0)))}t+=this._paddingLeftInPixels+this._paddingRightInPixels,e+=this._paddingTopInPixels+this._paddingBottomInPixels,this._doNotTrackManualChanges=!0;let o=!1,s=!1;if(!this._manualHeight&&this._isVertical){const t=this.height;this.height=e+"px",s=t!==this.height||!this._height.ignoreAdaptiveScaling}if(!this._manualWidth&&!this._isVertical){const e=this.width;this.width=t+"px",o=e!==this.width||!this._width.ignoreAdaptiveScaling}s&&(this._height.ignoreAdaptiveScaling=!0),o&&(this._width.ignoreAdaptiveScaling=!0),this._doNotTrackManualChanges=!1,(o||s)&&(this._rebuildLayout=!0),super._postMeasure()}serialize(t){super.serialize(t),t.manualWidth=this._manualWidth,t.manualHeight=this._manualHeight}_parseFromContent(t,e){this._manualWidth=t.manualWidth,this._manualHeight=t.manualHeight,super._parseFromContent(t,e)}}i([(0,n.serialize)()],y.prototype,"ignoreLayoutWarnings",void 0),i([(0,n.serialize)()],y.prototype,"isVertical",null),i([(0,n.serialize)()],y.prototype,"spacing",null),i([(0,n.serialize)()],y.prototype,"width",null),i([(0,n.serialize)()],y.prototype,"height",null),(0,n.RegisterClass)("BABYLON.GUI.StackPanel",y);class B extends f{constructor(t){super(t),this.name=t,this._isChecked=!1,this._background="black",this._checkSizeRatio=.8,this._thickness=1,this.onIsCheckedChangedObservable=new n.Observable,this.isPointerBlocker=!0}get thickness(){return this._thickness}set thickness(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())}get checkSizeRatio(){return this._checkSizeRatio}set checkSizeRatio(t){t=Math.max(Math.min(1,t),0),this._checkSizeRatio!==t&&(this._checkSizeRatio=t,this._markAsDirty())}get background(){return this._background}set background(t){this._background!==t&&(this._background=t,this._markAsDirty())}get isChecked(){return this._isChecked}set isChecked(t){this._isChecked!==t&&(this._isChecked=t,this._markAsDirty(),this.onIsCheckedChangedObservable.notifyObservers(t))}_getTypeName(){return"Checkbox"}_draw(t,e){t.save(),this._applyStates(t);const i=this._currentMeasure.width-this._thickness,o=this._currentMeasure.height-this._thickness;if((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fillStyle=this._isEnabled?this._background:this._disabledColor,t.fillRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,i,o),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this._isChecked){t.fillStyle=this._isEnabled?this.color:this._disabledColorItem;const e=i*this._checkSizeRatio,s=o*this._checkSizeRatio;t.fillRect(this._currentMeasure.left+this._thickness/2+(i-e)/2,this._currentMeasure.top+this._thickness/2+(o-s)/2,e,s)}t.strokeStyle=this.color,t.lineWidth=this._thickness,t.strokeRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,i,o),t.restore()}_onPointerDown(t,e,i,o,s){return!!super._onPointerDown(t,e,i,o,s)&&(this.isReadOnly||(this.isChecked=!this.isChecked),!0)}static AddCheckBoxWithHeader(t,e){const i=new y;i.isVertical=!1,i.height="30px";const o=new B;o.width="20px",o.height="20px",o.isChecked=!0,o.color="green",o.onIsCheckedChangedObservable.add(e),i.addControl(o);const s=new v;return s.text=t,s.width="180px",s.paddingLeft="5px",s.textHorizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,s.color="white",i.addControl(s),i}}i([(0,n.serialize)()],B.prototype,"thickness",null),i([(0,n.serialize)()],B.prototype,"checkSizeRatio",null),i([(0,n.serialize)()],B.prototype,"background",null),i([(0,n.serialize)()],B.prototype,"isChecked",null),(0,n.RegisterClass)("BABYLON.GUI.Checkbox",B);class C{get text(){return this._characters?this._characters.join(""):this._text}set text(t){this._text=t,this._characters=Array.from&&Array.from(t)}get length(){return this._characters?this._characters.length:this._text.length}removePart(t,e,i){if(this._text=this._text.slice(0,t)+(i||"")+this._text.slice(e),this._characters){const o=i?Array.from(i):[];this._characters.splice(t,e-t,...o)}}charAt(t){return this._characters?this._characters[t]:this._text.charAt(t)}substr(t,e){if(this._characters){t=isNaN(t)?0:t>=0?Math.min(t,this._characters.length):this._characters.length+Math.max(t,-this._characters.length),void 0===e?e=this._characters.length-t:(isNaN(e)||e<0)&&(e=0);const i=[];for(;--e>=0;)i[e]=this._characters[t+e];return i.join("")}return this._text.substr(t,e)}substring(t,e){if(this._characters){isNaN(t)?t=0:t>this._characters.length?t=this._characters.length:t<0&&(t=0),void 0===e?e=this._characters.length:isNaN(e)?e=0:e>this._characters.length?e=this._characters.length:e<0&&(e=0);const i=[];let o=0;for(;t<e;)i[o++]=this._characters[t++];return i.join("")}return this._text.substring(t,e)}isWord(t){const e=/\w/g;return this._characters?-1!==this._characters[t].search(e):-1!==this._text.search(e)}}class T extends f{constructor(t,e=""){super(t),this.name=t,this._placeholderText="",this._background="#222222",this._focusedBackground="#000000",this._focusedColor="white",this._placeholderColor="gray",this._thickness=1,this._margin=new r(10,r.UNITMODE_PIXEL),this._autoStretchWidth=!0,this._maxWidth=new r(1,r.UNITMODE_PERCENTAGE,!1),this._isFocused=!1,this._blinkIsEven=!1,this._cursorOffset=0,this._deadKey=!1,this._addKey=!0,this._currentKey="",this._isTextHighlightOn=!1,this._textHighlightColor="#d5e0ff",this._highligherOpacity=.4,this._highlightedText="",this._startHighlightIndex=0,this._endHighlightIndex=0,this._cursorIndex=-1,this._onFocusSelectAll=!1,this._isPointerDown=!1,this.promptMessage="Please enter text:",this.disableMobilePrompt=!1,this.onTextChangedObservable=new n.Observable,this.onBeforeKeyAddObservable=new n.Observable,this.onFocusObservable=new n.Observable,this.onBlurObservable=new n.Observable,this.onTextHighlightObservable=new n.Observable,this.onTextCopyObservable=new n.Observable,this.onTextCutObservable=new n.Observable,this.onTextPasteObservable=new n.Observable,this.onKeyboardEventProcessedObservable=new n.Observable,this.text=e,this.isPointerBlocker=!0}get maxWidth(){return this._maxWidth.toString(this._host)}get maxWidthInPixels(){return this._maxWidth.getValueInPixel(this._host,this._cachedParentMeasure.width)}set maxWidth(t){this._maxWidth.toString(this._host)!==t&&this._maxWidth.fromString(t)&&this._markAsDirty()}get highligherOpacity(){return this._highligherOpacity}set highligherOpacity(t){this._highligherOpacity!==t&&(this._highligherOpacity=t,this._markAsDirty())}get onFocusSelectAll(){return this._onFocusSelectAll}set onFocusSelectAll(t){this._onFocusSelectAll!==t&&(this._onFocusSelectAll=t,this._markAsDirty())}get textHighlightColor(){return this._textHighlightColor}set textHighlightColor(t){this._textHighlightColor!==t&&(this._textHighlightColor=t,this._markAsDirty())}get margin(){return this._margin.toString(this._host)}get marginInPixels(){return this._margin.getValueInPixel(this._host,this._cachedParentMeasure.width)}set margin(t){this._margin.toString(this._host)!==t&&this._margin.fromString(t)&&this._markAsDirty()}get autoStretchWidth(){return this._autoStretchWidth}set autoStretchWidth(t){this._autoStretchWidth!==t&&(this._autoStretchWidth=t,this._markAsDirty())}get thickness(){return this._thickness}set thickness(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())}get focusedBackground(){return this._focusedBackground}set focusedBackground(t){this._focusedBackground!==t&&(this._focusedBackground=t,this._markAsDirty())}get focusedColor(){return this._focusedColor}set focusedColor(t){this._focusedColor!==t&&(this._focusedColor=t,this._markAsDirty())}get background(){return this._background}set background(t){this._background!==t&&(this._background=t,this._markAsDirty())}get placeholderColor(){return this._placeholderColor}set placeholderColor(t){this._placeholderColor!==t&&(this._placeholderColor=t,this._markAsDirty())}get placeholderText(){return this._placeholderText}set placeholderText(t){this._placeholderText!==t&&(this._placeholderText=t,this._markAsDirty())}get deadKey(){return this._deadKey}set deadKey(t){this._deadKey=t}get highlightedText(){return this._highlightedText}set highlightedText(t){this._highlightedText!==t&&(this._highlightedText=t,this._markAsDirty())}get addKey(){return this._addKey}set addKey(t){this._addKey=t}get currentKey(){return this._currentKey}set currentKey(t){this._currentKey=t}get text(){return this._textWrapper.text}set text(t){const e=t.toString();this._textWrapper||(this._textWrapper=new C),this._textWrapper.text!==e&&(this._textWrapper.text=e,this._textHasChanged())}_textHasChanged(){this._markAsDirty(),this.onTextChangedObservable.notifyObservers(this)}get width(){return this._width.toString(this._host)}set width(t){this._width.toString(this._host)!==t&&(this._width.fromString(t)&&this._markAsDirty(),this.autoStretchWidth=!1)}onBlur(){this._isFocused=!1,this._scrollLeft=null,this._cursorOffset=0,clearTimeout(this._blinkTimeout),this._markAsDirty(),this.onBlurObservable.notifyObservers(this),this._host.unRegisterClipboardEvents(),this._onClipboardObserver&&this._host.onClipboardObservable.remove(this._onClipboardObserver);const t=this._host.getScene();this._onPointerDblTapObserver&&t&&t.onPointerObservable.remove(this._onPointerDblTapObserver)}onFocus(){if(!this._isEnabled)return;if(this._scrollLeft=null,this._isFocused=!0,this._blinkIsEven=!1,this._cursorOffset=0,this._markAsDirty(),this.onFocusObservable.notifyObservers(this),"touch"===this._focusedBy&&!this.disableMobilePrompt){const t=prompt(this.promptMessage);return null!==t&&(this.text=t),void(this._host.focusedControl=null)}this._host.registerClipboardEvents(),this._onClipboardObserver=this._host.onClipboardObservable.add((t=>{switch(t.type){case n.ClipboardEventTypes.COPY:this._onCopyText(t.event),this.onTextCopyObservable.notifyObservers(this);break;case n.ClipboardEventTypes.CUT:this._onCutText(t.event),this.onTextCutObservable.notifyObservers(this);break;case n.ClipboardEventTypes.PASTE:this._onPasteText(t.event),this.onTextPasteObservable.notifyObservers(this);break;default:return}}));const t=this._host.getScene();t&&(this._onPointerDblTapObserver=t.onPointerObservable.add((t=>{this._isFocused&&t.type===n.PointerEventTypes.POINTERDOUBLETAP&&this._processDblClick(t)}))),this._onFocusSelectAll&&this._selectAllText()}focus(){this._host.moveFocusToControl(this)}blur(){this._host.focusedControl=null}_getTypeName(){return"InputText"}keepsFocusWith(){return this._connectedVirtualKeyboard?[this._connectedVirtualKeyboard]:null}processKey(t,e,i){if(!this.isReadOnly&&(!i||!i.ctrlKey&&!i.metaKey||67!==t&&86!==t&&88!==t)){if(i&&(i.ctrlKey||i.metaKey)&&65===t)return this._selectAllText(),void i.preventDefault();switch(t){case 32:e=" ";break;case 191:i&&i.preventDefault();break;case 8:if(this._textWrapper.text&&this._textWrapper.length>0){if(this._isTextHighlightOn)return this._textWrapper.removePart(this._startHighlightIndex,this._endHighlightIndex),this._textHasChanged(),this._isTextHighlightOn=!1,this._cursorOffset=this._textWrapper.length-this._startHighlightIndex,this._blinkIsEven=!1,void(i&&i.preventDefault());if(0===this._cursorOffset)this.text=this._textWrapper.substr(0,this._textWrapper.length-1);else{const t=this._textWrapper.length-this._cursorOffset;t>0&&(this._textWrapper.removePart(t-1,t),this._textHasChanged())}}return void(i&&i.preventDefault());case 46:if(this._isTextHighlightOn)return this._textWrapper.removePart(this._startHighlightIndex,this._endHighlightIndex),this._textHasChanged(),this._isTextHighlightOn=!1,this._cursorOffset=this._textWrapper.length-this._startHighlightIndex,void(i&&i.preventDefault());if(this._textWrapper.text&&this._textWrapper.length>0&&this._cursorOffset>0){const t=this._textWrapper.length-this._cursorOffset;this._textWrapper.removePart(t,t+1),this._textHasChanged(),this._cursorOffset--}return void(i&&i.preventDefault());case 13:return this._host.focusedControl=null,void(this._isTextHighlightOn=!1);case 35:return this._cursorOffset=0,this._blinkIsEven=!1,this._isTextHighlightOn=!1,void this._markAsDirty();case 36:return this._cursorOffset=this._textWrapper.length,this._blinkIsEven=!1,this._isTextHighlightOn=!1,void this._markAsDirty();case 37:if(this._cursorOffset++,this._cursorOffset>this._textWrapper.length&&(this._cursorOffset=this._textWrapper.length),i&&i.shiftKey){if(this._blinkIsEven=!1,i.ctrlKey||i.metaKey){if(!this._isTextHighlightOn){if(this._textWrapper.length===this._cursorOffset)return;this._endHighlightIndex=this._textWrapper.length-this._cursorOffset+1}return this._startHighlightIndex=0,this._cursorIndex=this._textWrapper.length-this._endHighlightIndex,this._cursorOffset=this._textWrapper.length,this._isTextHighlightOn=!0,void this._markAsDirty()}return this._isTextHighlightOn?-1===this._cursorIndex&&(this._cursorIndex=this._textWrapper.length-this._endHighlightIndex,this._cursorOffset=0===this._startHighlightIndex?this._textWrapper.length:this._textWrapper.length-this._startHighlightIndex+1):(this._isTextHighlightOn=!0,this._cursorIndex=this._cursorOffset>=this._textWrapper.length?this._textWrapper.length:this._cursorOffset-1),this._cursorIndex<this._cursorOffset?(this._endHighlightIndex=this._textWrapper.length-this._cursorIndex,this._startHighlightIndex=this._textWrapper.length-this._cursorOffset):this._cursorIndex>this._cursorOffset?(this._endHighlightIndex=this._textWrapper.length-this._cursorOffset,this._startHighlightIndex=this._textWrapper.length-this._cursorIndex):this._isTextHighlightOn=!1,void this._markAsDirty()}return this._isTextHighlightOn&&(this._cursorOffset=this._textWrapper.length-this._startHighlightIndex,this._isTextHighlightOn=!1),i&&(i.ctrlKey||i.metaKey)&&(this._cursorOffset=this._textWrapper.length,i.preventDefault()),this._blinkIsEven=!1,this._isTextHighlightOn=!1,this._cursorIndex=-1,void this._markAsDirty();case 39:if(this._cursorOffset--,this._cursorOffset<0&&(this._cursorOffset=0),i&&i.shiftKey){if(this._blinkIsEven=!1,i.ctrlKey||i.metaKey){if(!this._isTextHighlightOn){if(0===this._cursorOffset)return;this._startHighlightIndex=this._textWrapper.length-this._cursorOffset-1}return this._endHighlightIndex=this._textWrapper.length,this._isTextHighlightOn=!0,this._cursorIndex=this._textWrapper.length-this._startHighlightIndex,this._cursorOffset=0,void this._markAsDirty()}return this._isTextHighlightOn?-1===this._cursorIndex&&(this._cursorIndex=this._textWrapper.length-this._startHighlightIndex,this._cursorOffset=this._textWrapper.length===this._endHighlightIndex?0:this._textWrapper.length-this._endHighlightIndex-1):(this._isTextHighlightOn=!0,this._cursorIndex=this._cursorOffset<=0?0:this._cursorOffset+1),this._cursorIndex<this._cursorOffset?(this._endHighlightIndex=this._textWrapper.length-this._cursorIndex,this._startHighlightIndex=this._textWrapper.length-this._cursorOffset):this._cursorIndex>this._cursorOffset?(this._endHighlightIndex=this._textWrapper.length-this._cursorOffset,this._startHighlightIndex=this._textWrapper.length-this._cursorIndex):this._isTextHighlightOn=!1,void this._markAsDirty()}return this._isTextHighlightOn&&(this._cursorOffset=this._textWrapper.length-this._endHighlightIndex,this._isTextHighlightOn=!1),i&&(i.ctrlKey||i.metaKey)&&(this._cursorOffset=0,i.preventDefault()),this._blinkIsEven=!1,this._isTextHighlightOn=!1,this._cursorIndex=-1,void this._markAsDirty();case 222:i?"Quote"==i.code?i.shiftKey?(t=34,e='"'):(t=39,e="'"):(i.preventDefault(),this._cursorIndex=-1,this.deadKey=!0):(this._cursorIndex=-1,this.deadKey=!0)}if(e&&(-1===t||32===t||34===t||39===t||t>47&&t<64||t>64&&t<91||t>159&&t<193||t>218&&t<223||t>95&&t<112)&&(this._currentKey=e,this.onBeforeKeyAddObservable.notifyObservers(this),e=this._currentKey,this._addKey))if(this._isTextHighlightOn)this._textWrapper.removePart(this._startHighlightIndex,this._endHighlightIndex,e),this._textHasChanged(),this._cursorOffset=this._textWrapper.length-(this._startHighlightIndex+1),this._isTextHighlightOn=!1,this._blinkIsEven=!1,this._markAsDirty();else if(0===this._cursorOffset)this.text+=e;else{const t=this._textWrapper.length-this._cursorOffset;this._textWrapper.removePart(t,t,e),this._textHasChanged()}}}_updateValueFromCursorIndex(t){if(this._blinkIsEven=!1,-1===this._cursorIndex)this._cursorIndex=t;else if(this._cursorIndex<this._cursorOffset)this._endHighlightIndex=this._textWrapper.length-this._cursorIndex,this._startHighlightIndex=this._textWrapper.length-this._cursorOffset;else{if(!(this._cursorIndex>this._cursorOffset))return this._isTextHighlightOn=!1,void this._markAsDirty();this._endHighlightIndex=this._textWrapper.length-this._cursorOffset,this._startHighlightIndex=this._textWrapper.length-this._cursorIndex}this._isTextHighlightOn=!0,this._markAsDirty()}_processDblClick(t){let e,i;this._startHighlightIndex=this._textWrapper.length-this._cursorOffset,this._endHighlightIndex=this._startHighlightIndex;do{i=this._endHighlightIndex<this._textWrapper.length&&this._textWrapper.isWord(this._endHighlightIndex)?++this._endHighlightIndex:0,e=this._startHighlightIndex>0&&this._textWrapper.isWord(this._startHighlightIndex-1)?--this._startHighlightIndex:0}while(e||i);this._cursorOffset=this._textWrapper.length-this._startHighlightIndex,this.onTextHighlightObservable.notifyObservers(this),this._isTextHighlightOn=!0,this._clickedCoordinate=null,this._blinkIsEven=!0,this._cursorIndex=-1,this._markAsDirty()}_selectAllText(){this._blinkIsEven=!0,this._isTextHighlightOn=!0,this._startHighlightIndex=0,this._endHighlightIndex=this._textWrapper.length,this._cursorOffset=this._textWrapper.length,this._cursorIndex=-1,this._markAsDirty()}processKeyboard(t){this.processKey(t.keyCode,t.key,t),this.onKeyboardEventProcessedObservable.notifyObservers(t)}_onCopyText(t){this._isTextHighlightOn=!1;try{t.clipboardData&&t.clipboardData.setData("text/plain",this._highlightedText)}catch(t){}this._host.clipboardData=this._highlightedText}_onCutText(t){if(this._highlightedText){this._textWrapper.removePart(this._startHighlightIndex,this._endHighlightIndex),this._textHasChanged(),this._isTextHighlightOn=!1,this._cursorOffset=this._textWrapper.length-this._startHighlightIndex;try{t.clipboardData&&t.clipboardData.setData("text/plain",this._highlightedText)}catch(t){}this._host.clipboardData=this._highlightedText,this._highlightedText=""}}_onPasteText(t){let e="";e=t.clipboardData&&-1!==t.clipboardData.types.indexOf("text/plain")?t.clipboardData.getData("text/plain"):this._host.clipboardData;const i=this._textWrapper.length-this._cursorOffset;this._textWrapper.removePart(i,i,e),this._textHasChanged()}_draw(t,e){t.save(),this._applyStates(t),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._isFocused?this._focusedBackground&&(t.fillStyle=this._isEnabled?this._focusedBackground:this._disabledColor,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)):this._background&&(t.fillStyle=this._isEnabled?this._background:this._disabledColor,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this._fontOffset&&!this._wasDirty||(this._fontOffset=f._GetFontOffset(t.font));const i=this._currentMeasure.left+this._margin.getValueInPixel(this._host,this._tempParentMeasure.width);this.color&&(t.fillStyle=this.color);let o=this._beforeRenderText(this._textWrapper);this._isFocused||this._textWrapper.text||!this._placeholderText||(o=new C,o.text=this._placeholderText,this._placeholderColor&&(t.fillStyle=this._placeholderColor)),this._textWidth=t.measureText(o.text).width;const s=2*this._margin.getValueInPixel(this._host,this._tempParentMeasure.width);this._autoStretchWidth&&(this.width=Math.min(this._maxWidth.getValueInPixel(this._host,this._tempParentMeasure.width),this._textWidth+s)+"px",this._autoStretchWidth=!0);const n=this._fontOffset.ascent+(this._currentMeasure.height-this._fontOffset.height)/2,r=this._width.getValueInPixel(this._host,this._tempParentMeasure.width)-s;if(t.save(),t.beginPath(),t.rect(i,this._currentMeasure.top+(this._currentMeasure.height-this._fontOffset.height)/2,r+2,this._currentMeasure.height),t.clip(),this._isFocused&&this._textWidth>r){const t=i-this._textWidth+r;this._scrollLeft||(this._scrollLeft=t)}else this._scrollLeft=i;if(t.fillText(o.text,this._scrollLeft,this._currentMeasure.top+n),this._isFocused){if(this._clickedCoordinate){const e=this._scrollLeft+this._textWidth-this._clickedCoordinate;let i=0;this._cursorOffset=0;let s=0;do{this._cursorOffset&&(s=Math.abs(e-i)),this._cursorOffset++,i=t.measureText(o.substr(o.length-this._cursorOffset,this._cursorOffset)).width}while(i<e&&o.length>=this._cursorOffset);Math.abs(e-i)>s&&this._cursorOffset--,this._blinkIsEven=!1,this._clickedCoordinate=null}if(!this._blinkIsEven){const e=o.substr(o.length-this._cursorOffset),s=t.measureText(e).width;let n=this._scrollLeft+this._textWidth-s;n<i?(this._scrollLeft+=i-n,n=i,this._markAsDirty()):n>i+r&&(this._scrollLeft+=i+r-n,n=i+r,this._markAsDirty()),this._isTextHighlightOn||t.fillRect(n,this._currentMeasure.top+(this._currentMeasure.height-this._fontOffset.height)/2,2,this._fontOffset.height)}if(clearTimeout(this._blinkTimeout),this._blinkTimeout=setTimeout((()=>{this._blinkIsEven=!this._blinkIsEven,this._markAsDirty()}),500),this._isTextHighlightOn){clearTimeout(this._blinkTimeout);const e=t.measureText(o.substring(this._startHighlightIndex)).width;let s=this._scrollLeft+this._textWidth-e;this._highlightedText=o.substring(this._startHighlightIndex,this._endHighlightIndex);let n=t.measureText(o.substring(this._startHighlightIndex,this._endHighlightIndex)).width;s<i&&(n-=i-s,n||(n=t.measureText(o.charAt(o.length-this._cursorOffset)).width),s=i),t.globalAlpha=this._highligherOpacity,t.fillStyle=this._textHighlightColor,t.fillRect(s,this._currentMeasure.top+(this._currentMeasure.height-this._fontOffset.height)/2,n,this._fontOffset.height),t.globalAlpha=1}}t.restore(),this._thickness&&(this._isFocused?this.focusedColor&&(t.strokeStyle=this.focusedColor):this.color&&(t.strokeStyle=this.color),t.lineWidth=this._thickness,t.strokeRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,this._currentMeasure.width-this._thickness,this._currentMeasure.height-this._thickness)),t.restore()}_onPointerDown(t,e,i,o,s){return!(!super._onPointerDown(t,e,i,o,s)||!this.isReadOnly&&(this._clickedCoordinate=e.x,this._isTextHighlightOn=!1,this._highlightedText="",this._cursorIndex=-1,this._isPointerDown=!0,this._host._capturingControl[i]=this,this._focusedBy=s.event.pointerType,this._host.focusedControl===this?(clearTimeout(this._blinkTimeout),this._markAsDirty(),0):!this._isEnabled||(this._host.focusedControl=this,0)))}_onPointerMove(t,e,i,o){this._host.focusedControl===this&&this._isPointerDown&&!this.isReadOnly&&(this._clickedCoordinate=e.x,this._markAsDirty(),this._updateValueFromCursorIndex(this._cursorOffset)),super._onPointerMove(t,e,i,o)}_onPointerUp(t,e,i,o,s){this._isPointerDown=!1,delete this._host._capturingControl[i],super._onPointerUp(t,e,i,o,s)}_beforeRenderText(t){return t}dispose(){super.dispose(),this.onBlurObservable.clear(),this.onFocusObservable.clear(),this.onTextChangedObservable.clear(),this.onTextCopyObservable.clear(),this.onTextCutObservable.clear(),this.onTextPasteObservable.clear(),this.onTextHighlightObservable.clear(),this.onKeyboardEventProcessedObservable.clear()}}i([(0,n.serialize)()],T.prototype,"promptMessage",void 0),i([(0,n.serialize)()],T.prototype,"disableMobilePrompt",void 0),i([(0,n.serialize)()],T.prototype,"maxWidth",null),i([(0,n.serialize)()],T.prototype,"highligherOpacity",null),i([(0,n.serialize)()],T.prototype,"onFocusSelectAll",null),i([(0,n.serialize)()],T.prototype,"textHighlightColor",null),i([(0,n.serialize)()],T.prototype,"margin",null),i([(0,n.serialize)()],T.prototype,"autoStretchWidth",null),i([(0,n.serialize)()],T.prototype,"thickness",null),i([(0,n.serialize)()],T.prototype,"focusedBackground",null),i([(0,n.serialize)()],T.prototype,"focusedColor",null),i([(0,n.serialize)()],T.prototype,"background",null),i([(0,n.serialize)()],T.prototype,"placeholderColor",null),i([(0,n.serialize)()],T.prototype,"placeholderText",null),i([(0,n.serialize)()],T.prototype,"deadKey",null),i([(0,n.serialize)()],T.prototype,"text",null),i([(0,n.serialize)()],T.prototype,"width",null),(0,n.RegisterClass)("BABYLON.GUI.InputText",T);class P extends g{constructor(t){super(t),this.name=t,this._rowDefinitions=new Array,this._rowDefinitionObservers=[],this._columnDefinitions=new Array,this._columnDefinitionObservers=[],this._cells={},this._childControls=new Array}get columnCount(){return this._columnDefinitions.length}get rowCount(){return this._rowDefinitions.length}get children(){return this._childControls}get cells(){return this._cells}getRowDefinition(t){return t<0||t>=this._rowDefinitions.length?null:this._rowDefinitions[t]}getColumnDefinition(t){return t<0||t>=this._columnDefinitions.length?null:this._columnDefinitions[t]}addRowDefinition(t,e=!1){return this._rowDefinitions.push(new r(t,e?r.UNITMODE_PIXEL:r.UNITMODE_PERCENTAGE)),this._rowDefinitionObservers.push(this._rowDefinitions[this.rowCount-1].onChangedObservable.add((()=>this._markAsDirty()))),this._markAsDirty(),this}addColumnDefinition(t,e=!1){return this._columnDefinitions.push(new r(t,e?r.UNITMODE_PIXEL:r.UNITMODE_PERCENTAGE)),this._columnDefinitionObservers.push(this._columnDefinitions[this.columnCount-1].onChangedObservable.add((()=>this._markAsDirty()))),this._markAsDirty(),this}setRowDefinition(t,e,i=!1){if(t<0||t>=this._rowDefinitions.length)return this;const o=this._rowDefinitions[t];return o&&o.isPixel===i&&o.value===e||(this._rowDefinitions[t].onChangedObservable.remove(this._rowDefinitionObservers[t]),this._rowDefinitions[t]=new r(e,i?r.UNITMODE_PIXEL:r.UNITMODE_PERCENTAGE),this._rowDefinitionObservers[t]=this._rowDefinitions[t].onChangedObservable.add((()=>this._markAsDirty())),this._markAsDirty()),this}setColumnDefinition(t,e,i=!1){if(t<0||t>=this._columnDefinitions.length)return this;const o=this._columnDefinitions[t];return o&&o.isPixel===i&&o.value===e||(this._columnDefinitions[t].onChangedObservable.remove(this._columnDefinitionObservers[t]),this._columnDefinitions[t]=new r(e,i?r.UNITMODE_PIXEL:r.UNITMODE_PERCENTAGE),this._columnDefinitionObservers[t]=this._columnDefinitions[t].onChangedObservable.add((()=>this._markAsDirty())),this._markAsDirty()),this}getChildrenAt(t,e){const i=this._cells[`${t}:${e}`];return i?i.children:null}getChildCellInfo(t){return t._tag}_removeCell(t,e){if(t){super.removeControl(t);for(const e of t.children){const t=this._childControls.indexOf(e);-1!==t&&this._childControls.splice(t,1)}delete this._cells[e]}}_offsetCell(t,e){if(this._cells[e]){this._cells[t]=this._cells[e];for(const e of this._cells[t].children)e._tag=t;delete this._cells[e]}}removeColumnDefinition(t){if(t<0||t>=this._columnDefinitions.length)return this;for(var e=0;e<this._rowDefinitions.length;e++){const i=`${e}:${t}`,o=this._cells[i];this._removeCell(o,i)}for(e=0;e<this._rowDefinitions.length;e++)for(let i=t+1;i<this._columnDefinitions.length;i++){const t=`${e}:${i-1}`,o=`${e}:${i}`;this._offsetCell(t,o)}return this._columnDefinitions[t].onChangedObservable.remove(this._columnDefinitionObservers[t]),this._columnDefinitions.splice(t,1),this._columnDefinitionObservers.splice(t,1),this._markAsDirty(),this}removeRowDefinition(t){if(t<0||t>=this._rowDefinitions.length)return this;for(var e=0;e<this._columnDefinitions.length;e++){const i=`${t}:${e}`,o=this._cells[i];this._removeCell(o,i)}for(e=0;e<this._columnDefinitions.length;e++)for(let i=t+1;i<this._rowDefinitions.length;i++){const t=`${i-1}:${e}`,o=`${i}:${e}`;this._offsetCell(t,o)}return this._rowDefinitions[t].onChangedObservable.remove(this._rowDefinitionObservers[t]),this._rowDefinitions.splice(t,1),this._rowDefinitionObservers.splice(t,1),this._markAsDirty(),this}addControl(t,e=0,i=0){if(0===this._rowDefinitions.length&&this.addRowDefinition(1,!1),0===this._columnDefinitions.length&&this.addColumnDefinition(1,!1),-1!==this._childControls.indexOf(t))return n.Tools.Warn(`Control (Name:${t.name}, UniqueId:${t.uniqueId}) is already associated with this grid. You must remove it before reattaching it`),this;const o=`${Math.min(e,this._rowDefinitions.length-1)}:${Math.min(i,this._columnDefinitions.length-1)}`;let s=this._cells[o];return s||(s=new g(o),this._cells[o]=s,s.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,s.verticalAlignment=f.VERTICAL_ALIGNMENT_TOP,super.addControl(s)),s.addControl(t),this._childControls.push(t),t._tag=o,t.parent=this,this._markAsDirty(),this}removeControl(t){const e=this._childControls.indexOf(t);-1!==e&&this._childControls.splice(e,1);const i=this._cells[t._tag];return i&&(i.removeControl(t),t._tag=null),this._markAsDirty(),this}_getTypeName(){return"Grid"}_getGridDefinitions(t){const e=[],i=[],o=[],s=[];let n=this._currentMeasure.width,r=0,a=this._currentMeasure.height,l=0,_=0;for(var h of this._rowDefinitions){if(h.isPixel){const t=h.getValue(this._host);a-=t,i[_]=t}else l+=h.value;_++}let c=0;for(var h of(_=0,this._rowDefinitions)){if(s.push(c),h.isPixel)c+=h.getValue(this._host);else{const t=h.value/l*a;c+=t,i[_]=t}_++}for(var d of(_=0,this._columnDefinitions)){if(d.isPixel){const t=d.getValue(this._host);n-=t,e[_]=t}else r+=d.value;_++}let u=0;for(var d of(_=0,this._columnDefinitions)){if(o.push(u),d.isPixel)u+=d.getValue(this._host);else{const t=d.value/r*n;u+=t,e[_]=t}_++}t(o,s,e,i)}_additionalProcessing(t,e){this._getGridDefinitions(((t,e,i,o)=>{for(const s in this._cells){if(!this._cells.hasOwnProperty(s))continue;const n=s.split(":"),r=parseInt(n[0]),a=parseInt(n[1]),l=this._cells[s];l.left=t[a]+"px",l.top=e[r]+"px",l.width=i[a]+"px",l.height=o[r]+"px",l._left.ignoreAdaptiveScaling=!0,l._top.ignoreAdaptiveScaling=!0,l._width.ignoreAdaptiveScaling=!0,l._height.ignoreAdaptiveScaling=!0}})),super._additionalProcessing(t,e)}_flagDescendantsAsMatrixDirty(){for(const t in this._cells)this._cells.hasOwnProperty(t)&&this._cells[t]._markMatrixAsDirty()}_renderHighlightSpecific(t){super._renderHighlightSpecific(t),this._getGridDefinitions(((e,i,o,s)=>{for(var n=0;n<e.length;n++){const i=this._currentMeasure.left+e[n]+o[n];t.beginPath(),t.moveTo(i,this._currentMeasure.top),t.lineTo(i,this._currentMeasure.top+this._currentMeasure.height),t.stroke()}for(n=0;n<i.length;n++){const e=this._currentMeasure.top+i[n]+s[n];t.beginPath(),t.moveTo(this._currentMeasure.left,e),t.lineTo(this._currentMeasure.left+this._currentMeasure.width,e),t.stroke()}})),t.restore()}dispose(){super.dispose();for(const t of this._childControls)t.dispose();for(var t=0;t<this._rowDefinitions.length;t++)this._rowDefinitions[t].onChangedObservable.remove(this._rowDefinitionObservers[t]);for(t=0;t<this._columnDefinitions.length;t++)this._columnDefinitions[t].onChangedObservable.remove(this._columnDefinitionObservers[t]);this._rowDefinitionObservers=[],this._rowDefinitions=[],this._columnDefinitionObservers=[],this._columnDefinitions=[],this._cells={},this._childControls=[]}serialize(t){super.serialize(t),t.columnCount=this.columnCount,t.rowCount=this.rowCount,t.columns=[],t.rows=[],t.tags=[];for(let e=0;e<this.columnCount;++e){const i=this.getColumnDefinition(e),o={value:null==i?void 0:i.getValue(this.host),unit:null==i?void 0:i.unit};t.columns.push(o)}for(let e=0;e<this.rowCount;++e){const i=this.getRowDefinition(e),o={value:null==i?void 0:i.getValue(this.host),unit:null==i?void 0:i.unit};t.rows.push(o)}this.children.forEach((e=>{t.tags.push(e._tag)}))}_parseFromContent(t,e){super._parseFromContent(t,e);const i=[];this.children.forEach((t=>{i.push(t)})),this.removeRowDefinition(0),this.removeColumnDefinition(0);for(let e=0;e<t.columnCount;++e){const i=t.columns[e].value,o=t.columns[e].unit;this.addColumnDefinition(i,1===o)}for(let e=0;e<t.rowCount;++e){const i=t.rows[e].value,o=t.rows[e].unit;this.addRowDefinition(i,1===o)}for(let e=0;e<i.length;++e){const o=t.tags[e];let s=parseInt(o.substring(0,o.search(":")));isNaN(s)&&(s=0);let n=parseInt(o.substring(o.search(":")+1));isNaN(n)&&(n=0),this.addControl(i[e],s,n)}}}(0,n.RegisterClass)("BABYLON.GUI.Grid",P);class I extends f{constructor(t){super(t),this.name=t,this._value=n.Color3.Red(),this._tmpColor=new n.Color3,this._pointerStartedOnSquare=!1,this._pointerStartedOnWheel=!1,this._squareLeft=0,this._squareTop=0,this._squareSize=0,this._h=360,this._s=1,this._v=1,this._lastPointerDownId=-1,this.onValueChangedObservable=new n.Observable,this._pointerIsDown=!1,this.value=new n.Color3(.88,.1,.1),this.size="200px",this.isPointerBlocker=!0}get value(){return this._value}set value(t){this._value.equals(t)||(this._value.copyFrom(t),this._value.toHSVToRef(this._tmpColor),this._h=this._tmpColor.r,this._s=Math.max(this._tmpColor.g,1e-5),this._v=Math.max(this._tmpColor.b,1e-5),this._markAsDirty(),this._value.r<=I._Epsilon&&(this._value.r=0),this._value.g<=I._Epsilon&&(this._value.g=0),this._value.b<=I._Epsilon&&(this._value.b=0),this._value.r>=1-I._Epsilon&&(this._value.r=1),this._value.g>=1-I._Epsilon&&(this._value.g=1),this._value.b>=1-I._Epsilon&&(this._value.b=1),this.onValueChangedObservable.notifyObservers(this._value))}get width(){return this._width.toString(this._host)}set width(t){this._width.toString(this._host)!==t&&this._width.fromString(t)&&(0===this._width.getValue(this._host)&&(t="1px",this._width.fromString(t)),this._height.fromString(t),this._markAsDirty())}get height(){return this._height.toString(this._host)}set height(t){this._height.toString(this._host)!==t&&this._height.fromString(t)&&(0===this._height.getValue(this._host)&&(t="1px",this._height.fromString(t)),this._width.fromString(t),this._markAsDirty())}get size(){return this.width}set size(t){this.width=t}_getTypeName(){return"ColorPicker"}_preMeasure(t,e){t.width<t.height?this._currentMeasure.height=t.width:this._currentMeasure.width=t.height}_updateSquareProps(){const t=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height),e=2*(t-.2*t)/Math.sqrt(2),i=t-.5*e;this._squareLeft=this._currentMeasure.left+i,this._squareTop=this._currentMeasure.top+i,this._squareSize=e}_drawGradientSquare(t,e,i,o,s,n){const r=n.createLinearGradient(e,i,o+e,i);r.addColorStop(0,"#fff"),r.addColorStop(1,"hsl("+t+", 100%, 50%)"),n.fillStyle=r,n.fillRect(e,i,o,s);const a=n.createLinearGradient(e,i,e,s+i);a.addColorStop(0,"rgba(0,0,0,0)"),a.addColorStop(1,"#000"),n.fillStyle=a,n.fillRect(e,i,o,s)}_drawCircle(t,e,i,o){o.beginPath(),o.arc(t,e,i+1,0,2*Math.PI,!1),o.lineWidth=3,o.strokeStyle="#333333",o.stroke(),o.beginPath(),o.arc(t,e,i,0,2*Math.PI,!1),o.lineWidth=3,o.strokeStyle="#ffffff",o.stroke()}_createColorWheelCanvas(t,e){const i=n.EngineStore.LastCreatedEngine;if(!i)throw new Error("Invalid engine. Unable to create a canvas.");const o=i.createCanvas(2*t,2*t),s=o.getContext("2d"),r=s.getImageData(0,0,2*t,2*t),a=r.data,l=this._tmpColor,_=t*t,h=t-e,c=h*h;for(let e=-t;e<t;e++)for(let i=-t;i<t;i++){const o=e*e+i*i;if(o>_||o<c)continue;const s=Math.sqrt(o),r=Math.atan2(i,e);n.Color3.HSVtoRGBToRef(180*r/Math.PI+180,s/t,1,l);const u=4*(e+t+2*(i+t)*t);a[u]=255*l.r,a[u+1]=255*l.g,a[u+2]=255*l.b;let f=.2;const g=.2,m=.04,p=50,v=150;f=t<p?g:t>v?m:(m-g)*(t-p)/(v-p)+g;var d=(s-h)/(t-h);a[u+3]=d<f?d/f*255:d>1-f?255*(1-(d-(1-f))/f):255}return s.putImageData(r,0,0),o}_draw(t){t.save(),this._applyStates(t);const e=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height),i=.2*e,o=this._currentMeasure.left,s=this._currentMeasure.top;this._colorWheelCanvas&&this._colorWheelCanvas.width==2*e||(this._colorWheelCanvas=this._createColorWheelCanvas(e,i)),this._updateSquareProps(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.fillRect(this._squareLeft,this._squareTop,this._squareSize,this._squareSize)),t.drawImage(this._colorWheelCanvas,o,s),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this._drawGradientSquare(this._h,this._squareLeft,this._squareTop,this._squareSize,this._squareSize,t);let n=this._squareLeft+this._squareSize*this._s,r=this._squareTop+this._squareSize*(1-this._v);this._drawCircle(n,r,.04*e,t);const a=e-.5*i;n=o+e+Math.cos((this._h-180)*Math.PI/180)*a,r=s+e+Math.sin((this._h-180)*Math.PI/180)*a,this._drawCircle(n,r,.35*i,t),t.restore()}_updateValueFromPointer(t,e){if(this._pointerStartedOnWheel){const i=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height),o=i+this._currentMeasure.left,s=i+this._currentMeasure.top;this._h=180*Math.atan2(e-s,t-o)/Math.PI+180}else this._pointerStartedOnSquare&&(this._updateSquareProps(),this._s=(t-this._squareLeft)/this._squareSize,this._v=1-(e-this._squareTop)/this._squareSize,this._s=Math.min(this._s,1),this._s=Math.max(this._s,I._Epsilon),this._v=Math.min(this._v,1),this._v=Math.max(this._v,I._Epsilon));n.Color3.HSVtoRGBToRef(this._h,this._s,this._v,this._tmpColor),this.value=this._tmpColor}_isPointOnSquare(t,e){this._updateSquareProps();const i=this._squareLeft,o=this._squareTop,s=this._squareSize;return t>=i&&t<=i+s&&e>=o&&e<=o+s}_isPointOnWheel(t,e){const i=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height),o=i-.2*i,s=t-(i+this._currentMeasure.left),n=e-(i+this._currentMeasure.top),r=s*s+n*n;return r<=i*i&&r>=o*o}_onPointerDown(t,e,i,o,s){if(!super._onPointerDown(t,e,i,o,s))return!1;if(this.isReadOnly)return!0;this._pointerIsDown=!0,this._pointerStartedOnSquare=!1,this._pointerStartedOnWheel=!1,this._invertTransformMatrix.transformCoordinates(e.x,e.y,this._transformedPosition);const n=this._transformedPosition.x,r=this._transformedPosition.y;return this._isPointOnSquare(n,r)?this._pointerStartedOnSquare=!0:this._isPointOnWheel(n,r)&&(this._pointerStartedOnWheel=!0),this._updateValueFromPointer(n,r),this._host._capturingControl[i]=this,this._lastPointerDownId=i,!0}_onPointerMove(t,e,i,o){if(i==this._lastPointerDownId){if(!this.isReadOnly){this._invertTransformMatrix.transformCoordinates(e.x,e.y,this._transformedPosition);const t=this._transformedPosition.x,i=this._transformedPosition.y;this._pointerIsDown&&this._updateValueFromPointer(t,i)}super._onPointerMove(t,e,i,o)}}_onPointerUp(t,e,i,o,s,n){this._pointerIsDown=!1,delete this._host._capturingControl[i],super._onPointerUp(t,e,i,o,s,n)}_onCanvasBlur(){this._forcePointerUp(),super._onCanvasBlur()}static ShowPickerDialogAsync(t,e){return new Promise(((i,o)=>{e.pickerWidth=e.pickerWidth||"640px",e.pickerHeight=e.pickerHeight||"400px",e.headerHeight=e.headerHeight||"35px",e.lastColor=e.lastColor||"#000000",e.swatchLimit=e.swatchLimit||20,e.numSwatchesPerLine=e.numSwatchesPerLine||10;const s=e.swatchLimit/e.numSwatchesPerLine,r=parseFloat(e.pickerWidth)/e.numSwatchesPerLine,a=Math.floor(.25*r),l=a*(e.numSwatchesPerLine+1),_=Math.floor((parseFloat(e.pickerWidth)-l)/e.numSwatchesPerLine),h=_*s+a*(s+1),c=(parseInt(e.pickerHeight)+h+Math.floor(.25*_)).toString()+"px",d="#c0c0c0",u="#535353",g="#414141",p="515151",b=n.Color3.FromHexString("#dddddd"),y=b.r+b.g+b.b;let B,C,R,S,w;const M=["R","G","B"],O="#454545",E="#f0f0f0";let D,L,F,N,k,A,z,Q,V,H,W,G,U,X,Y=!1;function j(t,e){X=e;const i=t.toHexString();if(G.background=i,k.name!=X&&(k.text=Math.floor(255*t.r).toString()),A.name!=X&&(A.text=Math.floor(255*t.g).toString()),z.name!=X&&(z.text=Math.floor(255*t.b).toString()),Q.name!=X&&(Q.text=t.r.toString()),V.name!=X&&(V.text=t.g.toString()),H.name!=X&&(H.text=t.b.toString()),W.name!=X){const t=i.split("#");W.text=t[1]}N.name!=X&&(N.value=t)}function K(t,e){let i=t.text;if(/[^0-9]/g.test(i))t.text=U;else if(""!=i&&(Math.floor(parseInt(i))<0?i="0":Math.floor(parseInt(i))>255?i="255":isNaN(parseInt(i))&&(i="0")),X==t.name&&(U=i),""!=i){i=parseInt(i).toString(),t.text=i;const o=n.Color3.FromHexString(G.background);X==t.name&&j("r"==e?new n.Color3(parseInt(i)/255,o.g,o.b):"g"==e?new n.Color3(o.r,parseInt(i)/255,o.b):new n.Color3(o.r,o.g,parseInt(i)/255),t.name)}}function Z(t,e){let i=t.text;if(/[^0-9\.]/g.test(i))return void(t.text=U);""!=i&&"."!=i&&0!=parseFloat(i)&&(parseFloat(i)<0?i="0.0":parseFloat(i)>1?i="1.0":isNaN(parseFloat(i))&&(i="0.0")),X==t.name&&(U=i),""!=i&&"."!=i&&0!=parseFloat(i)?(i=parseFloat(i).toString(),t.text=i):i="0.0";const o=n.Color3.FromHexString(G.background);X==t.name&&j("r"==e?new n.Color3(parseFloat(i),o.g,o.b):"g"==e?new n.Color3(o.r,parseFloat(i),o.b):new n.Color3(o.r,o.g,parseFloat(i)),t.name)}function q(){if(e.savedColors&&e.savedColors[L]){if(Y)var t="b";else t="";const i=x.CreateSimpleButton("Swatch_"+L,t);i.fontFamily="coreglyphs";const o=n.Color3.FromHexString(e.savedColors[L]),s=o.r+o.g+o.b;i.color=s>y?"#aaaaaa":"#ffffff",i.fontSize=Math.floor(.7*_),i.textBlock.verticalAlignment=f.VERTICAL_ALIGNMENT_CENTER,i.height=i.width=_.toString()+"px",i.background=e.savedColors[L],i.thickness=2;const r=L;return i.pointerDownAnimation=()=>{i.thickness=4},i.pointerUpAnimation=()=>{i.thickness=3},i.pointerEnterAnimation=()=>{i.thickness=3},i.pointerOutAnimation=()=>{i.thickness=2},i.onPointerClickObservable.add((()=>{var t;Y?(t=r,e.savedColors&&e.savedColors.splice(t,1),e.savedColors&&0==e.savedColors.length&&(tt(!1),Y=!1),J("",Dt)):e.savedColors&&j(n.Color3.FromHexString(e.savedColors[r]),i.name)})),i}return null}function $(t){if(void 0!==t&&(Y=t),Y){for(var e=0;e<F.children.length;e++)F.children[e].textBlock.text="b";void 0!==R&&(R.textBlock.text="Done")}else{for(e=0;e<F.children.length;e++)F.children[e].textBlock.text="";void 0!==R&&(R.textBlock.text="Edit")}}function J(t,i){if(e.savedColors){""!=t&&e.savedColors.push(t),L=0,F.clearControls();const r=Math.ceil(e.savedColors.length/e.numSwatchesPerLine);if(0==r)var o=0;else o=r+1;if(F.rowCount!=r+o){const t=F.rowCount;for(var s=0;s<t;s++)F.removeRowDefinition(0);for(s=0;s<r+o;s++)s%2?F.addRowDefinition(_,!0):F.addRowDefinition(a,!0)}F.height=(_*r+o*a).toString()+"px";for(let t=1,i=1;t<r+o;t+=2,i++){if(e.savedColors.length>i*e.numSwatchesPerLine)var n=e.numSwatchesPerLine;else n=e.savedColors.length-(i-1)*e.numSwatchesPerLine;const o=Math.min(Math.max(n,0),e.numSwatchesPerLine);for(let i=0,s=1;i<o;i++){if(i>e.numSwatchesPerLine)continue;const o=q();null!=o&&(F.addControl(o,t,s),s+=2,L++)}}e.savedColors.length>=e.swatchLimit?et(i,!0):et(i,!1)}}function tt(t){t?(R=x.CreateSimpleButton("butEdit","Edit"),R.width=S,R.height=w,R.left=Math.floor(.1*parseInt(S)).toString()+"px",R.top=(-1*parseFloat(R.left)).toString()+"px",R.verticalAlignment=f.VERTICAL_ALIGNMENT_BOTTOM,R.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,R.thickness=2,R.color=d,R.fontSize=C,R.background=u,R.onPointerEnterObservable.add((()=>{R.background=g})),R.onPointerOutObservable.add((()=>{R.background=u})),R.pointerDownAnimation=()=>{R.background=p},R.pointerUpAnimation=()=>{R.background=g},R.onPointerClickObservable.add((()=>{Y=!Y,$()})),ft.addControl(R,1,0)):ft.removeControl(R)}function et(t,e){e?(t.color="#555555",t.background="#454545"):(t.color=d,t.background=u)}function it(o){e.savedColors&&e.savedColors.length>0?i({savedColors:e.savedColors,pickedColor:o}):i({pickedColor:o}),t.removeControl(ot)}var ot=new P;if(ot.name="Dialog Container",ot.width=e.pickerWidth,e.savedColors){ot.height=c;const t=parseInt(e.pickerHeight)/parseInt(c);ot.addRowDefinition(t,!1),ot.addRowDefinition(1-t,!1)}else ot.height=e.pickerHeight,ot.addRowDefinition(1,!1);if(t.addControl(ot),e.savedColors){F=new P,F.name="Swatch Drawer",F.verticalAlignment=f.VERTICAL_ALIGNMENT_TOP,F.background=u,F.width=e.pickerWidth;const t=e.savedColors.length/e.numSwatchesPerLine;if(0==t)var st=0;else st=t+1;F.height=(_*t+st*a).toString()+"px",F.top=Math.floor(.25*_).toString()+"px";for(var nt=0;nt<2*Math.ceil(e.savedColors.length/e.numSwatchesPerLine)+1;nt++)nt%2!=0?F.addRowDefinition(_,!0):F.addRowDefinition(a,!0);for(nt=0;nt<2*e.numSwatchesPerLine+1;nt++)nt%2!=0?F.addColumnDefinition(_,!0):F.addColumnDefinition(a,!0);ot.addControl(F,1,0)}const rt=new P;rt.name="Picker Panel",rt.height=e.pickerHeight;const at=parseInt(e.headerHeight)/parseInt(e.pickerHeight),lt=[at,1-at];rt.addRowDefinition(lt[0],!1),rt.addRowDefinition(lt[1],!1),ot.addControl(rt,0,0);const _t=new m;_t.name="Dialogue Header Bar",_t.background="#cccccc",_t.thickness=0,rt.addControl(_t,0,0);const ht=x.CreateSimpleButton("closeButton","a");ht.fontFamily="coreglyphs";const ct=n.Color3.FromHexString(_t.background);B=new n.Color3(1-ct.r,1-ct.g,1-ct.b),ht.color=B.toHexString(),ht.fontSize=Math.floor(.6*parseInt(e.headerHeight)),ht.textBlock.textVerticalAlignment=f.VERTICAL_ALIGNMENT_CENTER,ht.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_RIGHT,ht.height=ht.width=e.headerHeight,ht.background=_t.background,ht.thickness=0,ht.pointerDownAnimation=()=>{},ht.pointerUpAnimation=()=>{ht.background=_t.background},ht.pointerEnterAnimation=()=>{ht.color=_t.background,ht.background="red"},ht.pointerOutAnimation=()=>{ht.color=B.toHexString(),ht.background=_t.background},ht.onPointerClickObservable.add((()=>{it(It.background)})),rt.addControl(ht,0,0);const dt=new P;dt.name="Dialogue Body",dt.background=u;const ut=[.4375,.5625];dt.addRowDefinition(1,!1),dt.addColumnDefinition(ut[0],!1),dt.addColumnDefinition(ut[1],!1),rt.addControl(dt,1,0);var ft=new P;ft.name="Picker Grid",ft.addRowDefinition(.85,!1),ft.addRowDefinition(.15,!1),dt.addControl(ft,0,0),N=new I,N.name="GUI Color Picker",e.pickerHeight<e.pickerWidth?N.width=.89:N.height=.89,N.value=n.Color3.FromHexString(e.lastColor),N.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_CENTER,N.verticalAlignment=f.VERTICAL_ALIGNMENT_CENTER,N.onPointerDownObservable.add((()=>{X=N.name,U="",$(!1)})),N.onValueChangedObservable.add((function(t){X==N.name&&j(t,N.name)})),ft.addControl(N,0,0);const gt=new P;gt.name="Dialogue Right Half",gt.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT;const mt=[.514,.486];gt.addRowDefinition(mt[0],!1),gt.addRowDefinition(mt[1],!1),dt.addControl(gt,1,1);const pt=new P;pt.name="Swatches and Buttons";const vt=[.417,.583];pt.addRowDefinition(1,!1),pt.addColumnDefinition(vt[0],!1),pt.addColumnDefinition(vt[1],!1),gt.addControl(pt,0,0);const bt=new P;bt.name="New and Current Swatches";const xt=[.04,.16,.64,.16];bt.addRowDefinition(xt[0],!1),bt.addRowDefinition(xt[1],!1),bt.addRowDefinition(xt[2],!1),bt.addRowDefinition(xt[3],!1),pt.addControl(bt,0,0);const yt=new P;yt.name="Active Swatches",yt.width=.67,yt.addRowDefinition(.5,!1),yt.addRowDefinition(.5,!1),bt.addControl(yt,2,0);const Bt=Math.floor(parseInt(e.pickerWidth)*ut[1]*vt[0]*.11),Ct=Math.floor(parseInt(e.pickerHeight)*lt[1]*mt[0]*xt[1]*.5);if(e.pickerWidth>e.pickerHeight)var Tt=Ct;else Tt=Bt;const Pt=new v;Pt.text="new",Pt.name="New Color Label",Pt.color=d,Pt.fontSize=Tt,bt.addControl(Pt,1,0),G=new m,G.name="New Color Swatch",G.background=e.lastColor,G.thickness=0,yt.addControl(G,0,0);var It=x.CreateSimpleButton("currentSwatch","");It.background=e.lastColor,It.thickness=0,It.onPointerClickObservable.add((()=>{j(n.Color3.FromHexString(It.background),It.name),$(!1)})),It.pointerDownAnimation=()=>{},It.pointerUpAnimation=()=>{},It.pointerEnterAnimation=()=>{},It.pointerOutAnimation=()=>{},yt.addControl(It,1,0);const Rt=new m;Rt.name="Swatch Outline",Rt.width=.67,Rt.thickness=2,Rt.color="#404040",Rt.isHitTestVisible=!1,bt.addControl(Rt,2,0);const St=new v;St.name="Current Color Label",St.text="current",St.color=d,St.fontSize=Tt,bt.addControl(St,3,0);const wt=new P;wt.name="Button Grid",wt.height=.8;const Mt=1/3;wt.addRowDefinition(Mt,!1),wt.addRowDefinition(Mt,!1),wt.addRowDefinition(Mt,!1),pt.addControl(wt,0,1),S=Math.floor(parseInt(e.pickerWidth)*ut[1]*vt[1]*.67).toString()+"px",w=Math.floor(parseInt(e.pickerHeight)*lt[1]*mt[0]*(parseFloat(wt.height.toString())/100)*Mt*.7).toString()+"px",C=parseFloat(S)>parseFloat(w)?Math.floor(.45*parseFloat(w)):Math.floor(.11*parseFloat(S));const Ot=x.CreateSimpleButton("butOK","OK");Ot.width=S,Ot.height=w,Ot.verticalAlignment=f.VERTICAL_ALIGNMENT_CENTER,Ot.thickness=2,Ot.color=d,Ot.fontSize=C,Ot.background=u,Ot.onPointerEnterObservable.add((()=>{Ot.background=g})),Ot.onPointerOutObservable.add((()=>{Ot.background=u})),Ot.pointerDownAnimation=()=>{Ot.background=p},Ot.pointerUpAnimation=()=>{Ot.background=g},Ot.onPointerClickObservable.add((()=>{$(!1),it(G.background)})),wt.addControl(Ot,0,0);const Et=x.CreateSimpleButton("butCancel","Cancel");if(Et.width=S,Et.height=w,Et.verticalAlignment=f.VERTICAL_ALIGNMENT_CENTER,Et.thickness=2,Et.color=d,Et.fontSize=C,Et.background=u,Et.onPointerEnterObservable.add((()=>{Et.background=g})),Et.onPointerOutObservable.add((()=>{Et.background=u})),Et.pointerDownAnimation=()=>{Et.background=p},Et.pointerUpAnimation=()=>{Et.background=g},Et.onPointerClickObservable.add((()=>{$(!1),it(It.background)})),wt.addControl(Et,1,0),e.savedColors){var Dt=x.CreateSimpleButton("butSave","Save");Dt.width=S,Dt.height=w,Dt.verticalAlignment=f.VERTICAL_ALIGNMENT_CENTER,Dt.thickness=2,Dt.fontSize=C,e.savedColors.length<e.swatchLimit?(Dt.color=d,Dt.background=u):et(Dt,!0),Dt.onPointerEnterObservable.add((()=>{e.savedColors&&e.savedColors.length<e.swatchLimit&&(Dt.background=g)})),Dt.onPointerOutObservable.add((()=>{e.savedColors&&e.savedColors.length<e.swatchLimit&&(Dt.background=u)})),Dt.pointerDownAnimation=()=>{e.savedColors&&e.savedColors.length<e.swatchLimit&&(Dt.background=p)},Dt.pointerUpAnimation=()=>{e.savedColors&&e.savedColors.length<e.swatchLimit&&(Dt.background=g)},Dt.onPointerClickObservable.add((()=>{e.savedColors&&(0==e.savedColors.length&&tt(!0),e.savedColors.length<e.swatchLimit&&J(G.background,Dt),$(!1))})),e.savedColors.length>0&&tt(!0),wt.addControl(Dt,2,0)}const Lt=new P;Lt.name="Dialog Lower Right",Lt.addRowDefinition(.02,!1),Lt.addRowDefinition(.63,!1),Lt.addRowDefinition(.21,!1),Lt.addRowDefinition(.14,!1),gt.addControl(Lt,1,0),D=n.Color3.FromHexString(e.lastColor);const Ft=new P;for(Ft.name="RGB Values",Ft.width=.82,Ft.verticalAlignment=f.VERTICAL_ALIGNMENT_CENTER,Ft.addRowDefinition(1/3,!1),Ft.addRowDefinition(1/3,!1),Ft.addRowDefinition(1/3,!1),Ft.addColumnDefinition(.1,!1),Ft.addColumnDefinition(.2,!1),Ft.addColumnDefinition(.7,!1),Lt.addControl(Ft,1,0),nt=0;nt<M.length;nt++)(kt=new v).text=M[nt],kt.color=d,kt.fontSize=C,Ft.addControl(kt,nt,0);k=new T,k.width=.83,k.height=.72,k.name="rIntField",k.fontSize=C,k.text=(255*D.r).toString(),k.color=E,k.background=O,k.onFocusObservable.add((()=>{X=k.name,U=k.text,$(!1)})),k.onBlurObservable.add((()=>{""==k.text&&(k.text="0"),K(k,"r"),X==k.name&&(X="")})),k.onTextChangedObservable.add((()=>{X==k.name&&K(k,"r")})),Ft.addControl(k,0,1),A=new T,A.width=.83,A.height=.72,A.name="gIntField",A.fontSize=C,A.text=(255*D.g).toString(),A.color=E,A.background=O,A.onFocusObservable.add((()=>{X=A.name,U=A.text,$(!1)})),A.onBlurObservable.add((()=>{""==A.text&&(A.text="0"),K(A,"g"),X==A.name&&(X="")})),A.onTextChangedObservable.add((()=>{X==A.name&&K(A,"g")})),Ft.addControl(A,1,1),z=new T,z.width=.83,z.height=.72,z.name="bIntField",z.fontSize=C,z.text=(255*D.b).toString(),z.color=E,z.background=O,z.onFocusObservable.add((()=>{X=z.name,U=z.text,$(!1)})),z.onBlurObservable.add((()=>{""==z.text&&(z.text="0"),K(z,"b"),X==z.name&&(X="")})),z.onTextChangedObservable.add((()=>{X==z.name&&K(z,"b")})),Ft.addControl(z,2,1),Q=new T,Q.width=.95,Q.height=.72,Q.name="rDecField",Q.fontSize=C,Q.text=D.r.toString(),Q.color=E,Q.background=O,Q.onFocusObservable.add((()=>{X=Q.name,U=Q.text,$(!1)})),Q.onBlurObservable.add((()=>{0!=parseFloat(Q.text)&&""!=Q.text||(Q.text="0",Z(Q,"r")),X==Q.name&&(X="")})),Q.onTextChangedObservable.add((()=>{X==Q.name&&Z(Q,"r")})),Ft.addControl(Q,0,2),V=new T,V.width=.95,V.height=.72,V.name="gDecField",V.fontSize=C,V.text=D.g.toString(),V.color=E,V.background=O,V.onFocusObservable.add((()=>{X=V.name,U=V.text,$(!1)})),V.onBlurObservable.add((()=>{0!=parseFloat(V.text)&&""!=V.text||(V.text="0",Z(V,"g")),X==V.name&&(X="")})),V.onTextChangedObservable.add((()=>{X==V.name&&Z(V,"g")})),Ft.addControl(V,1,2),H=new T,H.width=.95,H.height=.72,H.name="bDecField",H.fontSize=C,H.text=D.b.toString(),H.color=E,H.background=O,H.onFocusObservable.add((()=>{X=H.name,U=H.text,$(!1)})),H.onBlurObservable.add((()=>{0!=parseFloat(H.text)&&""!=H.text||(H.text="0",Z(H,"b")),X==H.name&&(X="")})),H.onTextChangedObservable.add((()=>{X==H.name&&Z(H,"b")})),Ft.addControl(H,2,2);const Nt=new P;var kt;Nt.name="Hex Value",Nt.width=.82,Nt.addRowDefinition(1,!1),Nt.addColumnDefinition(.1,!1),Nt.addColumnDefinition(.9,!1),Lt.addControl(Nt,2,0),(kt=new v).text="#",kt.color=d,kt.fontSize=C,Nt.addControl(kt,0,0),W=new T,W.width=.96,W.height=.72,W.name="hexField",W.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_CENTER,W.fontSize=C;const At=e.lastColor.split("#");W.text=At[1],W.color=E,W.background=O,W.onFocusObservable.add((()=>{X=W.name,U=W.text,$(!1)})),W.onBlurObservable.add((()=>{if(3==W.text.length){const t=W.text.split("");W.text=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]}""==W.text&&(W.text="000000",j(n.Color3.FromHexString(W.text),"b")),X==W.name&&(X="")})),W.onTextChangedObservable.add((()=>{let t=W.text;const e=/[^0-9A-F]/i.test(t);if((W.text.length>6||e)&&X==W.name)W.text=U;else{if(W.text.length<6){const e=6-W.text.length;for(let i=0;i<e;i++)t="0"+t}if(3==W.text.length){const e=W.text.split("");t=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]}t="#"+t,X==W.name&&(U=W.text,j(n.Color3.FromHexString(t),W.name))}})),Nt.addControl(W,0,1),e.savedColors&&e.savedColors.length>0&&J("",Dt)}))}}I._Epsilon=1e-6,i([(0,n.serialize)()],I.prototype,"value",null),i([(0,n.serialize)()],I.prototype,"width",null),i([(0,n.serialize)()],I.prototype,"height",null),i([(0,n.serialize)()],I.prototype,"size",null),(0,n.RegisterClass)("BABYLON.GUI.ColorPicker",I);class R extends g{constructor(t){super(t),this.name=t,this._thickness=1}get thickness(){return this._thickness}set thickness(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())}_getTypeName(){return"Ellipse"}_localDraw(t){t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),f.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,this._currentMeasure.width/2-this._thickness/2,this._currentMeasure.height/2-this._thickness/2,t),this._background&&(t.fillStyle=this._background,t.fill()),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this._thickness&&(this.color&&(t.strokeStyle=this.color),t.lineWidth=this._thickness,t.stroke()),t.restore()}_additionalProcessing(t,e){super._additionalProcessing(t,e),this._measureForChildren.width-=2*this._thickness,this._measureForChildren.height-=2*this._thickness,this._measureForChildren.left+=this._thickness,this._measureForChildren.top+=this._thickness}_clipForChildren(t){f.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,this._currentMeasure.width/2,this._currentMeasure.height/2,t),t.clip()}_renderHighlightSpecific(t){f.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,this._currentMeasure.width/2-this._highlightLineWidth/2,this._currentMeasure.height/2-this._highlightLineWidth/2,t),t.stroke()}}i([(0,n.serialize)()],R.prototype,"thickness",null),(0,n.RegisterClass)("BABYLON.GUI.Ellipse",R);class S extends x{constructor(t){super(t),this.name=t,this.focusedColor=null,this._isFocused=!1,this._unfocusedColor=null,this.onFocusObservable=new n.Observable,this.onBlurObservable=new n.Observable,this.onKeyboardEventProcessedObservable=new n.Observable,this._unfocusedColor=this.color}onBlur(){this._isFocused&&(this._isFocused=!1,this.focusedColor&&null!=this._unfocusedColor&&(this.color=this._unfocusedColor),this.onBlurObservable.notifyObservers(this))}onFocus(){this._isFocused=!0,this.focusedColor&&(this._unfocusedColor=this.color,this.color=this.focusedColor),this.onFocusObservable.notifyObservers(this)}keepsFocusWith(){return null}focus(){this._host.moveFocusToControl(this)}blur(){this._host.focusedControl=null}processKeyboard(t){this.onKeyboardEventProcessedObservable.notifyObservers(t,-1,this)}_onPointerDown(t,e,i,o,s){return this.isReadOnly||this.focus(),super._onPointerDown(t,e,i,o,s)}displose(){super.dispose(),this.onBlurObservable.clear(),this.onFocusObservable.clear(),this.onKeyboardEventProcessedObservable.clear()}}(0,n.RegisterClass)("BABYLON.GUI.FocusableButton",S);class w extends T{_beforeRenderText(t){const e=new C;let i="";for(let e=0;e<t.length;e++)i+="";return e.text=i,e}}(0,n.RegisterClass)("BABYLON.GUI.InputPassword",w);class M extends f{constructor(t){super(t),this.name=t,this._lineWidth=1,this._x1=new r(0),this._y1=new r(0),this._x2=new r(0),this._y2=new r(0),this._dash=new Array,this._automaticSize=!0,this.isHitTestVisible=!1,this._horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,this._verticalAlignment=f.VERTICAL_ALIGNMENT_TOP}get dash(){return this._dash}set dash(t){this._dash!==t&&(this._dash=t,this._markAsDirty())}get connectedControl(){return this._connectedControl}set connectedControl(t){this._connectedControl!==t&&(this._connectedControlDirtyObserver&&this._connectedControl&&(this._connectedControl.onDirtyObservable.remove(this._connectedControlDirtyObserver),this._connectedControlDirtyObserver=null),t&&(this._connectedControlDirtyObserver=t.onDirtyObservable.add((()=>this._markAsDirty()))),this._connectedControl=t,this._markAsDirty())}get x1(){return this._x1.toString(this._host)}set x1(t){this._x1.toString(this._host)!==t&&this._x1.fromString(t)&&this._markAsDirty()}get y1(){return this._y1.toString(this._host)}set y1(t){this._y1.toString(this._host)!==t&&this._y1.fromString(t)&&this._markAsDirty()}get x2(){return this._x2.toString(this._host)}set x2(t){this._x2.toString(this._host)!==t&&this._x2.fromString(t)&&this._markAsDirty()}get y2(){return this._y2.toString(this._host)}set y2(t){this._y2.toString(this._host)!==t&&this._y2.fromString(t)&&this._markAsDirty()}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth!==t&&(this._lineWidth=t,this._markAsDirty())}set horizontalAlignment(t){}set verticalAlignment(t){}get _effectiveX2(){return(this._connectedControl?this._connectedControl.centerX:0)+this._x2.getValue(this._host)}get _effectiveY2(){return(this._connectedControl?this._connectedControl.centerY:0)+this._y2.getValue(this._host)}_getTypeName(){return"Line"}_draw(t){t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._applyStates(t),t.strokeStyle=this.color,t.lineWidth=this._lineWidth,t.setLineDash(this._dash),t.beginPath(),t.moveTo(this._cachedParentMeasure.left+this._x1.getValue(this._host),this._cachedParentMeasure.top+this._y1.getValue(this._host)),t.lineTo(this._cachedParentMeasure.left+this._effectiveX2,this._cachedParentMeasure.top+this._effectiveY2),t.stroke(),t.restore()}_measure(){this._currentMeasure.width=Math.abs(this._x1.getValue(this._host)-this._effectiveX2)+this._lineWidth,this._currentMeasure.height=Math.abs(this._y1.getValue(this._host)-this._effectiveY2)+this._lineWidth}_computeAlignment(t,e){this._currentMeasure.left=t.left+Math.min(this._x1.getValue(this._host),this._effectiveX2)-this._lineWidth/2,this._currentMeasure.top=t.top+Math.min(this._y1.getValue(this._host),this._effectiveY2)-this._lineWidth/2}moveToVector3(t,e,i=!1){if(!this._host||this.parent!==this._host._rootContainer)return void n.Tools.Error("Cannot move a control to a vector3 if the control is not at root level");const o=this._host._getGlobalViewport(),s=n.Vector3.Project(t,n.Matrix.Identity(),e.getTransformMatrix(),o);this._moveToProjectedPosition(s,i),s.z<0||s.z>1?this.notRenderable=!0:this.notRenderable=!1}_moveToProjectedPosition(t,e=!1){const i=t.x+this._linkOffsetX.getValue(this._host)+"px",o=t.y+this._linkOffsetY.getValue(this._host)+"px";e?(this.x2=i,this.y2=o,this._x2.ignoreAdaptiveScaling=!0,this._y2.ignoreAdaptiveScaling=!0):(this.x1=i,this.y1=o,this._x1.ignoreAdaptiveScaling=!0,this._y1.ignoreAdaptiveScaling=!0)}}i([(0,n.serialize)()],M.prototype,"dash",null),i([(0,n.serialize)()],M.prototype,"x1",null),i([(0,n.serialize)()],M.prototype,"y1",null),i([(0,n.serialize)()],M.prototype,"x2",null),i([(0,n.serialize)()],M.prototype,"y2",null),i([(0,n.serialize)()],M.prototype,"lineWidth",null),(0,n.RegisterClass)("BABYLON.GUI.Line",M);class O{constructor(t){this._multiLine=t,this._x=new r(0),this._y=new r(0),this._point=new n.Vector3(0,0,0)}get x(){return this._x.toString(this._multiLine._host)}set x(t){this._x.toString(this._multiLine._host)!==t&&this._x.fromString(t)&&this._multiLine._markAsDirty()}get y(){return this._y.toString(this._multiLine._host)}set y(t){this._y.toString(this._multiLine._host)!==t&&this._y.fromString(t)&&this._multiLine._markAsDirty()}get control(){return this._control}set control(t){this._control!==t&&(this._control&&this._controlObserver&&(this._control.onDirtyObservable.remove(this._controlObserver),this._controlObserver=null),this._control=t,this._control&&(this._controlObserver=this._control.onDirtyObservable.add(this._multiLine.onPointUpdate)),this._multiLine._markAsDirty())}get mesh(){return this._mesh}set mesh(t){this._mesh!==t&&(this._mesh&&this._meshObserver&&this._mesh.getScene().onAfterCameraRenderObservable.remove(this._meshObserver),this._mesh=t,this._mesh&&(this._meshObserver=this._mesh.getScene().onAfterCameraRenderObservable.add(this._multiLine.onPointUpdate)),this._multiLine._markAsDirty())}resetLinks(){this.control=null,this.mesh=null}translate(){return this._point=this._translatePoint(),this._point}_translatePoint(){if(null!=this._mesh)return this._multiLine._host.getProjectedPositionWithZ(this._mesh.getBoundingInfo().boundingSphere.center,this._mesh.getWorldMatrix());if(null!=this._control)return new n.Vector3(this._control.centerX,this._control.centerY,1-n.Epsilon);{const t=this._multiLine._host,e=this._x.getValueInPixel(t,Number(t._canvas.width)),i=this._y.getValueInPixel(t,Number(t._canvas.height));return new n.Vector3(e,i,1-n.Epsilon)}}dispose(){this.resetLinks()}}class E extends f{constructor(t){super(t),this.name=t,this._lineWidth=1,this.onPointUpdate=()=>{this._markAsDirty()},this._automaticSize=!0,this.isHitTestVisible=!1,this._horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,this._verticalAlignment=f.VERTICAL_ALIGNMENT_TOP,this._dash=[],this._points=[]}get dash(){return this._dash}set dash(t){this._dash!==t&&(this._dash=t,this._markAsDirty())}getAt(t){return this._points[t]||(this._points[t]=new O(this)),this._points[t]}add(...t){return t.map((t=>this.push(t)))}push(t){const e=this.getAt(this._points.length);return null==t||(t instanceof n.AbstractMesh?e.mesh=t:t instanceof f?e.control=t:null!=t.x&&null!=t.y&&(e.x=t.x,e.y=t.y)),e}remove(t){let e;if(t instanceof O){if(e=this._points.indexOf(t),-1===e)return}else e=t;const i=this._points[e];i&&(i.dispose(),this._points.splice(e,1))}reset(){for(;this._points.length>0;)this.remove(this._points.length-1)}resetLinks(){this._points.forEach((t=>{null!=t&&t.resetLinks()}))}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth!==t&&(this._lineWidth=t,this._markAsDirty())}set horizontalAlignment(t){}set verticalAlignment(t){}_getTypeName(){return"MultiLine"}_draw(t,e){t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._applyStates(t),t.strokeStyle=this.color,t.lineWidth=this._lineWidth,t.setLineDash(this._dash),t.beginPath();let i,o=!0;this._points.forEach((e=>{e&&(o?(t.moveTo(e._point.x,e._point.y),o=!1):e._point.z<1&&i.z<1?t.lineTo(e._point.x,e._point.y):t.moveTo(e._point.x,e._point.y),i=e._point)})),t.stroke(),t.restore()}_additionalProcessing(t,e){this._minX=null,this._minY=null,this._maxX=null,this._maxY=null,this._points.forEach(((t,e)=>{t&&(t.translate(),(null==this._minX||t._point.x<this._minX)&&(this._minX=t._point.x),(null==this._minY||t._point.y<this._minY)&&(this._minY=t._point.y),(null==this._maxX||t._point.x>this._maxX)&&(this._maxX=t._point.x),(null==this._maxY||t._point.y>this._maxY)&&(this._maxY=t._point.y))})),null==this._minX&&(this._minX=0),null==this._minY&&(this._minY=0),null==this._maxX&&(this._maxX=0),null==this._maxY&&(this._maxY=0)}_measure(){null!=this._minX&&null!=this._maxX&&null!=this._minY&&null!=this._maxY&&(this._currentMeasure.width=Math.abs(this._maxX-this._minX)+this._lineWidth,this._currentMeasure.height=Math.abs(this._maxY-this._minY)+this._lineWidth)}_computeAlignment(t,e){null!=this._minX&&null!=this._minY&&(this._currentMeasure.left=this._minX-this._lineWidth/2,this._currentMeasure.top=this._minY-this._lineWidth/2)}dispose(){this.reset(),super.dispose()}}i([(0,n.serialize)()],E.prototype,"dash",null),(0,n.RegisterClass)("BABYLON.GUI.MultiLine",E);class D extends f{constructor(t){super(t),this.name=t,this._isChecked=!1,this._background="black",this._checkSizeRatio=.8,this._thickness=1,this.group="",this.onIsCheckedChangedObservable=new n.Observable,this.isPointerBlocker=!0}get thickness(){return this._thickness}set thickness(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())}get checkSizeRatio(){return this._checkSizeRatio}set checkSizeRatio(t){t=Math.max(Math.min(1,t),0),this._checkSizeRatio!==t&&(this._checkSizeRatio=t,this._markAsDirty())}get background(){return this._background}set background(t){this._background!==t&&(this._background=t,this._markAsDirty())}get isChecked(){return this._isChecked}set isChecked(t){this._isChecked!==t&&(this._isChecked=t,this._markAsDirty(),this.onIsCheckedChangedObservable.notifyObservers(t),this._isChecked&&this._host&&this._host.executeOnAllControls((t=>{if(t===this)return;if(void 0===t.group)return;const e=t;e.group===this.group&&(e.isChecked=!1)})))}_getTypeName(){return"RadioButton"}_draw(t){t.save(),this._applyStates(t);const e=this._currentMeasure.width-this._thickness,i=this._currentMeasure.height-this._thickness;if((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),f.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,this._currentMeasure.width/2-this._thickness/2,this._currentMeasure.height/2-this._thickness/2,t),t.fillStyle=this._isEnabled?this._background:this._disabledColor,t.fill(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.strokeStyle=this.color,t.lineWidth=this._thickness,t.stroke(),this._isChecked){t.fillStyle=this._isEnabled?this.color:this._disabledColor;const o=e*this._checkSizeRatio,s=i*this._checkSizeRatio;f.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,o/2-this._thickness/2,s/2-this._thickness/2,t),t.fill()}t.restore()}_onPointerDown(t,e,i,o,s){return!!super._onPointerDown(t,e,i,o,s)&&(this.isReadOnly||this.isChecked||(this.isChecked=!0),!0)}static AddRadioButtonWithHeader(t,e,i,o){const s=new y;s.isVertical=!1,s.height="30px";const n=new D;n.width="20px",n.height="20px",n.isChecked=i,n.color="green",n.group=e,n.onIsCheckedChangedObservable.add((t=>o(n,t))),s.addControl(n);const r=new v;return r.text=t,r.width="180px",r.paddingLeft="5px",r.textHorizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,r.color="white",s.addControl(r),s}}i([(0,n.serialize)()],D.prototype,"thickness",null),i([(0,n.serialize)()],D.prototype,"group",void 0),i([(0,n.serialize)()],D.prototype,"checkSizeRatio",null),i([(0,n.serialize)()],D.prototype,"background",null),i([(0,n.serialize)()],D.prototype,"isChecked",null),(0,n.RegisterClass)("BABYLON.GUI.RadioButton",D);class L extends f{constructor(t){super(t),this.name=t,this._thumbWidth=new r(20,r.UNITMODE_PIXEL,!1),this._minimum=0,this._maximum=100,this._value=50,this._isVertical=!1,this._barOffset=new r(5,r.UNITMODE_PIXEL,!1),this._isThumbClamped=!1,this._displayThumb=!0,this._step=0,this._lastPointerDownId=-1,this._effectiveBarOffset=0,this.onValueChangedObservable=new n.Observable,this._pointerIsDown=!1,this.isPointerBlocker=!0}get displayThumb(){return this._displayThumb}set displayThumb(t){this._displayThumb!==t&&(this._displayThumb=t,this._markAsDirty())}get step(){return this._step}set step(t){this._step!==t&&(this._step=t,this._markAsDirty())}get barOffset(){return this._barOffset.toString(this._host)}get barOffsetInPixels(){return this._barOffset.getValueInPixel(this._host,this._cachedParentMeasure.width)}set barOffset(t){this._barOffset.toString(this._host)!==t&&this._barOffset.fromString(t)&&this._markAsDirty()}get thumbWidth(){return this._thumbWidth.toString(this._host)}get thumbWidthInPixels(){return this._thumbWidth.getValueInPixel(this._host,this._cachedParentMeasure.width)}set thumbWidth(t){this._thumbWidth.toString(this._host)!==t&&this._thumbWidth.fromString(t)&&this._markAsDirty()}get minimum(){return this._minimum}set minimum(t){this._minimum!==t&&(this._minimum=t,this._markAsDirty(),this.value=Math.max(Math.min(this.value,this._maximum),this._minimum))}get maximum(){return this._maximum}set maximum(t){this._maximum!==t&&(this._maximum=t,this._markAsDirty(),this.value=Math.max(Math.min(this.value,this._maximum),this._minimum))}get value(){return this._value}set value(t){t=Math.max(Math.min(t,this._maximum),this._minimum),this._value!==t&&(this._value=t,this._markAsDirty(),this.onValueChangedObservable.notifyObservers(this._value))}get isVertical(){return this._isVertical}set isVertical(t){this._isVertical!==t&&(this._isVertical=t,this._markAsDirty())}get isThumbClamped(){return this._isThumbClamped}set isThumbClamped(t){this._isThumbClamped!==t&&(this._isThumbClamped=t,this._markAsDirty())}_getTypeName(){return"BaseSlider"}_getThumbPosition(){return this.isVertical?(this.maximum-this.value)/(this.maximum-this.minimum)*this._backgroundBoxLength:(this.value-this.minimum)/(this.maximum-this.minimum)*this._backgroundBoxLength}_getThumbThickness(t){let e=0;switch(t){case"circle":e=this._thumbWidth.isPixel?Math.max(this._thumbWidth.getValue(this._host),this._backgroundBoxThickness):this._backgroundBoxThickness*this._thumbWidth.getValue(this._host);break;case"rectangle":e=this._thumbWidth.isPixel?Math.min(this._thumbWidth.getValue(this._host),this._backgroundBoxThickness):this._backgroundBoxThickness*this._thumbWidth.getValue(this._host)}return e}_prepareRenderingData(t){this._effectiveBarOffset=0,this._renderLeft=this._currentMeasure.left,this._renderTop=this._currentMeasure.top,this._renderWidth=this._currentMeasure.width,this._renderHeight=this._currentMeasure.height,this._backgroundBoxLength=Math.max(this._currentMeasure.width,this._currentMeasure.height),this._backgroundBoxThickness=Math.min(this._currentMeasure.width,this._currentMeasure.height),this._effectiveThumbThickness=this._getThumbThickness(t),this.displayThumb&&(this._backgroundBoxLength-=this._effectiveThumbThickness),this.isVertical&&this._currentMeasure.height<this._currentMeasure.width?console.error("Height should be greater than width"):(this._barOffset.isPixel?this._effectiveBarOffset=Math.min(this._barOffset.getValue(this._host),this._backgroundBoxThickness):this._effectiveBarOffset=this._backgroundBoxThickness*this._barOffset.getValue(this._host),this._backgroundBoxThickness-=2*this._effectiveBarOffset,this.isVertical?(this._renderLeft+=this._effectiveBarOffset,!this.isThumbClamped&&this.displayThumb&&(this._renderTop+=this._effectiveThumbThickness/2),this._renderHeight=this._backgroundBoxLength,this._renderWidth=this._backgroundBoxThickness):(this._renderTop+=this._effectiveBarOffset,!this.isThumbClamped&&this.displayThumb&&(this._renderLeft+=this._effectiveThumbThickness/2),this._renderHeight=this._backgroundBoxThickness,this._renderWidth=this._backgroundBoxLength))}_updateValueFromPointer(t,e){let i;0!=this.rotation&&(this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y),i=this._isVertical?this._minimum+(1-(e-this._currentMeasure.top)/this._currentMeasure.height)*(this._maximum-this._minimum):this._minimum+(t-this._currentMeasure.left)/this._currentMeasure.width*(this._maximum-this._minimum),this.value=this._step?Math.round(i/this._step)*this._step:i}_onPointerDown(t,e,i,o,s){return!!super._onPointerDown(t,e,i,o,s)&&(this.isReadOnly||(this._pointerIsDown=!0,this._updateValueFromPointer(e.x,e.y),this._host._capturingControl[i]=this,this._lastPointerDownId=i),!0)}_onPointerMove(t,e,i,o){i==this._lastPointerDownId&&(this._pointerIsDown&&!this.isReadOnly&&this._updateValueFromPointer(e.x,e.y),super._onPointerMove(t,e,i,o))}_onPointerUp(t,e,i,o,s){this._pointerIsDown=!1,delete this._host._capturingControl[i],super._onPointerUp(t,e,i,o,s)}_onCanvasBlur(){this._forcePointerUp(),super._onCanvasBlur()}}i([(0,n.serialize)()],L.prototype,"displayThumb",null),i([(0,n.serialize)()],L.prototype,"step",null),i([(0,n.serialize)()],L.prototype,"barOffset",null),i([(0,n.serialize)()],L.prototype,"thumbWidth",null),i([(0,n.serialize)()],L.prototype,"minimum",null),i([(0,n.serialize)()],L.prototype,"maximum",null),i([(0,n.serialize)()],L.prototype,"value",null),i([(0,n.serialize)()],L.prototype,"isVertical",null),i([(0,n.serialize)()],L.prototype,"isThumbClamped",null);class F extends L{constructor(t){super(t),this.name=t,this._background="black",this._borderColor="white",this._thumbColor="",this._isThumbCircle=!1,this._displayValueBar=!0}get displayValueBar(){return this._displayValueBar}set displayValueBar(t){this._displayValueBar!==t&&(this._displayValueBar=t,this._markAsDirty())}get borderColor(){return this._borderColor}set borderColor(t){this._borderColor!==t&&(this._borderColor=t,this._markAsDirty())}get background(){return this._background}set background(t){this._background!==t&&(this._background=t,this._markAsDirty())}get thumbColor(){return this._thumbColor}set thumbColor(t){this._thumbColor!==t&&(this._thumbColor=t,this._markAsDirty())}get isThumbCircle(){return this._isThumbCircle}set isThumbCircle(t){this._isThumbCircle!==t&&(this._isThumbCircle=t,this._markAsDirty())}_getTypeName(){return"Slider"}_draw(t,e){t.save(),this._applyStates(t),this._prepareRenderingData(this.isThumbCircle?"circle":"rectangle");let i=this._renderLeft,o=this._renderTop;const s=this._renderWidth,n=this._renderHeight;let r=0;this.isThumbClamped&&this.isThumbCircle?(this.isVertical?o+=this._effectiveThumbThickness/2:i+=this._effectiveThumbThickness/2,r=this._backgroundBoxThickness/2):r=(this._effectiveThumbThickness-this._effectiveBarOffset)/2,(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY);const a=this._getThumbPosition();t.fillStyle=this._background,this.isVertical?this.isThumbClamped?this.isThumbCircle?(t.beginPath(),t.arc(i+this._backgroundBoxThickness/2,o,r,Math.PI,2*Math.PI),t.fill(),t.fillRect(i,o,s,n)):t.fillRect(i,o,s,n+this._effectiveThumbThickness):t.fillRect(i,o,s,n):this.isThumbClamped?this.isThumbCircle?(t.beginPath(),t.arc(i+this._backgroundBoxLength,o+this._backgroundBoxThickness/2,r,0,2*Math.PI),t.fill(),t.fillRect(i,o,s,n)):t.fillRect(i,o,s+this._effectiveThumbThickness,n):t.fillRect(i,o,s,n),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.fillStyle=this.color,this._displayValueBar&&(this.isVertical?this.isThumbClamped?this.isThumbCircle?(t.beginPath(),t.arc(i+this._backgroundBoxThickness/2,o+this._backgroundBoxLength,r,0,2*Math.PI),t.fill(),t.fillRect(i,o+a,s,n-a)):t.fillRect(i,o+a,s,n-a+this._effectiveThumbThickness):t.fillRect(i,o+a,s,n-a):this.isThumbClamped&&this.isThumbCircle?(t.beginPath(),t.arc(i,o+this._backgroundBoxThickness/2,r,0,2*Math.PI),t.fill(),t.fillRect(i,o,a,n)):t.fillRect(i,o,a,n)),t.fillStyle=this._thumbColor||this.color,this.displayThumb&&((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._isThumbCircle?(t.beginPath(),this.isVertical?t.arc(i+this._backgroundBoxThickness/2,o+a,r,0,2*Math.PI):t.arc(i+a,o+this._backgroundBoxThickness/2,r,0,2*Math.PI),t.fill(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.strokeStyle=this._borderColor,t.stroke()):(this.isVertical?t.fillRect(i-this._effectiveBarOffset,this._currentMeasure.top+a,this._currentMeasure.width,this._effectiveThumbThickness):t.fillRect(this._currentMeasure.left+a,this._currentMeasure.top,this._effectiveThumbThickness,this._currentMeasure.height),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.strokeStyle=this._borderColor,this.isVertical?t.strokeRect(i-this._effectiveBarOffset,this._currentMeasure.top+a,this._currentMeasure.width,this._effectiveThumbThickness):t.strokeRect(this._currentMeasure.left+a,this._currentMeasure.top,this._effectiveThumbThickness,this._currentMeasure.height))),t.restore()}}i([(0,n.serialize)()],F.prototype,"displayValueBar",null),i([(0,n.serialize)()],F.prototype,"borderColor",null),i([(0,n.serialize)()],F.prototype,"background",null),i([(0,n.serialize)()],F.prototype,"thumbColor",null),i([(0,n.serialize)()],F.prototype,"isThumbCircle",null),(0,n.RegisterClass)("BABYLON.GUI.Slider",F);class N{constructor(t){this.name=t,this._groupPanel=new y,this._selectors=new Array,this._groupPanel.verticalAlignment=f.VERTICAL_ALIGNMENT_TOP,this._groupPanel.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,this._groupHeader=this._addGroupHeader(t)}get groupPanel(){return this._groupPanel}get selectors(){return this._selectors}get header(){return this._groupHeader.text}set header(t){"label"!==this._groupHeader.text&&(this._groupHeader.text=t)}_addGroupHeader(t){const e=new v("groupHead",t);return e.width=.9,e.height="30px",e.textWrapping=!0,e.color="black",e.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,e.textHorizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,e.left="2px",this._groupPanel.addControl(e),e}_getSelector(t){if(!(t<0||t>=this._selectors.length))return this._selectors[t]}removeSelector(t){t<0||t>=this._selectors.length||(this._groupPanel.removeControl(this._selectors[t]),this._selectors.splice(t,1))}}class k extends N{addCheckbox(t,e=(t=>{}),i=!1){i=i||!1;const o=new B;o.width="20px",o.height="20px",o.color="#364249",o.background="#CCCCCC",o.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,o.onIsCheckedChangedObservable.add((function(t){e(t)}));const s=f.AddHeader(o,t,"200px",{isHorizontal:!0,controlFirst:!0});s.height="30px",s.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,s.left="4px",this.groupPanel.addControl(s),this.selectors.push(s),o.isChecked=i,this.groupPanel.parent&&this.groupPanel.parent.parent&&(o.color=this.groupPanel.parent.parent.buttonColor,o.background=this.groupPanel.parent.parent.buttonBackground)}_setSelectorLabel(t,e){this.selectors[t].children[1].text=e}_setSelectorLabelColor(t,e){this.selectors[t].children[1].color=e}_setSelectorButtonColor(t,e){this.selectors[t].children[0].color=e}_setSelectorButtonBackground(t,e){this.selectors[t].children[0].background=e}}class A extends N{constructor(){super(...arguments),this._selectNb=0}addRadio(t,e=(t=>{}),i=!1){const o=this._selectNb++,s=new D;s.name=t,s.width="20px",s.height="20px",s.color="#364249",s.background="#CCCCCC",s.group=this.name,s.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,s.onIsCheckedChangedObservable.add((function(t){t&&e(o)}));const n=f.AddHeader(s,t,"200px",{isHorizontal:!0,controlFirst:!0});n.height="30px",n.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,n.left="4px",this.groupPanel.addControl(n),this.selectors.push(n),s.isChecked=i,this.groupPanel.parent&&this.groupPanel.parent.parent&&(s.color=this.groupPanel.parent.parent.buttonColor,s.background=this.groupPanel.parent.parent.buttonBackground)}_setSelectorLabel(t,e){this.selectors[t].children[1].text=e}_setSelectorLabelColor(t,e){this.selectors[t].children[1].color=e}_setSelectorButtonColor(t,e){this.selectors[t].children[0].color=e}_setSelectorButtonBackground(t,e){this.selectors[t].children[0].background=e}}class z extends N{addSlider(t,e=(t=>{}),i="Units",o=0,s=0,n=0,r=(t=>0|t)){const a=new F;a.name=i,a.value=n,a.minimum=o,a.maximum=s,a.width=.9,a.height="20px",a.color="#364249",a.background="#CCCCCC",a.borderColor="black",a.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,a.left="4px",a.paddingBottom="4px",a.onValueChangedObservable.add((function(t){a.parent.children[0].text=a.parent.children[0].name+": "+r(t)+" "+a.name,e(t)}));const l=f.AddHeader(a,t+": "+r(n)+" "+i,"30px",{isHorizontal:!1,controlFirst:!1});l.height="60px",l.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,l.left="4px",l.children[0].name=t,this.groupPanel.addControl(l),this.selectors.push(l),this.groupPanel.parent&&this.groupPanel.parent.parent&&(a.color=this.groupPanel.parent.parent.buttonColor,a.background=this.groupPanel.parent.parent.buttonBackground)}_setSelectorLabel(t,e){this.selectors[t].children[0].name=e,this.selectors[t].children[0].text=e+": "+this.selectors[t].children[1].value+" "+this.selectors[t].children[1].name}_setSelectorLabelColor(t,e){this.selectors[t].children[0].color=e}_setSelectorButtonColor(t,e){this.selectors[t].children[1].color=e}_setSelectorButtonBackground(t,e){this.selectors[t].children[1].background=e}}class Q extends m{constructor(t,e=[]){if(super(t),this.name=t,this.groups=e,this._buttonColor="#364249",this._buttonBackground="#CCCCCC",this._headerColor="black",this._barColor="white",this._barHeight="2px",this._spacerHeight="20px",this._bars=new Array,this._groups=e,this.thickness=2,this._panel=new y,this._panel.verticalAlignment=f.VERTICAL_ALIGNMENT_TOP,this._panel.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,this._panel.top=5,this._panel.left=5,this._panel.width=.95,e.length>0){for(let t=0;t<e.length-1;t++)this._panel.addControl(e[t].groupPanel),this._addSpacer();this._panel.addControl(e[e.length-1].groupPanel)}this.addControl(this._panel)}_getTypeName(){return"SelectionPanel"}get panel(){return this._panel}get headerColor(){return this._headerColor}set headerColor(t){this._headerColor!==t&&(this._headerColor=t,this._setHeaderColor())}_setHeaderColor(){for(let t=0;t<this._groups.length;t++)this._groups[t].groupPanel.children[0].color=this._headerColor}get buttonColor(){return this._buttonColor}set buttonColor(t){this._buttonColor!==t&&(this._buttonColor=t,this._setbuttonColor())}_setbuttonColor(){for(let t=0;t<this._groups.length;t++)for(let e=0;e<this._groups[t].selectors.length;e++)this._groups[t]._setSelectorButtonColor(e,this._buttonColor)}get labelColor(){return this._labelColor}set labelColor(t){this._labelColor!==t&&(this._labelColor=t,this._setLabelColor())}_setLabelColor(){for(let t=0;t<this._groups.length;t++)for(let e=0;e<this._groups[t].selectors.length;e++)this._groups[t]._setSelectorLabelColor(e,this._labelColor)}get buttonBackground(){return this._buttonBackground}set buttonBackground(t){this._buttonBackground!==t&&(this._buttonBackground=t,this._setButtonBackground())}_setButtonBackground(){for(let t=0;t<this._groups.length;t++)for(let e=0;e<this._groups[t].selectors.length;e++)this._groups[t]._setSelectorButtonBackground(e,this._buttonBackground)}get barColor(){return this._barColor}set barColor(t){this._barColor!==t&&(this._barColor=t,this._setBarColor())}_setBarColor(){for(let t=0;t<this._bars.length;t++)this._bars[t].children[0].background=this._barColor}get barHeight(){return this._barHeight}set barHeight(t){this._barHeight!==t&&(this._barHeight=t,this._setBarHeight())}_setBarHeight(){for(let t=0;t<this._bars.length;t++)this._bars[t].children[0].height=this._barHeight}get spacerHeight(){return this._spacerHeight}set spacerHeight(t){this._spacerHeight!==t&&(this._spacerHeight=t,this._setSpacerHeight())}_setSpacerHeight(){for(let t=0;t<this._bars.length;t++)this._bars[t].height=this._spacerHeight}_addSpacer(){const t=new g;t.width=1,t.height=this._spacerHeight,t.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT;const e=new m;e.width=1,e.height=this._barHeight,e.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,e.verticalAlignment=f.VERTICAL_ALIGNMENT_CENTER,e.background=this._barColor,e.color="transparent",t.addControl(e),this._panel.addControl(t),this._bars.push(t)}addGroup(t){this._groups.length>0&&this._addSpacer(),this._panel.addControl(t.groupPanel),this._groups.push(t),t.groupPanel.children[0].color=this._headerColor;for(let e=0;e<t.selectors.length;e++)t._setSelectorButtonColor(e,this._buttonColor),t._setSelectorButtonBackground(e,this._buttonBackground)}removeGroup(t){if(t<0||t>=this._groups.length)return;const e=this._groups[t];this._panel.removeControl(e.groupPanel),this._groups.splice(t,1),t<this._bars.length&&(this._panel.removeControl(this._bars[t]),this._bars.splice(t,1))}setHeaderName(t,e){e<0||e>=this._groups.length||(this._groups[e].groupPanel.children[0].text=t)}relabel(t,e,i){if(e<0||e>=this._groups.length)return;const o=this._groups[e];i<0||i>=o.selectors.length||o._setSelectorLabel(i,t)}removeFromGroupSelector(t,e){if(t<0||t>=this._groups.length)return;const i=this._groups[t];e<0||e>=i.selectors.length||i.removeSelector(e)}addToGroupCheckbox(t,e,i=(()=>{}),o=!1){t<0||t>=this._groups.length||this._groups[t].addCheckbox(e,i,o)}addToGroupRadio(t,e,i=(()=>{}),o=!1){t<0||t>=this._groups.length||this._groups[t].addRadio(e,i,o)}addToGroupSlider(t,e,i=(()=>{}),o="Units",s=0,n=0,r=0,a=(t=>0|t)){t<0||t>=this._groups.length||this._groups[t].addSlider(e,i,o,s,n,r,a)}}class V extends g{constructor(t){super(t),this._freezeControls=!1,this._bucketWidth=0,this._bucketHeight=0,this._buckets={}}get freezeControls(){return this._freezeControls}set freezeControls(t){if(this._freezeControls===t)return;t||this._restoreMeasures(),this._freezeControls=!1;const e=this.host.getSize(),i=e.width,o=e.height,s=this.host.getContext(),n=new c(0,0,i,o);this.host._numLayoutCalls=0,this.host._rootContainer._layout(n,s),t&&(this._updateMeasures(),this._useBuckets()&&this._makeBuckets()),this._freezeControls=t,this.host.markAsDirty()}get bucketWidth(){return this._bucketWidth}get bucketHeight(){return this._bucketHeight}setBucketSizes(t,e){this._bucketWidth=t,this._bucketHeight=e,this._useBuckets()?this._freezeControls&&this._makeBuckets():this._buckets={}}_useBuckets(){return this._bucketWidth>0&&this._bucketHeight>0}_makeBuckets(){this._buckets={},this._bucketLen=Math.ceil(this.widthInPixels/this._bucketWidth),this._dispatchInBuckets(this._children),this._oldLeft=null,this._oldTop=null}_dispatchInBuckets(t){for(let e=0;e<t.length;++e){const i=t[e];let o=Math.max(0,Math.floor((i._customData._origLeft-this._customData.origLeft)/this._bucketWidth)),s=Math.floor((i._customData._origLeft-this._customData.origLeft+i._currentMeasure.width-1)/this._bucketWidth),n=Math.max(0,Math.floor((i._customData._origTop-this._customData.origTop)/this._bucketHeight)),r=Math.floor((i._customData._origTop-this._customData.origTop+i._currentMeasure.height-1)/this._bucketHeight);for(;n<=r;){for(let t=o;t<=s;++t){let e=n*this._bucketLen+t,o=this._buckets[e];o||(o=[],this._buckets[e]=o),o.push(i)}n++}i instanceof g&&i._children.length>0&&this._dispatchInBuckets(i._children)}}_updateMeasures(){const t=0|this.leftInPixels,e=0|this.topInPixels;this._measureForChildren.left-=t,this._measureForChildren.top-=e,this._currentMeasure.left-=t,this._currentMeasure.top-=e,this._customData.origLeftForChildren=this._measureForChildren.left,this._customData.origTopForChildren=this._measureForChildren.top,this._customData.origLeft=this._currentMeasure.left,this._customData.origTop=this._currentMeasure.top,this._updateChildrenMeasures(this._children,t,e)}_updateChildrenMeasures(t,e,i){for(let o=0;o<t.length;++o){const s=t[o];s._currentMeasure.left-=e,s._currentMeasure.top-=i,s._customData._origLeft=s._currentMeasure.left,s._customData._origTop=s._currentMeasure.top,s instanceof g&&s._children.length>0&&this._updateChildrenMeasures(s._children,e,i)}}_restoreMeasures(){const t=0|this.leftInPixels,e=0|this.topInPixels;this._measureForChildren.left=this._customData.origLeftForChildren+t,this._measureForChildren.top=this._customData.origTopForChildren+e,this._currentMeasure.left=this._customData.origLeft+t,this._currentMeasure.top=this._customData.origTop+e}_getTypeName(){return"ScrollViewerWindow"}_additionalProcessing(t,e){super._additionalProcessing(t,e),this._parentMeasure=t,this._measureForChildren.left=this._currentMeasure.left,this._measureForChildren.top=this._currentMeasure.top,this._measureForChildren.width=t.width,this._measureForChildren.height=t.height}_layout(t,e){return this._freezeControls?(this.invalidateRect(),!1):super._layout(t,e)}_scrollChildren(t,e,i){for(let o=0;o<t.length;++o){const s=t[o];s._currentMeasure.left=s._customData._origLeft+e,s._currentMeasure.top=s._customData._origTop+i,s._isClipped=!1,s instanceof g&&s._children.length>0&&this._scrollChildren(s._children,e,i)}}_scrollChildrenWithBuckets(t,e,i,o){let s=Math.max(0,Math.floor(-t/this._bucketWidth)),n=Math.floor((-t+this._parentMeasure.width-1)/this._bucketWidth),r=Math.max(0,Math.floor(-e/this._bucketHeight)),a=Math.floor((-e+this._parentMeasure.height-1)/this._bucketHeight);for(;r<=a;){for(let t=s;t<=n;++t){const e=r*this._bucketLen+t,s=this._buckets[e];if(s)for(let t=0;t<s.length;++t){const e=s[t];e._currentMeasure.left=e._customData._origLeft+i,e._currentMeasure.top=e._customData._origTop+o,e._isClipped=!1}}r++}}_draw(t,e){if(!this._freezeControls)return void super._draw(t,e);this._localDraw(t),this.clipChildren&&this._clipForChildren(t);const i=0|this.leftInPixels,o=0|this.topInPixels;this._useBuckets()&&null!==this._oldLeft&&null!==this._oldTop?(this._scrollChildrenWithBuckets(this._oldLeft,this._oldTop,i,o),this._scrollChildrenWithBuckets(i,o,i,o)):this._scrollChildren(this._children,i,o),this._oldLeft=i,this._oldTop=o;for(const e of this._children)e._intersectsRect(this._parentMeasure)&&e._render(t,this._parentMeasure)}_postMeasure(){if(this._freezeControls)return void super._postMeasure();let t=this.parentClientWidth,e=this.parentClientHeight;for(const i of this.children)i.isVisible&&!i.notRenderable&&(i.horizontalAlignment===f.HORIZONTAL_ALIGNMENT_CENTER&&i._offsetLeft(this._currentMeasure.left-i._currentMeasure.left),i.verticalAlignment===f.VERTICAL_ALIGNMENT_CENTER&&i._offsetTop(this._currentMeasure.top-i._currentMeasure.top),t=Math.max(t,i._currentMeasure.left-this._currentMeasure.left+i._currentMeasure.width+i.paddingRightInPixels),e=Math.max(e,i._currentMeasure.top-this._currentMeasure.top+i._currentMeasure.height+i.paddingBottomInPixels));this._currentMeasure.width!==t&&(this._width.updateInPlace(t,r.UNITMODE_PIXEL),this._currentMeasure.width=t,this._rebuildLayout=!0,this._isDirty=!0),this._currentMeasure.height!==e&&(this._height.updateInPlace(e,r.UNITMODE_PIXEL),this._currentMeasure.height=e,this._rebuildLayout=!0,this._isDirty=!0),super._postMeasure()}}class H extends L{constructor(t){super(t),this.name=t,this._background="black",this._borderColor="white",this._tempMeasure=new c(0,0,0,0)}get borderColor(){return this._borderColor}set borderColor(t){this._borderColor!==t&&(this._borderColor=t,this._markAsDirty())}get background(){return this._background}set background(t){this._background!==t&&(this._background=t,this._markAsDirty())}_getTypeName(){return"Scrollbar"}_getThumbThickness(){let t=0;return t=this._thumbWidth.isPixel?this._thumbWidth.getValue(this._host):this._backgroundBoxThickness*this._thumbWidth.getValue(this._host),t}_draw(t){t.save(),this._applyStates(t),this._prepareRenderingData("rectangle");const e=this._renderLeft,i=this._getThumbPosition();t.fillStyle=this._background,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height),t.fillStyle=this.color,this.isVertical?(this._tempMeasure.left=e-this._effectiveBarOffset,this._tempMeasure.top=this._currentMeasure.top+i,this._tempMeasure.width=this._currentMeasure.width,this._tempMeasure.height=this._effectiveThumbThickness):(this._tempMeasure.left=this._currentMeasure.left+i,this._tempMeasure.top=this._currentMeasure.top,this._tempMeasure.width=this._effectiveThumbThickness,this._tempMeasure.height=this._currentMeasure.height),t.fillRect(this._tempMeasure.left,this._tempMeasure.top,this._tempMeasure.width,this._tempMeasure.height),t.restore()}_updateValueFromPointer(t,e){0!=this.rotation&&(this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y),this._first&&(this._first=!1,this._originX=t,this._originY=e,(t<this._tempMeasure.left||t>this._tempMeasure.left+this._tempMeasure.width||e<this._tempMeasure.top||e>this._tempMeasure.top+this._tempMeasure.height)&&(this.isVertical?this.value=this.minimum+(1-(e-this._currentMeasure.top)/this._currentMeasure.height)*(this.maximum-this.minimum):this.value=this.minimum+(t-this._currentMeasure.left)/this._currentMeasure.width*(this.maximum-this.minimum)));let i=0;i=this.isVertical?-(e-this._originY)/(this._currentMeasure.height-this._effectiveThumbThickness):(t-this._originX)/(this._currentMeasure.width-this._effectiveThumbThickness),this.value+=i*(this.maximum-this.minimum),this._originX=t,this._originY=e}_onPointerDown(t,e,i,o,s){return this._first=!0,super._onPointerDown(t,e,i,o,s)}}i([(0,n.serialize)()],H.prototype,"borderColor",null),i([(0,n.serialize)()],H.prototype,"background",null);class W extends L{constructor(t){super(t),this.name=t,this._thumbLength=.5,this._thumbHeight=1,this._barImageHeight=1,this._tempMeasure=new c(0,0,0,0),this.num90RotationInVerticalMode=1}get backgroundImage(){return this._backgroundBaseImage}set backgroundImage(t){this._backgroundBaseImage!==t&&(this._backgroundBaseImage=t,this.isVertical&&0!==this.num90RotationInVerticalMode?t.isLoaded?(this._backgroundImage=t._rotate90(this.num90RotationInVerticalMode,!0),this._markAsDirty()):t.onImageLoadedObservable.addOnce((()=>{const e=t._rotate90(this.num90RotationInVerticalMode,!0);this._backgroundImage=e,e.isLoaded||e.onImageLoadedObservable.addOnce((()=>{this._markAsDirty()})),this._markAsDirty()})):(this._backgroundImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce((()=>{this._markAsDirty()})),this._markAsDirty()))}get thumbImage(){return this._thumbBaseImage}set thumbImage(t){this._thumbBaseImage!==t&&(this._thumbBaseImage=t,this.isVertical&&0!==this.num90RotationInVerticalMode?t.isLoaded?(this._thumbImage=t._rotate90(-this.num90RotationInVerticalMode,!0),this._markAsDirty()):t.onImageLoadedObservable.addOnce((()=>{const e=t._rotate90(-this.num90RotationInVerticalMode,!0);this._thumbImage=e,e.isLoaded||e.onImageLoadedObservable.addOnce((()=>{this._markAsDirty()})),this._markAsDirty()})):(this._thumbImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce((()=>{this._markAsDirty()})),this._markAsDirty()))}get thumbLength(){return this._thumbLength}set thumbLength(t){this._thumbLength!==t&&(this._thumbLength=t,this._markAsDirty())}get thumbHeight(){return this._thumbHeight}set thumbHeight(t){this._thumbLength!==t&&(this._thumbHeight=t,this._markAsDirty())}get barImageHeight(){return this._barImageHeight}set barImageHeight(t){this._barImageHeight!==t&&(this._barImageHeight=t,this._markAsDirty())}_getTypeName(){return"ImageScrollBar"}_getThumbThickness(){let t=0;return t=this._thumbWidth.isPixel?this._thumbWidth.getValue(this._host):this._backgroundBoxThickness*this._thumbWidth.getValue(this._host),t}_draw(t){t.save(),this._applyStates(t),this._prepareRenderingData("rectangle");const e=this._getThumbPosition(),i=this._renderLeft,o=this._renderTop,s=this._renderWidth,n=this._renderHeight;this._backgroundImage&&(this._tempMeasure.copyFromFloats(i,o,s,n),this.isVertical?(this._tempMeasure.copyFromFloats(i+s*(1-this._barImageHeight)*.5,this._currentMeasure.top,s*this._barImageHeight,n),this._tempMeasure.height+=this._effectiveThumbThickness,this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure)):(this._tempMeasure.copyFromFloats(this._currentMeasure.left,o+n*(1-this._barImageHeight)*.5,s,n*this._barImageHeight),this._tempMeasure.width+=this._effectiveThumbThickness,this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure)),this._backgroundImage._draw(t)),this.isVertical?this._tempMeasure.copyFromFloats(i-this._effectiveBarOffset+this._currentMeasure.width*(1-this._thumbHeight)*.5,this._currentMeasure.top+e,this._currentMeasure.width*this._thumbHeight,this._effectiveThumbThickness):this._tempMeasure.copyFromFloats(this._currentMeasure.left+e,this._currentMeasure.top+this._currentMeasure.height*(1-this._thumbHeight)*.5,this._effectiveThumbThickness,this._currentMeasure.height*this._thumbHeight),this._thumbImage&&(this._thumbImage._currentMeasure.copyFrom(this._tempMeasure),this._thumbImage._draw(t)),t.restore()}_updateValueFromPointer(t,e){0!=this.rotation&&(this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y),this._first&&(this._first=!1,this._originX=t,this._originY=e,(t<this._tempMeasure.left||t>this._tempMeasure.left+this._tempMeasure.width||e<this._tempMeasure.top||e>this._tempMeasure.top+this._tempMeasure.height)&&(this.isVertical?this.value=this.minimum+(1-(e-this._currentMeasure.top)/this._currentMeasure.height)*(this.maximum-this.minimum):this.value=this.minimum+(t-this._currentMeasure.left)/this._currentMeasure.width*(this.maximum-this.minimum)));let i=0;i=this.isVertical?-(e-this._originY)/(this._currentMeasure.height-this._effectiveThumbThickness):(t-this._originX)/(this._currentMeasure.width-this._effectiveThumbThickness),this.value+=i*(this.maximum-this.minimum),this._originX=t,this._originY=e}_onPointerDown(t,e,i,o,s){return this._first=!0,super._onPointerDown(t,e,i,o,s)}}i([(0,n.serialize)()],W.prototype,"num90RotationInVerticalMode",void 0);class G extends m{constructor(t,e){super(t),this._barSize=20,this._pointerIsOver=!1,this._wheelPrecision=.05,this._thumbLength=.5,this._thumbHeight=1,this._barImageHeight=1,this._horizontalBarImageHeight=1,this._verticalBarImageHeight=1,this._oldWindowContentsWidth=0,this._oldWindowContentsHeight=0,this._forceHorizontalBar=!1,this._forceVerticalBar=!1,this._useImageBar=e||!1,this.onDirtyObservable.add((()=>{this._horizontalBarSpace.color=this.color,this._verticalBarSpace.color=this.color,this._dragSpace.color=this.color})),this.onPointerEnterObservable.add((()=>{this._pointerIsOver=!0})),this.onPointerOutObservable.add((()=>{this._pointerIsOver=!1})),this._grid=new P,this._useImageBar?(this._horizontalBar=new W,this._verticalBar=new W):(this._horizontalBar=new H,this._verticalBar=new H),this._window=new V("scrollViewer_window"),this._window.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,this._window.verticalAlignment=f.VERTICAL_ALIGNMENT_TOP,this._grid.addColumnDefinition(1),this._grid.addColumnDefinition(0,!0),this._grid.addRowDefinition(1),this._grid.addRowDefinition(0,!0),super.addControl(this._grid),this._grid.addControl(this._window,0,0),this._verticalBarSpace=new m,this._verticalBarSpace.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,this._verticalBarSpace.verticalAlignment=f.VERTICAL_ALIGNMENT_TOP,this._verticalBarSpace.thickness=1,this._grid.addControl(this._verticalBarSpace,0,1),this._addBar(this._verticalBar,this._verticalBarSpace,!0,Math.PI),this._horizontalBarSpace=new m,this._horizontalBarSpace.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,this._horizontalBarSpace.verticalAlignment=f.VERTICAL_ALIGNMENT_TOP,this._horizontalBarSpace.thickness=1,this._grid.addControl(this._horizontalBarSpace,1,0),this._addBar(this._horizontalBar,this._horizontalBarSpace,!1,0),this._dragSpace=new m,this._dragSpace.thickness=1,this._grid.addControl(this._dragSpace,1,1),this._useImageBar||(this.barColor="grey",this.barBackground="transparent")}get horizontalBar(){return this._horizontalBar}get verticalBar(){return this._verticalBar}addControl(t){return t?(this._window.addControl(t),this):this}removeControl(t){return this._window.removeControl(t),this}get children(){return this._window.children}_flagDescendantsAsMatrixDirty(){for(const t of this._children)t._markMatrixAsDirty()}get freezeControls(){return this._window.freezeControls}set freezeControls(t){this._window.freezeControls=t}get bucketWidth(){return this._window.bucketWidth}get bucketHeight(){return this._window.bucketHeight}setBucketSizes(t,e){this._window.setBucketSizes(t,e)}get forceHorizontalBar(){return this._forceHorizontalBar}set forceHorizontalBar(t){this._grid.setRowDefinition(1,t?this._barSize:0,!0),this._horizontalBar.isVisible=t,this._forceHorizontalBar=t}get forceVerticalBar(){return this._forceVerticalBar}set forceVerticalBar(t){this._grid.setColumnDefinition(1,t?this._barSize:0,!0),this._verticalBar.isVisible=t,this._forceVerticalBar=t}resetWindow(){this._window.width="100%",this._window.height="100%"}_getTypeName(){return"ScrollViewer"}_buildClientSizes(){const t=this.host.idealRatio;this._window.parentClientWidth=this._currentMeasure.width-(this._verticalBar.isVisible||this.forceVerticalBar?this._barSize*t:0)-2*this.thickness,this._window.parentClientHeight=this._currentMeasure.height-(this._horizontalBar.isVisible||this.forceHorizontalBar?this._barSize*t:0)-2*this.thickness,this._clientWidth=this._window.parentClientWidth,this._clientHeight=this._window.parentClientHeight}_additionalProcessing(t,e){super._additionalProcessing(t,e),this._buildClientSizes()}_postMeasure(){super._postMeasure(),this._updateScroller(),this._setWindowPosition(!1)}get wheelPrecision(){return this._wheelPrecision}set wheelPrecision(t){this._wheelPrecision!==t&&(t<0&&(t=0),t>1&&(t=1),this._wheelPrecision=t)}get scrollBackground(){return this._horizontalBarSpace.background}set scrollBackground(t){this._horizontalBarSpace.background!==t&&(this._horizontalBarSpace.background=t,this._verticalBarSpace.background=t)}get barColor(){return this._barColor}set barColor(t){this._barColor!==t&&(this._barColor=t,this._horizontalBar.color=t,this._verticalBar.color=t)}get thumbImage(){return this._barImage}set thumbImage(t){if(this._barImage===t)return;this._barImage=t;const e=this._horizontalBar,i=this._verticalBar;e.thumbImage=t,i.thumbImage=t}get horizontalThumbImage(){return this._horizontalBarImage}set horizontalThumbImage(t){this._horizontalBarImage!==t&&(this._horizontalBarImage=t,this._horizontalBar.thumbImage=t)}get verticalThumbImage(){return this._verticalBarImage}set verticalThumbImage(t){this._verticalBarImage!==t&&(this._verticalBarImage=t,this._verticalBar.thumbImage=t)}get barSize(){return this._barSize}set barSize(t){this._barSize!==t&&(this._barSize=t,this._markAsDirty(),this._horizontalBar.isVisible&&this._grid.setRowDefinition(1,this._barSize,!0),this._verticalBar.isVisible&&this._grid.setColumnDefinition(1,this._barSize,!0))}get thumbLength(){return this._thumbLength}set thumbLength(t){if(this._thumbLength===t)return;t<=0&&(t=.1),t>1&&(t=1),this._thumbLength=t;const e=this._horizontalBar,i=this._verticalBar;e.thumbLength=t,i.thumbLength=t,this._markAsDirty()}get thumbHeight(){return this._thumbHeight}set thumbHeight(t){if(this._thumbHeight===t)return;t<=0&&(t=.1),t>1&&(t=1),this._thumbHeight=t;const e=this._horizontalBar,i=this._verticalBar;e.thumbHeight=t,i.thumbHeight=t,this._markAsDirty()}get barImageHeight(){return this._barImageHeight}set barImageHeight(t){if(this._barImageHeight===t)return;t<=0&&(t=.1),t>1&&(t=1),this._barImageHeight=t;const e=this._horizontalBar,i=this._verticalBar;e.barImageHeight=t,i.barImageHeight=t,this._markAsDirty()}get horizontalBarImageHeight(){return this._horizontalBarImageHeight}set horizontalBarImageHeight(t){this._horizontalBarImageHeight!==t&&(t<=0&&(t=.1),t>1&&(t=1),this._horizontalBarImageHeight=t,this._horizontalBar.barImageHeight=t,this._markAsDirty())}get verticalBarImageHeight(){return this._verticalBarImageHeight}set verticalBarImageHeight(t){this._verticalBarImageHeight!==t&&(t<=0&&(t=.1),t>1&&(t=1),this._verticalBarImageHeight=t,this._verticalBar.barImageHeight=t,this._markAsDirty())}get barBackground(){return this._barBackground}set barBackground(t){if(this._barBackground===t)return;this._barBackground=t;const e=this._horizontalBar,i=this._verticalBar;e.background=t,i.background=t,this._dragSpace.background=t}get barImage(){return this._barBackgroundImage}set barImage(t){this._barBackgroundImage,this._barBackgroundImage=t;const e=this._horizontalBar,i=this._verticalBar;e.backgroundImage=t,i.backgroundImage=t}get horizontalBarImage(){return this._horizontalBarBackgroundImage}set horizontalBarImage(t){this._horizontalBarBackgroundImage,this._horizontalBarBackgroundImage=t,this._horizontalBar.backgroundImage=t}get verticalBarImage(){return this._verticalBarBackgroundImage}set verticalBarImage(t){this._verticalBarBackgroundImage,this._verticalBarBackgroundImage=t,this._verticalBar.backgroundImage=t}_setWindowPosition(t=!0){const e=this.host.idealRatio,i=this._window._currentMeasure.width,o=this._window._currentMeasure.height;if(!t&&this._oldWindowContentsWidth===i&&this._oldWindowContentsHeight===o)return;this._oldWindowContentsWidth=i,this._oldWindowContentsHeight=o;const s=this._clientWidth-i,n=this._clientHeight-o,r=this._horizontalBar.value/e*s+"px",a=this._verticalBar.value/e*n+"px";r!==this._window.left&&(this._window.left=r,this.freezeControls||(this._rebuildLayout=!0)),a!==this._window.top&&(this._window.top=a,this.freezeControls||(this._rebuildLayout=!0))}_updateScroller(){const t=this._window._currentMeasure.width,e=this._window._currentMeasure.height;this._horizontalBar.isVisible&&t<=this._clientWidth&&!this.forceHorizontalBar?(this._grid.setRowDefinition(1,0,!0),this._horizontalBar.isVisible=!1,this._horizontalBar.value=0,this._rebuildLayout=!0):!this._horizontalBar.isVisible&&(t>this._clientWidth||this.forceHorizontalBar)&&(this._grid.setRowDefinition(1,this._barSize,!0),this._horizontalBar.isVisible=!0,this._rebuildLayout=!0),this._verticalBar.isVisible&&e<=this._clientHeight&&!this.forceVerticalBar?(this._grid.setColumnDefinition(1,0,!0),this._verticalBar.isVisible=!1,this._verticalBar.value=0,this._rebuildLayout=!0):!this._verticalBar.isVisible&&(e>this._clientHeight||this.forceVerticalBar)&&(this._grid.setColumnDefinition(1,this._barSize,!0),this._verticalBar.isVisible=!0,this._rebuildLayout=!0),this._buildClientSizes();const i=this.host.idealRatio;this._horizontalBar.thumbWidth=.9*this._thumbLength*(this._clientWidth/i)+"px",this._verticalBar.thumbWidth=.9*this._thumbLength*(this._clientHeight/i)+"px"}_link(t){super._link(t),this._attachWheel()}_addBar(t,e,i,o){t.paddingLeft=0,t.width="100%",t.height="100%",t.barOffset=0,t.value=0,t.maximum=1,t.horizontalAlignment=f.HORIZONTAL_ALIGNMENT_CENTER,t.verticalAlignment=f.VERTICAL_ALIGNMENT_CENTER,t.isVertical=i,t.rotation=o,t.isVisible=!1,e.addControl(t),t.onValueChangedObservable.add((t=>{this._setWindowPosition()}))}_attachWheel(){this._host&&!this._onWheelObserver&&(this._onWheelObserver=this.onWheelObservable.add((t=>{this._pointerIsOver&&!this.isReadOnly&&(1==this._verticalBar.isVisible&&(t.y<0&&this._verticalBar.value>0?this._verticalBar.value-=this._wheelPrecision:t.y>0&&this._verticalBar.value<this._verticalBar.maximum&&(this._verticalBar.value+=this._wheelPrecision)),1==this._horizontalBar.isVisible&&(t.x<0&&this._horizontalBar.value<this._horizontalBar.maximum?this._horizontalBar.value+=this._wheelPrecision:t.x>0&&this._horizontalBar.value>0&&(this._horizontalBar.value-=this._wheelPrecision)))})))}_renderHighlightSpecific(t){this.isHighlighted&&(super._renderHighlightSpecific(t),this._grid._renderHighlightSpecific(t),t.restore())}dispose(){this.onWheelObservable.remove(this._onWheelObserver),this._onWheelObserver=null,super.dispose()}}(0,n.RegisterClass)("BABYLON.GUI.ScrollViewer",G);class U extends m{constructor(t,e){super(t),this.name=t,this.onIsActiveChangedObservable=new n.Observable,this.delegatePickingToChildren=!1,this._isActive=!1,this.group=null!=e?e:"",this.thickness=0,this.isPointerBlocker=!0;let i=null;this.toActiveAnimation=()=>{this.thickness=1},this.toInactiveAnimation=()=>{this.thickness=0},this.pointerEnterActiveAnimation=()=>{i=this.alpha,this.alpha-=.1},this.pointerOutActiveAnimation=()=>{null!==i&&(this.alpha=i)},this.pointerDownActiveAnimation=()=>{this.scaleX-=.05,this.scaleY-=.05},this.pointerUpActiveAnimation=()=>{this.scaleX+=.05,this.scaleY+=.05},this.pointerEnterInactiveAnimation=()=>{i=this.alpha,this.alpha-=.1},this.pointerOutInactiveAnimation=()=>{null!==i&&(this.alpha=i)},this.pointerDownInactiveAnimation=()=>{this.scaleX-=.05,this.scaleY-=.05},this.pointerUpInactiveAnimation=()=>{this.scaleX+=.05,this.scaleY+=.05}}get group(){return this._group}set group(t){this._group!==t&&(this._group=t)}get isActive(){return this._isActive}set isActive(t){var e,i;this._isActive!==t&&(this._isActive=t,this._isActive?null===(e=this.toActiveAnimation)||void 0===e||e.call(this):null===(i=this.toInactiveAnimation)||void 0===i||i.call(this),this._markAsDirty(),this.onIsActiveChangedObservable.notifyObservers(t),this._isActive&&this._host&&this._group&&this._host.executeOnAllControls((t=>{if("ToggleButton"===t.typeName){if(t===this)return;const e=t;e.group===this.group&&(e.isActive=!1)}})))}_getTypeName(){return"ToggleButton"}_processPicking(t,e,i,o,s,n,r,a){if(!this._isEnabled||!this.isHitTestVisible||!this.isVisible||this.notRenderable)return!1;if(!super.contains(t,e))return!1;if(this.delegatePickingToChildren){let i=!1;for(let o=this._children.length-1;o>=0;o--){const s=this._children[o];if(s.isEnabled&&s.isHitTestVisible&&s.isVisible&&!s.notRenderable&&s.contains(t,e)){i=!0;break}}if(!i)return!1}return this._processObservables(o,t,e,i,s,n,r,a),!0}_onPointerEnter(t,e){return!!super._onPointerEnter(t,e)&&(this.isReadOnly||(this._isActive?this.pointerEnterActiveAnimation&&this.pointerEnterActiveAnimation():this.pointerEnterInactiveAnimation&&this.pointerEnterInactiveAnimation()),!0)}_onPointerOut(t,e,i=!1){this.isReadOnly||(this._isActive?this.pointerOutActiveAnimation&&this.pointerOutActiveAnimation():this.pointerOutInactiveAnimation&&this.pointerOutInactiveAnimation()),super._onPointerOut(t,e,i)}_onPointerDown(t,e,i,o,s){return!!super._onPointerDown(t,e,i,o,s)&&(this.isReadOnly||(this._isActive?this.pointerDownActiveAnimation&&this.pointerDownActiveAnimation():this.pointerDownInactiveAnimation&&this.pointerDownInactiveAnimation()),!0)}_onPointerUp(t,e,i,o,s,n){this.isReadOnly||(this._isActive?this.pointerUpActiveAnimation&&this.pointerUpActiveAnimation():this.pointerUpInactiveAnimation&&this.pointerUpInactiveAnimation()),super._onPointerUp(t,e,i,o,s,n)}}(0,n.RegisterClass)("BABYLON.GUI.ToggleButton",U);class X{}class Y extends y{constructor(){super(...arguments),this.onKeyPressObservable=new n.Observable,this.defaultButtonWidth="40px",this.defaultButtonHeight="40px",this.defaultButtonPaddingLeft="2px",this.defaultButtonPaddingRight="2px",this.defaultButtonPaddingTop="2px",this.defaultButtonPaddingBottom="2px",this.defaultButtonColor="#DDD",this.defaultButtonBackground="#070707",this.shiftButtonColor="#7799FF",this.selectedShiftThickness=1,this.shiftState=0,this._currentlyConnectedInputText=null,this._connectedInputTexts=[],this._onKeyPressObserver=null}_getTypeName(){return"VirtualKeyboard"}_createKey(t,e){const i=x.CreateSimpleButton(t,t);return i.width=e&&e.width?e.width:this.defaultButtonWidth,i.height=e&&e.height?e.height:this.defaultButtonHeight,i.color=e&&e.color?e.color:this.defaultButtonColor,i.background=e&&e.background?e.background:this.defaultButtonBackground,i.paddingLeft=e&&e.paddingLeft?e.paddingLeft:this.defaultButtonPaddingLeft,i.paddingRight=e&&e.paddingRight?e.paddingRight:this.defaultButtonPaddingRight,i.paddingTop=e&&e.paddingTop?e.paddingTop:this.defaultButtonPaddingTop,i.paddingBottom=e&&e.paddingBottom?e.paddingBottom:this.defaultButtonPaddingBottom,i.thickness=0,i.isFocusInvisible=!0,i.shadowColor=this.shadowColor,i.shadowBlur=this.shadowBlur,i.shadowOffsetX=this.shadowOffsetX,i.shadowOffsetY=this.shadowOffsetY,i.onPointerUpObservable.add((()=>{this.onKeyPressObservable.notifyObservers(t)})),i}addKeysRow(t,e){const i=new y;i.isVertical=!1,i.isFocusInvisible=!0;let o=null;for(let s=0;s<t.length;s++){let n=null;e&&e.length===t.length&&(n=e[s]);const r=this._createKey(t[s],n);(!o||r.heightInPixels>o.heightInPixels)&&(o=r),i.addControl(r)}i.height=o?o.height:this.defaultButtonHeight,this.addControl(i)}applyShiftState(t){if(this.children)for(let e=0;e<this.children.length;e++){const i=this.children[e];if(!i||!i.children)continue;const o=i;for(let e=0;e<o.children.length;e++){const i=o.children[e];if(!i||!i.children[0])continue;const s=i.children[0];""===s.text&&(i.color=t?this.shiftButtonColor:this.defaultButtonColor,i.thickness=t>1?this.selectedShiftThickness:0),s.text=t>0?s.text.toUpperCase():s.text.toLowerCase()}}}get connectedInputText(){return this._currentlyConnectedInputText}connect(t){if(this._connectedInputTexts.some((e=>e.input===t)))return;null===this._onKeyPressObserver&&(this._onKeyPressObserver=this.onKeyPressObservable.add((t=>{if(this._currentlyConnectedInputText){switch(this._currentlyConnectedInputText._host.focusedControl=this._currentlyConnectedInputText,t){case"":return this.shiftState++,this.shiftState>2&&(this.shiftState=0),void this.applyShiftState(this.shiftState);case"":return void this._currentlyConnectedInputText.processKey(8);case"":return void this._currentlyConnectedInputText.processKey(13)}this._currentlyConnectedInputText.processKey(-1,this.shiftState?t.toUpperCase():t),1===this.shiftState&&(this.shiftState=0,this.applyShiftState(this.shiftState))}}))),this.isVisible=!1,this._currentlyConnectedInputText=t,t._connectedVirtualKeyboard=this;const e=t.onFocusObservable.add((()=>{this._currentlyConnectedInputText=t,t._connectedVirtualKeyboard=this,this.isVisible=!0})),i=t.onBlurObservable.add((()=>{t._connectedVirtualKeyboard=null,this._currentlyConnectedInputText=null,this.isVisible=!1}));this._connectedInputTexts.push({input:t,onBlurObserver:i,onFocusObserver:e})}disconnect(t){if(t){const e=this._connectedInputTexts.filter((e=>e.input===t));1===e.length&&(this._removeConnectedInputObservables(e[0]),this._connectedInputTexts=this._connectedInputTexts.filter((e=>e.input!==t)),this._currentlyConnectedInputText===t&&(this._currentlyConnectedInputText=null))}else this._connectedInputTexts.forEach((t=>{this._removeConnectedInputObservables(t)})),this._connectedInputTexts=[];0===this._connectedInputTexts.length&&(this._currentlyConnectedInputText=null,this.onKeyPressObservable.remove(this._onKeyPressObserver),this._onKeyPressObserver=null)}_removeConnectedInputObservables(t){t.input._connectedVirtualKeyboard=null,t.input.onFocusObservable.remove(t.onFocusObserver),t.input.onBlurObservable.remove(t.onBlurObserver)}dispose(){super.dispose(),this.disconnect()}static CreateDefaultLayout(t){const e=new Y(t);return e.addKeysRow(["1","2","3","4","5","6","7","8","9","0",""]),e.addKeysRow(["q","w","e","r","t","y","u","i","o","p"]),e.addKeysRow(["a","s","d","f","g","h","j","k","l",";","'",""]),e.addKeysRow(["","z","x","c","v","b","n","m",",",".","/"]),e.addKeysRow([" "],[{width:"200px"}]),e}}(0,n.RegisterClass)("BABYLON.GUI.VirtualKeyboard",Y);class j extends f{constructor(t){super(t),this.name=t,this._cellWidth=20,this._cellHeight=20,this._minorLineTickness=1,this._minorLineColor="DarkGray",this._majorLineTickness=2,this._majorLineColor="White",this._majorLineFrequency=5,this._background="Black",this._displayMajorLines=!0,this._displayMinorLines=!0}get displayMinorLines(){return this._displayMinorLines}set displayMinorLines(t){this._displayMinorLines!==t&&(this._displayMinorLines=t,this._markAsDirty())}get displayMajorLines(){return this._displayMajorLines}set displayMajorLines(t){this._displayMajorLines!==t&&(this._displayMajorLines=t,this._markAsDirty())}get background(){return this._background}set background(t){this._background!==t&&(this._background=t,this._markAsDirty())}get cellWidth(){return this._cellWidth}set cellWidth(t){this._cellWidth=t,this._markAsDirty()}get cellHeight(){return this._cellHeight}set cellHeight(t){this._cellHeight=t,this._markAsDirty()}get minorLineTickness(){return this._minorLineTickness}set minorLineTickness(t){this._minorLineTickness=t,this._markAsDirty()}get minorLineColor(){return this._minorLineColor}set minorLineColor(t){this._minorLineColor=t,this._markAsDirty()}get majorLineTickness(){return this._majorLineTickness}set majorLineTickness(t){this._majorLineTickness=t,this._markAsDirty()}get majorLineColor(){return this._majorLineColor}set majorLineColor(t){this._majorLineColor=t,this._markAsDirty()}get majorLineFrequency(){return this._majorLineFrequency}set majorLineFrequency(t){this._majorLineFrequency=t,this._markAsDirty()}_draw(t,e){if(t.save(),this._applyStates(t),this._isEnabled){this._background&&(t.fillStyle=this._background,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height));const e=this._currentMeasure.width/this._cellWidth,s=this._currentMeasure.height/this._cellHeight,n=this._currentMeasure.left+this._currentMeasure.width/2,r=this._currentMeasure.top+this._currentMeasure.height/2;if(this._displayMinorLines){t.strokeStyle=this._minorLineColor,t.lineWidth=this._minorLineTickness;for(var i=-e/2+1;i<e/2;i++){const e=n+i*this.cellWidth;t.beginPath(),t.moveTo(e,this._currentMeasure.top),t.lineTo(e,this._currentMeasure.top+this._currentMeasure.height),t.stroke()}for(var o=-s/2+1;o<s/2;o++){const e=r+o*this.cellHeight;t.beginPath(),t.moveTo(this._currentMeasure.left,e),t.lineTo(this._currentMeasure.left+this._currentMeasure.width,e),t.stroke()}}if(this._displayMajorLines){for(t.strokeStyle=this._majorLineColor,t.lineWidth=this._majorLineTickness,i=-e/2+this._majorLineFrequency;i<e/2;i+=this._majorLineFrequency){const e=n+i*this.cellWidth;t.beginPath(),t.moveTo(e,this._currentMeasure.top),t.lineTo(e,this._currentMeasure.top+this._currentMeasure.height),t.stroke()}for(o=-s/2+this._majorLineFrequency;o<s/2;o+=this._majorLineFrequency){const e=r+o*this.cellHeight;t.moveTo(this._currentMeasure.left,e),t.lineTo(this._currentMeasure.left+this._currentMeasure.width,e),t.closePath(),t.stroke()}}}t.restore()}_getTypeName(){return"DisplayGrid"}}i([(0,n.serialize)()],j.prototype,"displayMinorLines",null),i([(0,n.serialize)()],j.prototype,"displayMajorLines",null),i([(0,n.serialize)()],j.prototype,"background",null),i([(0,n.serialize)()],j.prototype,"cellWidth",null),i([(0,n.serialize)()],j.prototype,"cellHeight",null),i([(0,n.serialize)()],j.prototype,"minorLineTickness",null),i([(0,n.serialize)()],j.prototype,"minorLineColor",null),i([(0,n.serialize)()],j.prototype,"majorLineTickness",null),i([(0,n.serialize)()],j.prototype,"majorLineColor",null),i([(0,n.serialize)()],j.prototype,"majorLineFrequency",null),(0,n.RegisterClass)("BABYLON.GUI.DisplayGrid",j);class K extends L{constructor(t){super(t),this.name=t,this._tempMeasure=new c(0,0,0,0)}get displayThumb(){return this._displayThumb&&null!=this.thumbImage}set displayThumb(t){this._displayThumb!==t&&(this._displayThumb=t,this._markAsDirty())}get backgroundImage(){return this._backgroundImage}set backgroundImage(t){this._backgroundImage!==t&&(this._backgroundImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce((()=>this._markAsDirty())),this._markAsDirty())}get valueBarImage(){return this._valueBarImage}set valueBarImage(t){this._valueBarImage!==t&&(this._valueBarImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce((()=>this._markAsDirty())),this._markAsDirty())}get thumbImage(){return this._thumbImage}set thumbImage(t){this._thumbImage!==t&&(this._thumbImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce((()=>this._markAsDirty())),this._markAsDirty())}_getTypeName(){return"ImageBasedSlider"}_draw(t,e){t.save(),this._applyStates(t),this._prepareRenderingData("rectangle");const i=this._getThumbPosition(),o=this._renderLeft,s=this._renderTop,n=this._renderWidth,r=this._renderHeight;this._backgroundImage&&(this._tempMeasure.copyFromFloats(o,s,n,r),this.isThumbClamped&&this.displayThumb&&(this.isVertical?this._tempMeasure.height+=this._effectiveThumbThickness:this._tempMeasure.width+=this._effectiveThumbThickness),this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure),this._backgroundImage._draw(t)),this._valueBarImage&&(this.isVertical?this.isThumbClamped&&this.displayThumb?this._tempMeasure.copyFromFloats(o,s+i,n,r-i+this._effectiveThumbThickness):this._tempMeasure.copyFromFloats(o,s+i,n,r-i):this.isThumbClamped&&this.displayThumb?this._tempMeasure.copyFromFloats(o,s,i+this._effectiveThumbThickness/2,r):this._tempMeasure.copyFromFloats(o,s,i,r),this._valueBarImage._currentMeasure.copyFrom(this._tempMeasure),this._valueBarImage._draw(t)),this.displayThumb&&(this.isVertical?this._tempMeasure.copyFromFloats(o-this._effectiveBarOffset,this._currentMeasure.top+i,this._currentMeasure.width,this._effectiveThumbThickness):this._tempMeasure.copyFromFloats(this._currentMeasure.left+i,this._currentMeasure.top,this._effectiveThumbThickness,this._currentMeasure.height),this._thumbImage._currentMeasure.copyFrom(this._tempMeasure),this._thumbImage._draw(t)),t.restore()}serialize(t){super.serialize(t);const e={},i={},o={};this.backgroundImage.serialize(e),this.thumbImage.serialize(i),this.valueBarImage.serialize(o),t.backgroundImage=e,t.thumbImage=i,t.valueBarImage=o}_parseFromContent(t,e){super._parseFromContent(t,e),this.backgroundImage=b.Parse(t.backgroundImage,e),this.thumbImage=b.Parse(t.thumbImage,e),this.valueBarImage=b.Parse(t.valueBarImage,e)}}i([(0,n.serialize)()],K.prototype,"displayThumb",null),(0,n.RegisterClass)("BABYLON.GUI.ImageBasedSlider",K);const Z="Statics";f.AddHeader=function(t,e,i,o){const s=new y("panel"),n=!o||o.isHorizontal,r=!o||o.controlFirst;s.isVertical=!n;const a=new v("header");return a.text=e,a.textHorizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,n?a.width=i:a.height=i,r?(s.addControl(t),s.addControl(a),a.paddingLeft="5px"):(s.addControl(a),s.addControl(t),a.paddingRight="5px"),a.shadowBlur=t.shadowBlur,a.shadowColor=t.shadowColor,a.shadowOffsetX=t.shadowOffsetX,a.shadowOffsetY=t.shadowOffsetY,s};class q{constructor(t){this._fontFamily="Arial",this._fontStyle="",this._fontWeight="",this._fontSize=new r(18,r.UNITMODE_PIXEL,!1),this.onChangedObservable=new n.Observable,this._host=t}get fontSize(){return this._fontSize.toString(this._host)}set fontSize(t){this._fontSize.toString(this._host)!==t&&this._fontSize.fromString(t)&&this.onChangedObservable.notifyObservers(this)}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily!==t&&(this._fontFamily=t,this.onChangedObservable.notifyObservers(this))}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.onChangedObservable.notifyObservers(this))}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.onChangedObservable.notifyObservers(this))}dispose(){this.onChangedObservable.clear()}}class $ extends n.DynamicTexture{constructor(t,e=0,i=0,o,s=!1,r=n.Texture.NEAREST_SAMPLINGMODE,a=!0){super(t,{width:e,height:i},o,s,r,n.Constants.TEXTUREFORMAT_RGBA,a),this._isDirty=!1,this._rootContainer=new g("root"),this._lastControlOver={},this._lastControlDown={},this._capturingControl={},this._linkedControls=new Array,this._isFullscreen=!1,this._fullscreenViewport=new n.Viewport(0,0,1,1),this._idealWidth=0,this._idealHeight=0,this._useSmallestIdeal=!1,this._renderAtIdealSize=!1,this._blockNextFocusCheck=!1,this._renderScale=1,this._cursorChanged=!1,this._defaultMousePointerId=0,this._numLayoutCalls=0,this._numRenderCalls=0,this._clipboardData="",this.onClipboardObservable=new n.Observable,this.onControlPickedObservable=new n.Observable,this.onBeginLayoutObservable=new n.Observable,this.onEndLayoutObservable=new n.Observable,this.onBeginRenderObservable=new n.Observable,this.onEndRenderObservable=new n.Observable,this.premulAlpha=!1,this.applyYInversionOnUpdate=!0,this.checkPointerEveryFrame=!1,this._useInvalidateRectOptimization=!0,this._invalidatedRectangle=null,this._clearMeasure=new c(0,0,0,0),this.onClipboardCopy=t=>{const e=t,i=new n.ClipboardInfo(n.ClipboardEventTypes.COPY,e);this.onClipboardObservable.notifyObservers(i),e.preventDefault()},this.onClipboardCut=t=>{const e=t,i=new n.ClipboardInfo(n.ClipboardEventTypes.CUT,e);this.onClipboardObservable.notifyObservers(i),e.preventDefault()},this.onClipboardPaste=t=>{const e=t,i=new n.ClipboardInfo(n.ClipboardEventTypes.PASTE,e);this.onClipboardObservable.notifyObservers(i),e.preventDefault()},(o=this.getScene())&&this._texture&&(this.applyYInversionOnUpdate=a,this._rootElement=o.getEngine().getInputElement(),this._renderObserver=o.onBeforeCameraRenderObservable.add((t=>this._checkUpdate(t))),this._preKeyboardObserver=o.onPreKeyboardObservable.add((t=>{this._focusedControl&&(t.type===n.KeyboardEventTypes.KEYDOWN&&this._focusedControl.processKeyboard(t.event),t.skipOnPointerObservable=!0)})),this._rootContainer._link(this),this.hasAlpha=!0,e&&i||(this._resizeObserver=o.getEngine().onResizeObservable.add((()=>this._onResize())),this._onResize()),this._texture.isReady=!0)}get numLayoutCalls(){return this._numLayoutCalls}get numRenderCalls(){return this._numRenderCalls}get renderScale(){return this._renderScale}set renderScale(t){t!==this._renderScale&&(this._renderScale=t,this._onResize())}get background(){return this._background}set background(t){this._background!==t&&(this._background=t,this.markAsDirty())}get idealWidth(){return this._idealWidth}set idealWidth(t){this._idealWidth!==t&&(this._idealWidth=t,this.markAsDirty(),this._rootContainer._markAllAsDirty())}get idealHeight(){return this._idealHeight}set idealHeight(t){this._idealHeight!==t&&(this._idealHeight=t,this.markAsDirty(),this._rootContainer._markAllAsDirty())}get useSmallestIdeal(){return this._useSmallestIdeal}set useSmallestIdeal(t){this._useSmallestIdeal!==t&&(this._useSmallestIdeal=t,this.markAsDirty(),this._rootContainer._markAllAsDirty())}get renderAtIdealSize(){return this._renderAtIdealSize}set renderAtIdealSize(t){this._renderAtIdealSize!==t&&(this._renderAtIdealSize=t,this._onResize())}get idealRatio(){let t=0,e=0;return this._idealWidth&&(t=this.getSize().width/this._idealWidth),this._idealHeight&&(e=this.getSize().height/this._idealHeight),this._useSmallestIdeal&&this._idealWidth&&this._idealHeight?window.innerWidth<window.innerHeight?t:e:this._idealWidth?t:this._idealHeight?e:1}get layer(){return this._layerToDispose}get rootContainer(){return this._rootContainer}getChildren(){return[this._rootContainer]}getDescendants(t,e){return this._rootContainer.getDescendants(t,e)}getControlsByType(t){return this._rootContainer.getDescendants(!1,(e=>e.typeName===t))}getControlByName(t){return this._getControlByKey("name",t)}_getControlByKey(t,e){return this._rootContainer.getDescendants().find((i=>i[t]===e))||null}get focusedControl(){return this._focusedControl}set focusedControl(t){this._focusedControl!=t&&(this._focusedControl&&this._focusedControl.onBlur(),t&&t.onFocus(),this._focusedControl=t)}get isForeground(){return!this.layer||!this.layer.isBackground}set isForeground(t){this.layer&&this.layer.isBackground!==!t&&(this.layer.isBackground=!t)}get clipboardData(){return this._clipboardData}set clipboardData(t){this._clipboardData=t}getClassName(){return"AdvancedDynamicTexture"}executeOnAllControls(t,e){e||(e=this._rootContainer),t(e);for(const i of e.children)i.children?this.executeOnAllControls(t,i):t(i)}get useInvalidateRectOptimization(){return this._useInvalidateRectOptimization}set useInvalidateRectOptimization(t){this._useInvalidateRectOptimization=t}invalidateRect(t,e,i,o){if(this._useInvalidateRectOptimization)if(this._invalidatedRectangle){const s=Math.ceil(Math.max(this._invalidatedRectangle.left+this._invalidatedRectangle.width-1,i)),n=Math.ceil(Math.max(this._invalidatedRectangle.top+this._invalidatedRectangle.height-1,o));this._invalidatedRectangle.left=Math.floor(Math.min(this._invalidatedRectangle.left,t)),this._invalidatedRectangle.top=Math.floor(Math.min(this._invalidatedRectangle.top,e)),this._invalidatedRectangle.width=s-this._invalidatedRectangle.left+1,this._invalidatedRectangle.height=n-this._invalidatedRectangle.top+1}else this._invalidatedRectangle=new c(t,e,i-t+1,o-e+1)}markAsDirty(){this._isDirty=!0}createStyle(){return new q(this)}addControl(t){return this._rootContainer.addControl(t),this}removeControl(t){return this._rootContainer.removeControl(t),this}moveToNonOverlappedPosition(t,e=1,i=1){let o;if(Array.isArray(t))o=t;else{const e=this.getDescendants(!0);o=void 0===t?e.filter((t=>void 0!==t.overlapGroup)):e.filter((e=>e.overlapGroup===t))}o.forEach((t=>{var s;let r=n.Vector2.Zero();const a=new n.Vector2(t.centerX,t.centerY);o.forEach((e=>{if(t!==e&&$._Overlaps(t,e)){const t=a.subtract(new n.Vector2(e.centerX,e.centerY)),o=t.length();o>0&&(r=r.add(t.normalize().scale(i/o)))}})),r.length()>0&&(r=r.normalize().scale(e*(null!==(s=t.overlapDeltaMultiplier)&&void 0!==s?s:1)),t.linkOffsetXInPixels+=r.x,t.linkOffsetYInPixels+=r.y)}))}dispose(){const t=this.getScene();t&&(this._rootElement=null,t.onBeforeCameraRenderObservable.remove(this._renderObserver),this._resizeObserver&&t.getEngine().onResizeObservable.remove(this._resizeObserver),this._pointerMoveObserver&&t.onPrePointerObservable.remove(this._pointerMoveObserver),this._sceneRenderObserver&&t.onBeforeRenderObservable.remove(this._sceneRenderObserver),this._pointerObserver&&t.onPointerObservable.remove(this._pointerObserver),this._preKeyboardObserver&&t.onPreKeyboardObservable.remove(this._preKeyboardObserver),this._canvasPointerOutObserver&&t.getEngine().onCanvasPointerOutObservable.remove(this._canvasPointerOutObserver),this._canvasBlurObserver&&t.getEngine().onCanvasBlurObservable.remove(this._canvasBlurObserver),this._layerToDispose&&(this._layerToDispose.texture=null,this._layerToDispose.dispose(),this._layerToDispose=null),this._rootContainer.dispose(),this.onClipboardObservable.clear(),this.onControlPickedObservable.clear(),this.onBeginRenderObservable.clear(),this.onEndRenderObservable.clear(),this.onBeginLayoutObservable.clear(),this.onEndLayoutObservable.clear(),super.dispose())}_onResize(){const t=this.getScene();if(!t)return;const e=t.getEngine(),i=this.getSize();let o=e.getRenderWidth()*this._renderScale,s=e.getRenderHeight()*this._renderScale;this._renderAtIdealSize&&(this._idealWidth?(s=s*this._idealWidth/o,o=this._idealWidth):this._idealHeight&&(o=o*this._idealHeight/s,s=this._idealHeight)),i.width===o&&i.height===s||(this.scaleTo(o,s),this.markAsDirty(),(this._idealWidth||this._idealHeight)&&this._rootContainer._markAllAsDirty()),this.invalidateRect(0,0,i.width-1,i.height-1)}_getGlobalViewport(){const t=this.getSize(),e=this._fullscreenViewport.toGlobal(t.width,t.height),i=Math.round(e.width*(1/this.rootContainer.scaleX)),o=Math.round(e.height*(1/this.rootContainer.scaleY));return e.x+=(e.width-i)/2,e.y+=(e.height-o)/2,e.width=i,e.height=o,e}getProjectedPosition(t,e){const i=this.getProjectedPositionWithZ(t,e);return new n.Vector2(i.x,i.y)}getProjectedPositionWithZ(t,e){const i=this.getScene();if(!i)return n.Vector3.Zero();const o=this._getGlobalViewport(),s=n.Vector3.Project(t,e,i.getTransformMatrix(),o);return new n.Vector3(s.x,s.y,s.z)}_checkUpdate(t){if(!this._layerToDispose||0!=(t.layerMask&this._layerToDispose.layerMask)){if(this._isFullscreen&&this._linkedControls.length){const t=this.getScene();if(!t)return;const e=this._getGlobalViewport();for(const i of this._linkedControls){if(!i.isVisible)continue;const o=i._linkedMesh;if(!o||o.isDisposed()){n.Tools.SetImmediate((()=>{i.linkWithMesh(null)}));continue}const s=o.getBoundingInfo?o.getBoundingInfo().boundingSphere.center:n.Vector3.ZeroReadOnly,r=n.Vector3.Project(s,o.getWorldMatrix(),t.getTransformMatrix(),e);r.z<0||r.z>1?i.notRenderable=!0:(i.notRenderable=!1,i._moveToProjectedPosition(r))}}(this._isDirty||this._rootContainer.isDirty)&&(this._isDirty=!1,this._render(),this.update(this.applyYInversionOnUpdate,this.premulAlpha,$.AllowGPUOptimizations))}}_render(){const t=this.getSize(),e=t.width,i=t.height,o=this.getContext();o.font="18px Arial",o.strokeStyle="white",this.onBeginLayoutObservable.notifyObservers(this);const s=new c(0,0,e,i);this._numLayoutCalls=0,this._rootContainer._layout(s,o),this.onEndLayoutObservable.notifyObservers(this),this._isDirty=!1,this._invalidatedRectangle?this._clearMeasure.copyFrom(this._invalidatedRectangle):this._clearMeasure.copyFromFloats(0,0,e,i),o.clearRect(this._clearMeasure.left,this._clearMeasure.top,this._clearMeasure.width,this._clearMeasure.height),this._background&&(o.save(),o.fillStyle=this._background,o.fillRect(this._clearMeasure.left,this._clearMeasure.top,this._clearMeasure.width,this._clearMeasure.height),o.restore()),this.onBeginRenderObservable.notifyObservers(this),this._numRenderCalls=0,this._rootContainer._render(o,this._invalidatedRectangle),this.onEndRenderObservable.notifyObservers(this),this._invalidatedRectangle=null}_changeCursor(t){this._rootElement&&(this._rootElement.style.cursor=t,this._cursorChanged=!0)}_registerLastControlDown(t,e){this._lastControlDown[e]=t,this.onControlPickedObservable.notifyObservers(t)}_doPicking(t,e,i,o,s,r,a,l){const _=this.getScene();if(!_)return;const h=_.getEngine(),c=this.getSize();if(this._isFullscreen){const i=_.cameraToUseForPointers||_.activeCamera;if(!i)return;const o=i.viewport;t*=c.width/(h.getRenderWidth()*o.width),e*=c.height/(h.getRenderHeight()*o.height)}this._capturingControl[s]?this._capturingControl[s]._processObservables(o,t,e,i,s,r):(this._cursorChanged=!1,this._rootContainer._processPicking(t,e,i,o,s,r,a,l)||(_.doNotHandleCursors||this._changeCursor(""),o===n.PointerEventTypes.POINTERMOVE&&this._lastControlOver[s]&&(this._lastControlOver[s]._onPointerOut(this._lastControlOver[s],i),delete this._lastControlOver[s])),this._cursorChanged||_.doNotHandleCursors||this._changeCursor(""),this._manageFocus())}_cleanControlAfterRemovalFromList(t,e){for(const i in t)t.hasOwnProperty(i)&&t[i]===e&&delete t[i]}_cleanControlAfterRemoval(t){this._cleanControlAfterRemovalFromList(this._lastControlDown,t),this._cleanControlAfterRemovalFromList(this._lastControlOver,t)}_translateToPicking(t,e,i){const o=t.cameraToUseForPointers||t.activeCamera,s=t.getEngine(),r=t.cameraToUseForPointers;if(o)if(o.rigCameras.length){const i=new n.Viewport(0,0,1,1);o.rigCameras.forEach((o=>{o.viewport.toGlobalToRef(s.getRenderWidth(),s.getRenderHeight(),i);const n=t.pointerX/s.getHardwareScalingLevel()-i.x,r=t.pointerY/s.getHardwareScalingLevel()-(s.getRenderHeight()-i.y-i.height);n<0||r<0||n>i.width||r>i.height||(t.cameraToUseForPointers=o,e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height)}))}else o.viewport.toGlobalToRef(s.getRenderWidth(),s.getRenderHeight(),e);else e.x=0,e.y=0,e.width=s.getRenderWidth(),e.height=s.getRenderHeight();const a=t.pointerX/s.getHardwareScalingLevel()-e.x,l=t.pointerY/s.getHardwareScalingLevel()-(s.getRenderHeight()-e.y-e.height);if(this._shouldBlockPointer=!1,i){const t=i.event.pointerId||this._defaultMousePointerId;this._doPicking(a,l,i,i.type,t,i.event.button,i.event.deltaX,i.event.deltaY),this._shouldBlockPointer&&(i.skipOnPointerObservable=this._shouldBlockPointer)}else this._doPicking(a,l,null,n.PointerEventTypes.POINTERMOVE,this._defaultMousePointerId,0);t.cameraToUseForPointers=r}attach(){const t=this.getScene();if(!t)return;const e=new n.Viewport(0,0,0,0);this._pointerMoveObserver=t.onPrePointerObservable.add(((i,o)=>{t.isPointerCaptured(i.event.pointerId)||i.type!==n.PointerEventTypes.POINTERMOVE&&i.type!==n.PointerEventTypes.POINTERUP&&i.type!==n.PointerEventTypes.POINTERDOWN&&i.type!==n.PointerEventTypes.POINTERWHEEL||(i.type===n.PointerEventTypes.POINTERMOVE&&i.event.pointerId&&(this._defaultMousePointerId=i.event.pointerId),this._translateToPicking(t,e,i))})),this._attachPickingToSceneRender(t,(()=>this._translateToPicking(t,e,null)),!1),this._attachToOnPointerOut(t),this._attachToOnBlur(t)}registerClipboardEvents(){self.addEventListener("copy",this.onClipboardCopy,!1),self.addEventListener("cut",this.onClipboardCut,!1),self.addEventListener("paste",this.onClipboardPaste,!1)}unRegisterClipboardEvents(){self.removeEventListener("copy",this.onClipboardCopy),self.removeEventListener("cut",this.onClipboardCut),self.removeEventListener("paste",this.onClipboardPaste)}attachToMesh(t,e=!0){const i=this.getScene();i&&(this._pointerObserver=i.onPointerObservable.add(((e,i)=>{if(e.type!==n.PointerEventTypes.POINTERMOVE&&e.type!==n.PointerEventTypes.POINTERUP&&e.type!==n.PointerEventTypes.POINTERDOWN&&e.type!==n.PointerEventTypes.POINTERWHEEL)return;e.type===n.PointerEventTypes.POINTERMOVE&&e.event.pointerId&&(this._defaultMousePointerId=e.event.pointerId);const o=e.event.pointerId||this._defaultMousePointerId;if(e.pickInfo&&e.pickInfo.hit&&e.pickInfo.pickedMesh===t){const t=e.pickInfo.getTextureCoordinates();if(t){const i=this.getSize();this._doPicking(t.x*i.width,(this.applyYInversionOnUpdate?1-t.y:t.y)*i.height,e,e.type,o,e.event.button,e.event.deltaX,e.event.deltaY)}}else if(e.type===n.PointerEventTypes.POINTERUP){if(this._lastControlDown[o]&&this._lastControlDown[o]._forcePointerUp(o),delete this._lastControlDown[o],this.focusedControl){const t=this.focusedControl.keepsFocusWith();let e=!0;if(t)for(const i of t){if(this===i._host)continue;const t=i._host;if(t._lastControlOver[o]&&t._lastControlOver[o].isAscendant(i)){e=!1;break}}e&&(this.focusedControl=null)}}else e.type===n.PointerEventTypes.POINTERMOVE&&(this._lastControlOver[o]&&this._lastControlOver[o]._onPointerOut(this._lastControlOver[o],e,!0),delete this._lastControlOver[o])})),t.enablePointerMoveEvents=e,this._attachPickingToSceneRender(i,(()=>{const e=this._defaultMousePointerId,o=null==i?void 0:i.pick(i.pointerX,i.pointerY);if(o&&o.hit&&o.pickedMesh===t){const t=o.getTextureCoordinates();if(t){const i=this.getSize();this._doPicking(t.x*i.width,(this.applyYInversionOnUpdate?1-t.y:t.y)*i.height,null,n.PointerEventTypes.POINTERMOVE,e,0)}}else this._lastControlOver[e]&&this._lastControlOver[e]._onPointerOut(this._lastControlOver[e],null,!0),delete this._lastControlOver[e]}),!0),this._attachToOnPointerOut(i),this._attachToOnBlur(i))}moveFocusToControl(t){this.focusedControl=t,this._lastPickedControl=t,this._blockNextFocusCheck=!0}_manageFocus(){if(this._blockNextFocusCheck)return this._blockNextFocusCheck=!1,void(this._lastPickedControl=this._focusedControl);if(this._focusedControl&&this._focusedControl!==this._lastPickedControl){if(this._lastPickedControl.isFocusInvisible)return;this.focusedControl=null}}_attachPickingToSceneRender(t,e,i){this._sceneRenderObserver=t.onBeforeRenderObservable.add((()=>{this.checkPointerEveryFrame&&(this._linkedControls.length>0||i)&&e()}))}_attachToOnPointerOut(t){this._canvasPointerOutObserver=t.getEngine().onCanvasPointerOutObservable.add((t=>{this._lastControlOver[t.pointerId]&&this._lastControlOver[t.pointerId]._onPointerOut(this._lastControlOver[t.pointerId],null),delete this._lastControlOver[t.pointerId],this._lastControlDown[t.pointerId]&&this._lastControlDown[t.pointerId]!==this._capturingControl[t.pointerId]&&(this._lastControlDown[t.pointerId]._forcePointerUp(),delete this._lastControlDown[t.pointerId])}))}_attachToOnBlur(t){this._canvasBlurObserver=t.getEngine().onCanvasBlurObservable.add((t=>{Object.entries(this._lastControlDown).forEach((([t,e])=>{e._onCanvasBlur()})),this.focusedControl=null,this._lastControlDown={}}))}serializeContent(){const t=this.getSize(),e={root:{},width:t.width,height:t.height};return this._rootContainer.serialize(e.root),e}parseContent(t,e){if(this._rootContainer=f.Parse(t.root,this),e){const e=t.width,i=t.height;"number"==typeof e&&"number"==typeof i&&e>=0&&i>=0?this.scaleTo(e,i):this.scaleTo(1920,1080)}}parseFromSnippetAsync(t,e){return"_BLANK"===t?Promise.resolve():new Promise(((i,o)=>{const s=new n.WebRequest;s.addEventListener("readystatechange",(()=>{if(4==s.readyState)if(200==s.status){const o=JSON.parse(JSON.parse(s.responseText).jsonPayload),n=JSON.parse(o.gui);this.parseContent(n,e),this.snippetId=t,i()}else o("Unable to load the snippet "+t)})),s.open("GET",$.SnippetUrl+"/"+t.replace(/#/g,"/")),s.send()}))}parseFromURLAsync(t,e){return""===t?Promise.resolve():new Promise(((i,o)=>{const s=new n.WebRequest;s.addEventListener("readystatechange",(()=>{if(4==s.readyState)if(200==s.status){const t=s.responseText,o=JSON.parse(t);this.parseContent(o,e),i()}else o("Unable to load")})),s.open("GET",t),s.send()}))}static _Overlaps(t,e){return!(t.centerX>e.centerX+e.widthInPixels||t.centerX+t.widthInPixels<e.centerX||t.centerY+t.heightInPixels<e.centerY||t.centerY>e.centerY+e.heightInPixels)}static CreateForMesh(t,e=1024,i=1024,o=!0,s=!1,r,a=this._CreateMaterial){const l=(0,n.RandomGUID)(),_=new $(`AdvancedDynamicTexture for ${t.name} [${l}]`,e,i,t.getScene(),!0,n.Texture.TRILINEAR_SAMPLINGMODE,r);return a(t,l,_,s),_.attachToMesh(t,o),_}static _CreateMaterial(t,e,i,o){const s=(0,n.GetClass)("BABYLON.StandardMaterial");if(!s)throw"StandardMaterial needs to be imported before as it contains a side-effect required by your code.";const r=new s(`AdvancedDynamicTextureMaterial for ${t.name} [${e}]`,t.getScene());r.backFaceCulling=!1,r.diffuseColor=n.Color3.Black(),r.specularColor=n.Color3.Black(),o?(r.diffuseTexture=i,r.emissiveTexture=i,i.hasAlpha=!0):(r.emissiveTexture=i,r.opacityTexture=i),t.material=r}static CreateForMeshTexture(t,e=1024,i=1024,o=!0,s){const r=new $(t.name+" AdvancedDynamicTexture",e,i,t.getScene(),!0,n.Texture.TRILINEAR_SAMPLINGMODE,s);return r.attachToMesh(t,o),r}static CreateFullscreenUI(t,e=!0,i=null,o=n.Texture.BILINEAR_SAMPLINGMODE,s=!1){const r=new $(t,0,0,i,!1,o),a=r.getScene(),l=new n.Layer(t+"_layer",null,a,!e);if(l.texture=r,r._layerToDispose=l,r._isFullscreen=!0,s&&a){const t=1/a.getEngine().getHardwareScalingLevel();r._rootContainer.scaleX=t,r._rootContainer.scaleY=t}return r.attach(),r}scale(t){super.scale(t),this.markAsDirty()}scaleTo(t,e){super.scaleTo(t,e),this.markAsDirty()}}$.SnippetUrl="https://snippet.babylonjs.com",$.AllowGPUOptimizations=!0;class J{constructor(t){this.texture=t,this._captureRenderTime=!1,this._renderTime=new n.PerfCounter,this._captureLayoutTime=!1,this._layoutTime=new n.PerfCounter,this._onBeginRenderObserver=null,this._onEndRenderObserver=null,this._onBeginLayoutObserver=null,this._onEndLayoutObserver=null}get renderTimeCounter(){return this._renderTime}get layoutTimeCounter(){return this._layoutTime}get captureRenderTime(){return this._captureRenderTime}set captureRenderTime(t){t!==this._captureRenderTime&&(this._captureRenderTime=t,t?(this._onBeginRenderObserver=this.texture.onBeginRenderObservable.add((()=>{this._renderTime.beginMonitoring()})),this._onEndRenderObserver=this.texture.onEndRenderObservable.add((()=>{this._renderTime.endMonitoring(!0)}))):(this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver),this._onBeginRenderObserver=null,this.texture.onEndRenderObservable.remove(this._onEndRenderObserver),this._onEndRenderObserver=null))}get captureLayoutTime(){return this._captureLayoutTime}set captureLayoutTime(t){t!==this._captureLayoutTime&&(this._captureLayoutTime=t,t?(this._onBeginLayoutObserver=this.texture.onBeginLayoutObservable.add((()=>{this._layoutTime.beginMonitoring()})),this._onEndLayoutObserver=this.texture.onEndLayoutObservable.add((()=>{this._layoutTime.endMonitoring(!0)}))):(this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver),this._onBeginLayoutObserver=null,this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver),this._onEndLayoutObserver=null))}dispose(){this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver),this._onBeginRenderObserver=null,this.texture.onEndRenderObservable.remove(this._onEndRenderObserver),this._onEndRenderObserver=null,this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver),this._onBeginLayoutObserver=null,this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver),this._onEndLayoutObserver=null,this.texture=null}}const tt="XmlLoader Exception : XML file is malformed or corrupted.";class et{constructor(t=null){this._nodes={},this._nodeTypes={element:1,attribute:2,text:3},this._isLoaded=!1,this._objectAttributes={textHorizontalAlignment:1,textVerticalAlignment:2,horizontalAlignment:3,verticalAlignment:4,stretch:5},t&&(this._parentClass=t)}_getChainElement(t){let e=window;this._parentClass&&(e=this._parentClass);let i=t;i=i.split(".");for(let t=0;t<i.length;t++)e=e[i[t]];return e}_getClassAttribute(t){const e=t.split(".");return(0,n.GetClass)("BABYLON.GUI."+e[0])[e[1]]}_createGuiElement(t,e,i=!0){try{const o=new((0,n.GetClass)("BABYLON.GUI."+t.nodeName));e&&i&&e.addControl(o);for(let e=0;e<t.attributes.length;e++)if(!t.attributes[e].name.toLowerCase().includes("datasource"))if(t.attributes[e].name.toLowerCase().includes("observable")){const i=this._getChainElement(t.attributes[e].value);o[t.attributes[e].name].add(i)}else if("linkWithMesh"==t.attributes[e].name)this._parentClass?o.linkWithMesh(this._parentClass[t.attributes[e].value]):o.linkWithMesh(window[t.attributes[e].value]);else if(t.attributes[e].value.startsWith("{{")&&t.attributes[e].value.endsWith("}}")){const i=this._getChainElement(t.attributes[e].value.substring(2,t.attributes[e].value.length-2));o[t.attributes[e].name]=i}else this._objectAttributes[t.attributes[e].name]?o[t.attributes[e].name]=this._getClassAttribute(t.attributes[e].value):"true"==t.attributes[e].value||"false"==t.attributes[e].value?o[t.attributes[e].name]="true"==t.attributes[e].value:o[t.attributes[e].name]=isNaN(Number(t.attributes[e].value))?t.attributes[e].value:Number(t.attributes[e].value);if(!t.attributes.getNamedItem("id"))return this._nodes[t.nodeName+Object.keys(this._nodes).length+"_gen"]=o,o;let s=t.attributes.getNamedItem("id").value;if(s.startsWith("{{")&&s.endsWith("}}")&&(s=this._getChainElement(s.substring(2,s.length-2))),this._nodes[s])throw"XmlLoader Exception : Duplicate ID, every element should have an unique ID attribute";return this._nodes[s]=o,o}catch(e){throw"XmlLoader Exception : Error parsing Control "+t.nodeName+","+e+"."}}_parseGrid(t,e,i){let o,s,n;const r=t.children;let a,l,_=!1,h=-1,c=-1,d=0;for(let t=0;t<r.length;t++)if(r[t].nodeType==this._nodeTypes.element){if("Row"!=r[t].nodeName)throw"XmlLoader Exception : Expecting Row node, received "+r[t].nodeName;if(h+=1,n=r[t].children,!r[t].attributes.getNamedItem("height"))throw"XmlLoader Exception : Height must be defined for grid rows";s=Number(r[t].attributes.getNamedItem("height").nodeValue),_=!!r[t].attributes.getNamedItem("isPixel")&&JSON.parse(r[t].attributes.getNamedItem("isPixel").nodeValue),e.addRowDefinition(s,_);for(let t=0;t<n.length;t++)if(n[t].nodeType==this._nodeTypes.element){if("Column"!=n[t].nodeName)throw"XmlLoader Exception : Expecting Column node, received "+n[t].nodeName;if(c+=1,h>0&&c>d)throw"XmlLoader Exception : In the Grid element, the number of columns is defined in the first row, do not add more columns in the subsequent rows.";if(0==h){if(!n[t].attributes.getNamedItem("width"))throw"XmlLoader Exception : Width must be defined for all the grid columns in the first row";o=Number(n[t].attributes.getNamedItem("width").nodeValue),_=!!n[t].attributes.getNamedItem("isPixel")&&JSON.parse(n[t].attributes.getNamedItem("isPixel").nodeValue),e.addColumnDefinition(o,_)}a=n[t].children;for(let t=0;t<a.length;t++)a[t].nodeType==this._nodeTypes.element&&(l=this._createGuiElement(a[t],e,!1),e.addControl(l,h,c),a[t].firstChild&&this._parseXml(a[t].firstChild,l))}0==h&&(d=c),c=-1}t.nextSibling&&this._parseXml(t.nextSibling,i)}_parseElement(t,e,i){t.firstChild&&this._parseXml(t.firstChild,e),t.nextSibling&&this._parseXml(t.nextSibling,i)}_prepareSourceElement(t,e,i,o,s){this._parentClass?this._parentClass[i]=o[s]:window[i]=o[s],t.firstChild&&this._parseXml(t.firstChild,e,!0)}_parseElementsFromSource(t,e,i){const o=t.attributes.getNamedItem("dataSource").value;if(!o.includes(" in "))throw"XmlLoader Exception : Malformed XML, Data Source must include an in";{let s=!0;const n=o.split(" in ");if(n.length<2)throw"XmlLoader Exception : Malformed XML, Data Source must have an iterator and a source";let r=n[1];if(r.startsWith("{")&&r.endsWith("}")&&(s=!1),(!s||r.startsWith("[")&&r.endsWith("]"))&&(r=r.substring(1,r.length-1)),r=this._parentClass?this._parentClass[r]:window[r],s)for(let i=0;i<r.length;i++)this._prepareSourceElement(t,e,n[0],r,i);else for(const i in r)this._prepareSourceElement(t,e,n[0],r,i);t.nextSibling&&this._parseXml(t.nextSibling,i)}}_parseXml(t,e,i=!1){if(t.nodeType!=this._nodeTypes.element)return void(t.nextSibling&&this._parseXml(t.nextSibling,e,i));i&&t.setAttribute("id",e.id+(e._children.length+1));const o=this._createGuiElement(t,e);this._rootNode||(this._rootNode=o),"Grid"==t.nodeName?this._parseGrid(t,o,e):t.attributes.getNamedItem("dataSource")?this._parseElementsFromSource(t,o,e):this._parseElement(t,o,e)}isLoaded(){return this._isLoaded}getNodeById(t){return this._nodes[t]}getNodes(){return this._nodes}dispose(){this._rootNode&&(this._rootNode.dispose(),this._rootNode=null,this._nodes={})}loadLayout(t,e,i=null,o=null){const s=new XMLHttpRequest;s.onload=()=>{if(4===s.readyState&&200===s.status){if(!s.responseXML){if(o)return void o(tt);throw tt}const t=s.responseXML.documentElement;this._parseXml(t.firstChild,e),this._isLoaded=!0,i&&i()}},s.onerror=function(){o&&o("an error occurred during loading the layout")},s.open("GET",t,!0),s.send()}async loadLayoutAsync(t,e){return new Promise(((i,o)=>{this.loadLayout(t,e,i,o)}))}}class it extends n.Vector3{constructor(t,e=0){super(t.x,t.y,t.z),this.buttonIndex=e}}class ot{constructor(t){this.name=t,this._downCount=0,this._enterCount=-1,this._downPointerIds={},this._isVisible=!0,this._isScaledByManager=!1,this.onPointerMoveObservable=new n.Observable,this.onPointerOutObservable=new n.Observable,this.onPointerDownObservable=new n.Observable,this.onPointerUpObservable=new n.Observable,this.onPointerClickObservable=new n.Observable,this.onPointerEnterObservable=new n.Observable,this._behaviors=new Array}get position(){return this._node?this._node.position:n.Vector3.Zero()}set position(t){this._node&&(this._node.position=t)}get scaling(){return this._node?this._node.scaling:new n.Vector3(1,1,1)}set scaling(t){this._node&&(this._isScaledByManager=!1,this._node.scaling=t)}get behaviors(){return this._behaviors}addBehavior(t){if(-1!==this._behaviors.indexOf(t))return this;t.init();const e=this._host.scene;return e.isLoading?e.onDataLoadedObservable.addOnce((()=>{t.attach(this)})):t.attach(this),this._behaviors.push(t),this}removeBehavior(t){const e=this._behaviors.indexOf(t);return-1===e||(this._behaviors[e].detach(),this._behaviors.splice(e,1)),this}getBehaviorByName(t){for(const e of this._behaviors)if(e.name===t)return e;return null}get isVisible(){return this._isVisible}set isVisible(t){if(this._isVisible===t)return;this._isVisible=t;const e=this.mesh;e&&e.setEnabled(t)}get typeName(){return this._getTypeName()}getClassName(){return this._getTypeName()}_getTypeName(){return"Control3D"}get node(){return this._node}get mesh(){return this._node instanceof n.AbstractMesh?this._node:null}linkToTransformNode(t){return this._node&&(this._node.parent=t),this}_prepareNode(t){if(!this._node){if(this._node=this._createNode(t),!this.node)return;this._injectGUI3DReservedDataStore(this.node).control=this;const e=this.mesh;e&&(e.isPickable=!0,this._affectMaterial(e))}}_injectGUI3DReservedDataStore(t){var e,i;return t.reservedDataStore=null!==(e=t.reservedDataStore)&&void 0!==e?e:{},t.reservedDataStore.GUI3D=null!==(i=t.reservedDataStore.GUI3D)&&void 0!==i?i:{},t.reservedDataStore.GUI3D}_createNode(t){return null}_affectMaterial(t){t.material=null}_IsTouchButton3D(t){return void 0!==t._generatePointerEventType}_onPointerMove(t,e){this.onPointerMoveObservable.notifyObservers(e,-1,t,this)}_onPointerEnter(t){return-1===this._enterCount&&(this._enterCount=0),this._enterCount++,!(this._enterCount>1||(this.onPointerEnterObservable.notifyObservers(this,-1,t,this),this.pointerEnterAnimation&&this.pointerEnterAnimation(),0))}_onPointerOut(t){this._enterCount--,this._enterCount>0||(this._enterCount=0,this.onPointerOutObservable.notifyObservers(this,-1,t,this),this.pointerOutAnimation&&this.pointerOutAnimation())}_onPointerDown(t,e,i,o){return this._downCount++,this._downPointerIds[i]=this._downPointerIds[i]+1||1,1===this._downCount&&(this.onPointerDownObservable.notifyObservers(new it(e,o),-1,t,this),this.pointerDownAnimation&&this.pointerDownAnimation(),!0)}_onPointerUp(t,e,i,o,s){this._downCount--,this._downPointerIds[i]--,this._downPointerIds[i]<=0&&delete this._downPointerIds[i],this._downCount<0?this._downCount=0:0==this._downCount&&(s&&(this._enterCount>0||-1===this._enterCount)&&this.onPointerClickObservable.notifyObservers(new it(e,o),-1,t,this),this.onPointerUpObservable.notifyObservers(new it(e,o),-1,t,this),this.pointerUpAnimation&&this.pointerUpAnimation())}forcePointerUp(t=null){if(null!==t)this._onPointerUp(this,n.Vector3.Zero(),t,0,!0);else{for(const t in this._downPointerIds)this._onPointerUp(this,n.Vector3.Zero(),+t,0,!0);this._downCount>0&&(this._downCount=1,this._onPointerUp(this,n.Vector3.Zero(),0,0,!0))}}_processObservables(t,e,i,o,s){if(this._IsTouchButton3D(this)&&i&&(t=this._generatePointerEventType(t,i,this._downCount)),t===n.PointerEventTypes.POINTERMOVE){this._onPointerMove(this,e);const t=this._host._lastControlOver[o];return t&&t!==this&&t._onPointerOut(this),t!==this&&this._onPointerEnter(this),this._host._lastControlOver[o]=this,!0}return t===n.PointerEventTypes.POINTERDOWN?(this._onPointerDown(this,e,o,s),this._host._lastControlDown[o]=this,this._host._lastPickedControl=this,!0):(t===n.PointerEventTypes.POINTERUP||t===n.PointerEventTypes.POINTERDOUBLETAP)&&(this._host._lastControlDown[o]&&this._host._lastControlDown[o]._onPointerUp(this,e,o,s,!0),delete this._host._lastControlDown[o],!0)}_disposeNode(){this._node&&(this._node.dispose(),this._node=null)}dispose(){this.onPointerDownObservable.clear(),this.onPointerEnterObservable.clear(),this.onPointerMoveObservable.clear(),this.onPointerOutObservable.clear(),this.onPointerUpObservable.clear(),this.onPointerClickObservable.clear(),this._disposeNode();for(const t of this._behaviors)t.detach()}}class st extends ot{constructor(){super(...arguments),this._contentResolution=512,this._contentScaleRatio=2}get content(){return this._content}set content(t){this._content=t,t&&this._host&&this._host.utilityLayer&&(this._facadeTexture?this._facadeTexture.rootContainer.clearControls():(this._facadeTexture=new $("Facade",this._contentResolution,this._contentResolution,this._host.utilityLayer.utilityLayerScene,!0,n.Texture.TRILINEAR_SAMPLINGMODE),this._facadeTexture.rootContainer.scaleX=this._contentScaleRatio,this._facadeTexture.rootContainer.scaleY=this._contentScaleRatio,this._facadeTexture.premulAlpha=!0),this._facadeTexture.addControl(t),this._applyFacade(this._facadeTexture))}get contentResolution(){return this._contentResolution}set contentResolution(t){this._contentResolution!==t&&(this._contentResolution=t,this._resetContent())}_disposeFacadeTexture(){this._facadeTexture&&(this._facadeTexture.dispose(),this._facadeTexture=null)}_resetContent(){this._disposeFacadeTexture(),this.content=this._content}_applyFacade(t){}}class nt extends st{constructor(t){super(t)}_getTypeName(){return"AbstractButton3D"}_createNode(t){return new n.TransformNode("button"+this.name)}}class rt extends nt{constructor(t){super(t),this.pointerEnterAnimation=()=>{this.mesh&&(this._currentMaterial.emissiveColor=n.Color3.Red())},this.pointerOutAnimation=()=>{this._currentMaterial.emissiveColor=n.Color3.Black()},this.pointerDownAnimation=()=>{this.mesh&&this.mesh.scaling.scaleInPlace(.95)},this.pointerUpAnimation=()=>{this.mesh&&this.mesh.scaling.scaleInPlace(1/.95)}}_applyFacade(t){this._currentMaterial.emissiveTexture=t}_getTypeName(){return"Button3D"}_createNode(t){const e=new Array(6);for(let t=0;t<6;t++)e[t]=new n.Vector4(0,0,0,0);return t.useRightHandedSystem?e[0].copyFromFloats(1,0,0,1):e[1].copyFromFloats(0,0,1,1),(0,n.CreateBox)(this.name+"_rootMesh",{width:1,height:1,depth:.08,faceUV:e,wrap:!0},t)}_affectMaterial(t){const e=new n.StandardMaterial(this.name+"Material",t.getScene());e.specularColor=n.Color3.Black(),t.material=e,this._currentMaterial=e,this._resetContent()}dispose(){super.dispose(),this._disposeFacadeTexture(),this._currentMaterial&&this._currentMaterial.dispose()}}class at extends ot{constructor(t){super(t),this._blockLayout=!1,this._children=new Array}get children(){return this._children}get blockLayout(){return this._blockLayout}set blockLayout(t){this._blockLayout!==t&&(this._blockLayout=t,this._blockLayout||this._arrangeChildren())}updateLayout(){return this._arrangeChildren(),this}containsControl(t){return-1!==this._children.indexOf(t)}addControl(t){return-1!==this._children.indexOf(t)||(t.parent=this,t._host=this._host,this._children.push(t),this._host.utilityLayer&&(t._prepareNode(this._host.utilityLayer.utilityLayerScene),t.node&&(t.node.parent=this.node),this.blockLayout||this._arrangeChildren())),this}_arrangeChildren(){}_createNode(t){return new n.TransformNode("ContainerNode",t)}removeControl(t){const e=this._children.indexOf(t);return-1!==e&&(this._children.splice(e,1),t.parent=null,t._disposeNode()),this}_getTypeName(){return"Container3D"}dispose(){for(const t of this._children)t.dispose();this._children=[],super.dispose()}}at.UNSET_ORIENTATION=0,at.FACEORIGIN_ORIENTATION=1,at.FACEORIGINREVERSED_ORIENTATION=2,at.FACEFORWARD_ORIENTATION=3,at.FACEFORWARDREVERSED_ORIENTATION=4;class lt extends at{constructor(t){super(t),this._columns=10,this._rows=0,this._rowThenColum=!0,this._orientation=at.FACEORIGIN_ORIENTATION,this.margin=0}get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,n.Tools.SetImmediate((()=>{this._arrangeChildren()})))}get columns(){return this._columns}set columns(t){this._columns!==t&&(this._columns=t,this._rowThenColum=!0,n.Tools.SetImmediate((()=>{this._arrangeChildren()})))}get rows(){return this._rows}set rows(t){this._rows!==t&&(this._rows=t,this._rowThenColum=!1,n.Tools.SetImmediate((()=>{this._arrangeChildren()})))}_arrangeChildren(){this._cellWidth=0,this._cellHeight=0;let t=0,e=0,i=0;const o=n.Matrix.Invert(this.node.computeWorldMatrix(!0));for(var s of this._children){if(!s.mesh)continue;i++,s.mesh.computeWorldMatrix(!0);const t=s.mesh.getHierarchyBoundingVectors(),e=n.TmpVectors.Vector3[0],r=n.TmpVectors.Vector3[1];t.max.subtractToRef(t.min,r),r.scaleInPlace(.5),n.Vector3.TransformNormalToRef(r,o,e),this._cellWidth=Math.max(this._cellWidth,2*e.x),this._cellHeight=Math.max(this._cellHeight,2*e.y)}this._cellWidth+=2*this.margin,this._cellHeight+=2*this.margin,this._rowThenColum?(e=this._columns,t=Math.ceil(i/this._columns)):(t=this._rows,e=Math.ceil(i/this._rows));const r=.5*e*this._cellWidth,a=.5*t*this._cellHeight,l=[];let _=0;if(this._rowThenColum)for(var h=0;h<t;h++)for(var c=0;c<e&&(l.push(new n.Vector3(c*this._cellWidth-r+this._cellWidth/2,h*this._cellHeight-a+this._cellHeight/2,0)),_++,!(_>i));c++);else for(c=0;c<e;c++)for(h=0;h<t&&(l.push(new n.Vector3(c*this._cellWidth-r+this._cellWidth/2,h*this._cellHeight-a+this._cellHeight/2,0)),_++,!(_>i));h++);for(var s of(_=0,this._children))s.mesh&&(this._mapGridNode(s,l[_]),_++);this._finalProcessing()}_finalProcessing(){}}class _t extends lt{constructor(){super(...arguments),this._radius=5}get radius(){return this._radius}set radius(t){this._radius!==t&&(this._radius=t,n.Tools.SetImmediate((()=>{this._arrangeChildren()})))}_mapGridNode(t,e){const i=t.mesh;if(!i)return;const o=this._cylindricalMapping(e);switch(t.position=o,this.orientation){case at.FACEORIGIN_ORIENTATION:i.lookAt(new n.Vector3(2*o.x,o.y,2*o.z));break;case at.FACEORIGINREVERSED_ORIENTATION:i.lookAt(new n.Vector3(-o.x,o.y,-o.z));break;case at.FACEFORWARD_ORIENTATION:break;case at.FACEFORWARDREVERSED_ORIENTATION:i.rotate(n.Axis.Y,Math.PI,n.Space.LOCAL)}}_cylindricalMapping(t){const e=new n.Vector3(0,t.y,this._radius),i=t.x/this._radius;return n.Matrix.RotationYawPitchRollToRef(i,0,0,n.TmpVectors.Matrix[0]),n.Vector3.TransformNormal(e,n.TmpVectors.Matrix[0])}}n.ShaderStore.ShadersStore.fluentVertexShader="precision highp float;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nuniform mat4 world;\nuniform mat4 viewProjection;\nvarying vec2 vUV;\n#ifdef BORDER\nvarying vec2 scaleInfo;\nuniform float borderWidth;\nuniform vec3 scaleFactor;\n#endif\n#ifdef HOVERLIGHT\nvarying vec3 worldPosition;\n#endif\nvoid main(void) {\nvUV=uv;\n#ifdef BORDER\nvec3 scale=scaleFactor;\nfloat minScale=min(min(scale.x,scale.y),scale.z);\nfloat maxScale=max(max(scale.x,scale.y),scale.z);\nfloat minOverMiddleScale=minScale/(scale.x+scale.y+scale.z-minScale-maxScale);\nfloat areaYZ=scale.y*scale.z;\nfloat areaXZ=scale.x*scale.z;\nfloat areaXY=scale.x*scale.y;\nfloat scaledBorderWidth=borderWidth; \nif (abs(normal.x)==1.0) \n{\nscale.x=scale.y;\nscale.y=scale.z;\nif (areaYZ>areaXZ && areaYZ>areaXY)\n{\nscaledBorderWidth*=minOverMiddleScale;\n}\n}\nelse if (abs(normal.y)==1.0) \n{\nscale.x=scale.z;\nif (areaXZ>areaXY && areaXZ>areaYZ)\n{\nscaledBorderWidth*=minOverMiddleScale;\n}\n}\nelse \n{\nif (areaXY>areaYZ && areaXY>areaXZ)\n{\nscaledBorderWidth*=minOverMiddleScale;\n}\n}\nfloat scaleRatio=min(scale.x,scale.y)/max(scale.x,scale.y);\nif (scale.x>scale.y)\n{\nscaleInfo.x=1.0-(scaledBorderWidth*scaleRatio);\nscaleInfo.y=1.0-scaledBorderWidth;\n}\nelse\n{\nscaleInfo.x=1.0-scaledBorderWidth;\nscaleInfo.y=1.0-(scaledBorderWidth*scaleRatio);\n} \n#endif \nvec4 worldPos=world*vec4(position,1.0);\n#ifdef HOVERLIGHT\nworldPosition=worldPos.xyz;\n#endif\ngl_Position=viewProjection*worldPos;\n}\n";n.ShaderStore.ShadersStore.fluentPixelShader="precision highp float;\nvarying vec2 vUV;\nuniform vec4 albedoColor;\n#ifdef INNERGLOW\nuniform vec4 innerGlowColor;\n#endif\n#ifdef BORDER\nvarying vec2 scaleInfo;\nuniform float edgeSmoothingValue;\nuniform float borderMinValue;\n#endif\n#ifdef HOVERLIGHT\nvarying vec3 worldPosition;\nuniform vec3 hoverPosition;\nuniform vec4 hoverColor;\nuniform float hoverRadius;\n#endif\n#ifdef TEXTURE\nuniform sampler2D albedoSampler;\nuniform mat4 textureMatrix;\nvec2 finalUV;\n#endif\nvoid main(void) {\nvec3 albedo=albedoColor.rgb;\nfloat alpha=albedoColor.a;\n#ifdef TEXTURE\nfinalUV=vec2(textureMatrix*vec4(vUV,1.0,0.0));\nalbedo=texture2D(albedoSampler,finalUV).rgb;\n#endif\n#ifdef HOVERLIGHT\nfloat pointToHover=(1.0-clamp(length(hoverPosition-worldPosition)/hoverRadius,0.,1.))*hoverColor.a;\nalbedo=clamp(albedo+hoverColor.rgb*pointToHover,0.,1.);\n#else\nfloat pointToHover=1.0;\n#endif\n#ifdef BORDER \nfloat borderPower=10.0;\nfloat inverseBorderPower=1.0/borderPower;\nvec3 borderColor=albedo*borderPower;\nvec2 distanceToEdge;\ndistanceToEdge.x=abs(vUV.x-0.5)*2.0;\ndistanceToEdge.y=abs(vUV.y-0.5)*2.0;\nfloat borderValue=max(smoothstep(scaleInfo.x-edgeSmoothingValue,scaleInfo.x+edgeSmoothingValue,distanceToEdge.x),\nsmoothstep(scaleInfo.y-edgeSmoothingValue,scaleInfo.y+edgeSmoothingValue,distanceToEdge.y));\nborderColor=borderColor*borderValue*max(borderMinValue*inverseBorderPower,pointToHover); \nalbedo+=borderColor;\nalpha=max(alpha,borderValue);\n#endif\n#ifdef INNERGLOW\nvec2 uvGlow=(vUV-vec2(0.5,0.5))*(innerGlowColor.a*2.0);\nuvGlow=uvGlow*uvGlow;\nuvGlow=uvGlow*uvGlow;\nalbedo+=mix(vec3(0.0,0.0,0.0),innerGlowColor.rgb,uvGlow.x+uvGlow.y); \n#endif\ngl_FragColor=vec4(albedo,alpha);\n}";class ht extends n.MaterialDefines{constructor(){super(),this.INNERGLOW=!1,this.BORDER=!1,this.HOVERLIGHT=!1,this.TEXTURE=!1,this.rebuild()}}class ct extends n.PushMaterial{constructor(t,e){super(t,e),this.innerGlowColorIntensity=.5,this.innerGlowColor=new n.Color3(1,1,1),this.albedoColor=new n.Color3(.3,.35,.4),this.renderBorders=!1,this.borderWidth=.5,this.edgeSmoothingValue=.02,this.borderMinValue=.1,this.renderHoverLight=!1,this.hoverRadius=.01,this.hoverColor=new n.Color4(.3,.3,.3,1),this.hoverPosition=n.Vector3.Zero()}needAlphaBlending(){return 1!==this.alpha}needAlphaTesting(){return!1}getAlphaTestTexture(){return null}isReadyForSubMesh(t,e,i){if(this.isFrozen&&e.effect&&e.effect._wasPreviouslyReady)return!0;e.materialDefines||(e.materialDefines=new ht);const o=this.getScene(),s=e.materialDefines;if(!this.checkReadyOnEveryCall&&e.effect&&s._renderId===o.getRenderId())return!0;if(s._areTexturesDirty)if(s.INNERGLOW=this.innerGlowColorIntensity>0,s.BORDER=this.renderBorders,s.HOVERLIGHT=this.renderHoverLight,this._albedoTexture){if(!this._albedoTexture.isReadyOrNotBlocking())return!1;s.TEXTURE=!0}else s.TEXTURE=!1;const r=o.getEngine();if(s.isDirty){s.markAsProcessed(),o.resetCachedMaterial();const t=[n.VertexBuffer.PositionKind];t.push(n.VertexBuffer.NormalKind),t.push(n.VertexBuffer.UVKind);const i="fluent",a=["world","viewProjection","innerGlowColor","albedoColor","borderWidth","edgeSmoothingValue","scaleFactor","borderMinValue","hoverColor","hoverPosition","hoverRadius","textureMatrix"],l=["albedoSampler"],_=new Array;n.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:a,uniformBuffersNames:_,samplers:l,defines:s,maxSimultaneousLights:4});const h=s.toString();e.setEffect(o.getEngine().createEffect(i,{attributes:t,uniformsNames:a,uniformBuffersNames:_,samplers:l,defines:h,fallbacks:null,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},r),s,this._materialContext)}return!(!e.effect||!e.effect.isReady()||(s._renderId=o.getRenderId(),e.effect._wasPreviouslyReady=!0,0))}bindForSubMesh(t,e,i){const o=this.getScene(),s=i.materialDefines;if(!s)return;const r=i.effect;if(r){if(this._activeEffect=r,this.bindOnlyWorldMatrix(t),this._activeEffect.setMatrix("viewProjection",o.getTransformMatrix()),this._mustRebind(o,r)&&(this._activeEffect.setColor4("albedoColor",this.albedoColor,this.alpha),s.INNERGLOW&&this._activeEffect.setColor4("innerGlowColor",this.innerGlowColor,this.innerGlowColorIntensity),s.BORDER&&(this._activeEffect.setFloat("borderWidth",this.borderWidth),this._activeEffect.setFloat("edgeSmoothingValue",this.edgeSmoothingValue),this._activeEffect.setFloat("borderMinValue",this.borderMinValue),e.getBoundingInfo().boundingBox.extendSize.multiplyToRef(e.scaling,n.TmpVectors.Vector3[0]),this._activeEffect.setVector3("scaleFactor",n.TmpVectors.Vector3[0])),s.HOVERLIGHT&&(this._activeEffect.setDirectColor4("hoverColor",this.hoverColor),this._activeEffect.setFloat("hoverRadius",this.hoverRadius),this._activeEffect.setVector3("hoverPosition",this.hoverPosition)),s.TEXTURE&&this._albedoTexture)){this._activeEffect.setTexture("albedoSampler",this._albedoTexture);const t=this._albedoTexture.getTextureMatrix();this._activeEffect.setMatrix("textureMatrix",t)}this._afterBind(e,this._activeEffect)}}getActiveTextures(){return super.getActiveTextures()}hasTexture(t){return!!super.hasTexture(t)}dispose(t){super.dispose(t)}clone(t){return n.SerializationHelper.Clone((()=>new ct(t,this.getScene())),this)}serialize(){const t=super.serialize();return t.customType="BABYLON.GUI.FluentMaterial",t}getClassName(){return"FluentMaterial"}static Parse(t,e,i){return n.SerializationHelper.Parse((()=>new ct(t.name,e)),t,e,i)}}i([(0,n.serialize)(),(0,n.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],ct.prototype,"innerGlowColorIntensity",void 0),i([(0,n.serializeAsColor3)()],ct.prototype,"innerGlowColor",void 0),i([(0,n.serializeAsColor3)()],ct.prototype,"albedoColor",void 0),i([(0,n.serialize)(),(0,n.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],ct.prototype,"renderBorders",void 0),i([(0,n.serialize)()],ct.prototype,"borderWidth",void 0),i([(0,n.serialize)()],ct.prototype,"edgeSmoothingValue",void 0),i([(0,n.serialize)()],ct.prototype,"borderMinValue",void 0),i([(0,n.serialize)(),(0,n.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],ct.prototype,"renderHoverLight",void 0),i([(0,n.serialize)()],ct.prototype,"hoverRadius",void 0),i([(0,n.serializeAsColor4)()],ct.prototype,"hoverColor",void 0),i([(0,n.serializeAsVector3)()],ct.prototype,"hoverPosition",void 0),i([(0,n.serializeAsTexture)("albedoTexture")],ct.prototype,"_albedoTexture",void 0),i([(0,n.expandToProperty)("_markAllSubMeshesAsTexturesAndMiscDirty")],ct.prototype,"albedoTexture",void 0),(0,n.RegisterClass)("BABYLON.GUI.FluentMaterial",ct);class dt extends rt{constructor(t,e=!0){super(t),this._shareMaterials=!0,this._shareMaterials=e,this.pointerEnterAnimation=()=>{this.mesh&&this._frontPlate.setEnabled(!0)},this.pointerOutAnimation=()=>{this.mesh&&this._frontPlate.setEnabled(!1)}}_disposeTooltip(){this._tooltipFade=null,this._tooltipTextBlock&&this._tooltipTextBlock.dispose(),this._tooltipTexture&&this._tooltipTexture.dispose(),this._tooltipMesh&&this._tooltipMesh.dispose(),this.onPointerEnterObservable.remove(this._tooltipHoverObserver),this.onPointerOutObservable.remove(this._tooltipOutObserver)}set renderingGroupId(t){this._backPlate.renderingGroupId=t,this._textPlate.renderingGroupId=t,this._frontPlate.renderingGroupId=t,this._tooltipMesh&&(this._tooltipMesh.renderingGroupId=t)}get renderingGroupId(){return this._backPlate.renderingGroupId}set tooltipText(t){if(t){if(!this._tooltipFade){const t=this._backPlate._scene.useRightHandedSystem;this._tooltipMesh=(0,n.CreatePlane)("",{size:1},this._backPlate._scene);const e=(0,n.CreatePlane)("",{size:1,sideOrientation:n.Mesh.DOUBLESIDE},this._backPlate._scene),i=new n.StandardMaterial("",this._backPlate._scene);i.diffuseColor=n.Color3.FromHexString("#212121"),e.material=i,e.isPickable=!1,this._tooltipMesh.addChild(e),e.position=n.Vector3.Forward(t).scale(.05),this._tooltipMesh.scaling.y=1/3,this._tooltipMesh.position=n.Vector3.Up().scale(.7).add(n.Vector3.Forward(t).scale(-.15)),this._tooltipMesh.isPickable=!1,this._tooltipMesh.parent=this._backPlate,this._tooltipTexture=$.CreateForMesh(this._tooltipMesh),this._tooltipTextBlock=new v,this._tooltipTextBlock.scaleY=3,this._tooltipTextBlock.color="white",this._tooltipTextBlock.fontSize=130,this._tooltipTexture.addControl(this._tooltipTextBlock),this._tooltipFade=new n.FadeInOutBehavior,this._tooltipFade.delay=500,this._tooltipMesh.addBehavior(this._tooltipFade),this._tooltipHoverObserver=this.onPointerEnterObservable.add((()=>{this._tooltipFade&&this._tooltipFade.fadeIn(!0)})),this._tooltipOutObserver=this.onPointerOutObservable.add((()=>{this._tooltipFade&&this._tooltipFade.fadeIn(!1)}))}this._tooltipTextBlock&&(this._tooltipTextBlock.text=t)}else this._disposeTooltip()}get tooltipText(){return this._tooltipTextBlock?this._tooltipTextBlock.text:null}get text(){return this._text}set text(t){this._text!==t&&(this._text=t,this._rebuildContent())}get imageUrl(){return this._imageUrl}set imageUrl(t){this._imageUrl!==t&&(this._imageUrl=t,this._rebuildContent())}get backMaterial(){return this._backMaterial}get frontMaterial(){return this._frontMaterial}get plateMaterial(){return this._plateMaterial}get shareMaterials(){return this._shareMaterials}_getTypeName(){return"HolographicButton"}_rebuildContent(){this._disposeFacadeTexture();const t=new y;if(t.isVertical=!0,n.DomManagement.IsDocumentAvailable()&&document.createElement&&this._imageUrl){const e=new b;e.source=this._imageUrl,e.paddingTop="40px",e.height="180px",e.width="100px",e.paddingBottom="40px",t.addControl(e)}if(this._text){const e=new v;e.text=this._text,e.color="white",e.height="30px",e.fontSize=24,t.addControl(e)}this._frontPlate&&(this.content=t)}_createNode(t){return this._backPlate=(0,n.CreateBox)(this.name+"BackMesh",{width:1,height:1,depth:.08},t),this._frontPlate=(0,n.CreateBox)(this.name+"FrontMesh",{width:1,height:1,depth:.08},t),this._frontPlate.parent=this._backPlate,this._frontPlate.position=n.Vector3.Forward(t.useRightHandedSystem).scale(-.08),this._frontPlate.isPickable=!1,this._frontPlate.setEnabled(!1),this._textPlate=super._createNode(t),this._textPlate.parent=this._backPlate,this._textPlate.position=n.Vector3.Forward(t.useRightHandedSystem).scale(-.08),this._textPlate.isPickable=!1,this._backPlate}_applyFacade(t){this._plateMaterial.emissiveTexture=t,this._plateMaterial.opacityTexture=t}_createBackMaterial(t){this._backMaterial=new ct(this.name+"Back Material",t.getScene()),this._backMaterial.renderHoverLight=!0,this._pickedPointObserver=this._host.onPickedPointChangedObservable.add((t=>{t?(this._backMaterial.hoverPosition=t,this._backMaterial.hoverColor.a=1):this._backMaterial.hoverColor.a=0}))}_createFrontMaterial(t){this._frontMaterial=new ct(this.name+"Front Material",t.getScene()),this._frontMaterial.innerGlowColorIntensity=0,this._frontMaterial.alpha=.5,this._frontMaterial.renderBorders=!0}_createPlateMaterial(t){this._plateMaterial=new n.StandardMaterial(this.name+"Plate Material",t.getScene()),this._plateMaterial.specularColor=n.Color3.Black()}_affectMaterial(t){this._shareMaterials?(this._host._sharedMaterials.backFluentMaterial?this._backMaterial=this._host._sharedMaterials.backFluentMaterial:(this._createBackMaterial(t),this._host._sharedMaterials.backFluentMaterial=this._backMaterial),this._host._sharedMaterials.frontFluentMaterial?this._frontMaterial=this._host._sharedMaterials.frontFluentMaterial:(this._createFrontMaterial(t),this._host._sharedMaterials.frontFluentMaterial=this._frontMaterial)):(this._createBackMaterial(t),this._createFrontMaterial(t)),this._createPlateMaterial(t),this._backPlate.material=this._backMaterial,this._frontPlate.material=this._frontMaterial,this._textPlate.material=this._plateMaterial,this._rebuildContent()}dispose(){super.dispose(),this._disposeTooltip(),this.shareMaterials||(this._backMaterial.dispose(),this._frontMaterial.dispose(),this._plateMaterial.dispose(),this._pickedPointObserver&&(this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver),this._pickedPointObserver=null))}}n.ShaderStore.ShadersStore.fluentButtonPixelShader="uniform vec3 cameraPosition;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec4 vColor;\nvarying vec4 vExtra1;\nuniform float _Edge_Width_;\nuniform vec4 _Edge_Color_;\nuniform bool _Relative_Width_;\nuniform float _Proximity_Max_Intensity_;\nuniform float _Proximity_Far_Distance_;\nuniform float _Proximity_Near_Radius_;\nuniform float _Proximity_Anisotropy_;\nuniform float _Selection_Fuzz_;\nuniform float _Selected_;\nuniform float _Selection_Fade_;\nuniform float _Selection_Fade_Size_;\nuniform float _Selected_Distance_;\nuniform float _Selected_Fade_Length_;\nuniform bool _Blob_Enable_;\nuniform vec3 _Blob_Position_;\nuniform float _Blob_Intensity_;\nuniform float _Blob_Near_Size_;\nuniform float _Blob_Far_Size_;\nuniform float _Blob_Near_Distance_;\nuniform float _Blob_Far_Distance_;\nuniform float _Blob_Fade_Length_;\nuniform float _Blob_Inner_Fade_;\nuniform float _Blob_Pulse_;\nuniform float _Blob_Fade_;\nuniform sampler2D _Blob_Texture_;\nuniform bool _Blob_Enable_2_;\nuniform vec3 _Blob_Position_2_;\nuniform float _Blob_Near_Size_2_;\nuniform float _Blob_Inner_Fade_2_;\nuniform float _Blob_Pulse_2_;\nuniform float _Blob_Fade_2_;\nuniform vec3 _Active_Face_Dir_;\nuniform vec3 _Active_Face_Up_;\nuniform bool Enable_Fade;\nuniform float _Fade_Width_;\nuniform bool _Smooth_Active_Face_;\nuniform bool _Show_Frame_;\nuniform bool _Use_Blob_Texture_;\nuniform bool Use_Global_Left_Index;\nuniform bool Use_Global_Right_Index;\nuniform vec4 Global_Left_Index_Tip_Position;\nuniform vec4 Global_Right_Index_Tip_Position;\nuniform vec4 Global_Left_Thumb_Tip_Position;\nuniform vec4 Global_Right_Thumb_Tip_Position;\nuniform float Global_Left_Index_Tip_Proximity;\nuniform float Global_Right_Index_Tip_Proximity;\nvoid Holo_Edge_Fragment_B35(\nvec4 Edges,\nfloat Edge_Width,\nout float NotEdge)\n{\nvec2 c=vec2(min(Edges.r,Edges.g),min(Edges.b,Edges.a));\nvec2 df=fwidth(c)*Edge_Width;\nvec2 g=clamp(c/df,0.0,1.0);\nNotEdge=g.x*g.y;\n}\nvoid Blob_Fragment_B39(\nvec2 UV,\nvec3 Blob_Info,\nsampler2D Blob_Texture,\nout vec4 Blob_Color)\n{\nfloat k=dot(UV,UV);\nBlob_Color=Blob_Info.y*texture(Blob_Texture,vec2(vec2(sqrt(k),Blob_Info.x).x,1.0-vec2(sqrt(k),Blob_Info.x).y))*(1.0-clamp(k,0.0,1.0));\n}\nvec2 FilterStep(vec2 Edge,vec2 X)\n{\nvec2 dX=max(fwidth(X),vec2(0.00001,0.00001));\nreturn clamp( (X+dX-max(Edge,X-dX))/(dX*2.0),0.0,1.0);\n}\nvoid Wireframe_Fragment_B59(\nvec3 Widths,\nvec2 UV,\nfloat Proximity,\nvec4 Edge_Color,\nout vec4 Wireframe)\n{\nvec2 c=min(UV,vec2(1.0,1.0)-UV);\nvec2 g=FilterStep(Widths.xy*0.5,c); \nWireframe=(1.0-min(g.x,g.y))*Proximity*Edge_Color;\n}\nvoid Proximity_B53(\nvec3 Proximity_Center,\nvec3 Proximity_Center_2,\nfloat Proximity_Max_Intensity,\nfloat Proximity_Near_Radius,\nvec3 Position,\nvec3 Show_Selection,\nvec4 Extra1,\nfloat Dist_To_Face,\nfloat Intensity,\nout float Proximity)\n{\nvec2 delta1=Extra1.xy;\nvec2 delta2=Extra1.zw;\nfloat d2=sqrt(min(dot(delta1,delta1),dot(delta2,delta2))+Dist_To_Face*Dist_To_Face);\nProximity=Intensity*Proximity_Max_Intensity*(1.0-clamp(d2/Proximity_Near_Radius,0.0,1.0))*(1.0-Show_Selection.x)+Show_Selection.x;\n}\nvoid To_XYZ_B46(\nvec3 Vec3,\nout float X,\nout float Y,\nout float Z)\n{\nX=Vec3.x;\nY=Vec3.y;\nZ=Vec3.z;\n}\nvoid main()\n{\nfloat NotEdge_Q35;\n#if ENABLE_FADE\nHolo_Edge_Fragment_B35(vColor,_Fade_Width_,NotEdge_Q35);\n#else\nNotEdge_Q35=1.0;\n#endif\nvec4 Blob_Color_Q39;\nfloat k=dot(vUV,vUV);\nvec2 blobTextureCoord=vec2(vec2(sqrt(k),vTangent.x).x,1.0-vec2(sqrt(k),vTangent.x).y);\nvec4 blobColor=mix(vec4(1.0,1.0,1.0,1.0)*step(1.0-vTangent.x,clamp(sqrt(k)+0.1,0.0,1.0)),texture(_Blob_Texture_,blobTextureCoord),float(_Use_Blob_Texture_));\nBlob_Color_Q39=vTangent.y*blobColor*(1.0-clamp(k,0.0,1.0));\nfloat Is_Quad_Q24;\nIs_Quad_Q24=vNormal.z;\nvec3 Blob_Position_Q41= mix(_Blob_Position_,Global_Left_Index_Tip_Position.xyz,float(Use_Global_Left_Index));\nvec3 Blob_Position_Q42= mix(_Blob_Position_2_,Global_Right_Index_Tip_Position.xyz,float(Use_Global_Right_Index));\nfloat X_Q46;\nfloat Y_Q46;\nfloat Z_Q46;\nTo_XYZ_B46(vBinormal,X_Q46,Y_Q46,Z_Q46);\nfloat Proximity_Q53;\nProximity_B53(Blob_Position_Q41,Blob_Position_Q42,_Proximity_Max_Intensity_,_Proximity_Near_Radius_,vPosition,vBinormal,vExtra1,Y_Q46,Z_Q46,Proximity_Q53);\nvec4 Wireframe_Q59;\nWireframe_Fragment_B59(vNormal,vUV,Proximity_Q53,_Edge_Color_,Wireframe_Q59);\nvec4 Wire_Or_Blob_Q23=mix(Wireframe_Q59,Blob_Color_Q39,Is_Quad_Q24);\nvec4 Result_Q22;\nResult_Q22=mix(Wire_Or_Blob_Q23,vec4(0.3,0.3,0.3,0.3),float(_Show_Frame_));\nvec4 Final_Color_Q37=NotEdge_Q35*Result_Q22;\nvec4 Out_Color=Final_Color_Q37;\nfloat Clip_Threshold=0.0;\nbool To_sRGB=false;\ngl_FragColor=Out_Color;\n}";n.ShaderStore.ShadersStore.fluentButtonVertexShader="uniform mat4 world;\nuniform mat4 viewProjection;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec3 tangent;\nattribute vec4 color;\nuniform float _Edge_Width_;\nuniform vec4 _Edge_Color_;\nuniform float _Proximity_Max_Intensity_;\nuniform float _Proximity_Far_Distance_;\nuniform float _Proximity_Near_Radius_;\nuniform float _Proximity_Anisotropy_;\nuniform float _Selection_Fuzz_;\nuniform float _Selected_;\nuniform float _Selection_Fade_;\nuniform float _Selection_Fade_Size_;\nuniform float _Selected_Distance_;\nuniform float _Selected_Fade_Length_;\nuniform bool _Blob_Enable_;\nuniform vec3 _Blob_Position_;\nuniform float _Blob_Intensity_;\nuniform float _Blob_Near_Size_;\nuniform float _Blob_Far_Size_;\nuniform float _Blob_Near_Distance_;\nuniform float _Blob_Far_Distance_;\nuniform float _Blob_Fade_Length_;\nuniform float _Blob_Inner_Fade_;\nuniform float _Blob_Pulse_;\nuniform float _Blob_Fade_;\nuniform sampler2D _Blob_Texture_;\nuniform bool _Blob_Enable_2_;\nuniform vec3 _Blob_Position_2_;\nuniform float _Blob_Near_Size_2_;\nuniform float _Blob_Inner_Fade_2_;\nuniform float _Blob_Pulse_2_;\nuniform float _Blob_Fade_2_;\nuniform vec3 _Active_Face_Dir_;\nuniform vec3 _Active_Face_Up_;\nuniform bool _Enable_Fade_;\nuniform float _Fade_Width_;\nuniform bool _Smooth_Active_Face_;\nuniform bool _Show_Frame_;\nuniform bool Use_Global_Left_Index;\nuniform bool Use_Global_Right_Index;\nuniform vec4 Global_Left_Index_Tip_Position;\nuniform vec4 Global_Right_Index_Tip_Position;\nuniform vec4 Global_Left_Thumb_Tip_Position;\nuniform vec4 Global_Right_Thumb_Tip_Position;\nuniform float Global_Left_Index_Tip_Proximity;\nuniform float Global_Right_Index_Tip_Proximity;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec4 vColor;\nvarying vec4 vExtra1;\nvoid Blob_Vertex_B47(\nvec3 Position,\nvec3 Normal,\nvec3 Tangent,\nvec3 Bitangent,\nvec3 Blob_Position,\nfloat Intensity,\nfloat Blob_Near_Size,\nfloat Blob_Far_Size,\nfloat Blob_Near_Distance,\nfloat Blob_Far_Distance,\nvec4 Vx_Color,\nvec2 UV,\nvec3 Face_Center,\nvec2 Face_Size,\nvec2 In_UV,\nfloat Blob_Fade_Length,\nfloat Selection_Fade,\nfloat Selection_Fade_Size,\nfloat Inner_Fade,\nvec3 Active_Face_Center,\nfloat Blob_Pulse,\nfloat Blob_Fade,\nfloat Blob_Enabled,\nout vec3 Out_Position,\nout vec2 Out_UV,\nout vec3 Blob_Info)\n{\nfloat blobSize,fadeIn;\nvec3 Hit_Position;\nBlob_Info=vec3(0.0,0.0,0.0);\nfloat Hit_Distance=dot(Blob_Position-Face_Center,Normal);\nHit_Position=Blob_Position-Hit_Distance*Normal;\nfloat absD=abs(Hit_Distance);\nfloat lerpVal=clamp((absD-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);\nfadeIn=1.0-clamp((absD-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);\nfloat innerFade=1.0-clamp(-Hit_Distance/Inner_Fade,0.0,1.0);\nfloat farClip=clamp(1.0-step(Blob_Far_Distance+Blob_Fade_Length,absD),0.0,1.0);\nfloat size=mix(Blob_Near_Size,Blob_Far_Size,lerpVal)*farClip;\nblobSize=mix(size,Selection_Fade_Size,Selection_Fade)*innerFade*Blob_Enabled;\nBlob_Info.x=lerpVal*0.5+0.5;\nBlob_Info.y=fadeIn*Intensity*(1.0-Selection_Fade)*Blob_Fade;\nBlob_Info.x*=(1.0-Blob_Pulse);\nvec3 delta=Hit_Position-Face_Center;\nvec2 blobCenterXY=vec2(dot(delta,Tangent),dot(delta,Bitangent));\nvec2 quadUVin=2.0*UV-1.0; \nvec2 blobXY=blobCenterXY+quadUVin*blobSize;\nvec2 blobClipped=clamp(blobXY,-Face_Size*0.5,Face_Size*0.5);\nvec2 blobUV=(blobClipped-blobCenterXY)/max(blobSize,0.0001)*2.0;\nvec3 blobCorner=Face_Center+blobClipped.x*Tangent+blobClipped.y*Bitangent;\nOut_Position=mix(Position,blobCorner,Vx_Color.rrr);\nOut_UV=mix(In_UV,blobUV,Vx_Color.rr);\n}\nvec2 ProjectProximity(\nvec3 blobPosition,\nvec3 position,\nvec3 center,\nvec3 dir,\nvec3 xdir,\nvec3 ydir,\nout float vdistance\n)\n{\nvec3 delta=blobPosition-position;\nvec2 xy=vec2(dot(delta,xdir),dot(delta,ydir));\nvdistance=abs(dot(delta,dir));\nreturn xy;\n}\nvoid Proximity_Vertex_B66(\nvec3 Blob_Position,\nvec3 Blob_Position_2,\nvec3 Active_Face_Center,\nvec3 Active_Face_Dir,\nvec3 Position,\nfloat Proximity_Far_Distance,\nfloat Relative_Scale,\nfloat Proximity_Anisotropy,\nvec3 Up,\nout vec4 Extra1,\nout float Distance_To_Face,\nout float Intensity)\n{\nvec3 Active_Face_Dir_X=normalize(cross(Active_Face_Dir,Up));\nvec3 Active_Face_Dir_Y=cross(Active_Face_Dir,Active_Face_Dir_X);\nfloat distz1,distz2;\nExtra1.xy=ProjectProximity(Blob_Position,Position,Active_Face_Center,Active_Face_Dir,Active_Face_Dir_X*Proximity_Anisotropy,Active_Face_Dir_Y,distz1)/Relative_Scale;\nExtra1.zw=ProjectProximity(Blob_Position_2,Position,Active_Face_Center,Active_Face_Dir,Active_Face_Dir_X*Proximity_Anisotropy,Active_Face_Dir_Y,distz2)/Relative_Scale;\nDistance_To_Face=dot(Active_Face_Dir,Position-Active_Face_Center);\nIntensity=1.0-clamp(min(distz1,distz2)/Proximity_Far_Distance,0.0,1.0);\n}\nvoid Holo_Edge_Vertex_B44(\nvec3 Incident,\nvec3 Normal,\nvec2 UV,\nvec3 Tangent,\nvec3 Bitangent,\nbool Smooth_Active_Face,\nfloat Active,\nout vec4 Holo_Edges)\n{\nfloat NdotI=dot(Incident,Normal);\nvec2 flip=(UV-vec2(0.5,0.5));\nfloat udot=dot(Incident,Tangent)*flip.x*NdotI;\nfloat uval=1.0-float(udot>0.0);\nfloat vdot=-dot(Incident,Bitangent)*flip.y*NdotI;\nfloat vval=1.0-float(vdot>0.0);\nfloat Smooth_And_Active=step(1.0,float(Smooth_Active_Face && Active>0.0));\nuval=mix(uval,max(1.0,uval),Smooth_And_Active); \nvval=mix(vval,max(1.0,vval),Smooth_And_Active);\nHolo_Edges=vec4(1.0,1.0,1.0,1.0)-vec4(uval*UV.x,uval*(1.0-UV.x),vval*UV.y,vval*(1.0-UV.y));\n}\nvoid Object_To_World_Pos_B13(\nvec3 Pos_Object,\nout vec3 Pos_World)\n{\nPos_World=(world*vec4(Pos_Object,1.0)).xyz;\n}\nvoid Choose_Blob_B38(\nvec4 Vx_Color,\nvec3 Position1,\nvec3 Position2,\nbool Blob_Enable_1,\nbool Blob_Enable_2,\nfloat Near_Size_1,\nfloat Near_Size_2,\nfloat Blob_Inner_Fade_1,\nfloat Blob_Inner_Fade_2,\nfloat Blob_Pulse_1,\nfloat Blob_Pulse_2,\nfloat Blob_Fade_1,\nfloat Blob_Fade_2,\nout vec3 Position,\nout float Near_Size,\nout float Inner_Fade,\nout float Blob_Enable,\nout float Fade,\nout float Pulse)\n{\nPosition=Position1*(1.0-Vx_Color.g)+Vx_Color.g*Position2;\nfloat b1=float(Blob_Enable_1);\nfloat b2=float(Blob_Enable_2);\nBlob_Enable=b1+(b2-b1)*Vx_Color.g;\nPulse=Blob_Pulse_1*(1.0-Vx_Color.g)+Vx_Color.g*Blob_Pulse_2;\nFade=Blob_Fade_1*(1.0-Vx_Color.g)+Vx_Color.g*Blob_Fade_2;\nNear_Size=Near_Size_1*(1.0-Vx_Color.g)+Vx_Color.g*Near_Size_2;\nInner_Fade=Blob_Inner_Fade_1*(1.0-Vx_Color.g)+Vx_Color.g*Blob_Inner_Fade_2;\n}\nvoid Wireframe_Vertex_B51(\nvec3 Position,\nvec3 Normal,\nvec3 Tangent,\nvec3 Bitangent,\nfloat Edge_Width,\nvec2 Face_Size,\nout vec3 Wire_Vx_Pos,\nout vec2 UV,\nout vec2 Widths)\n{\nWidths.xy=Edge_Width/Face_Size;\nfloat x=dot(Position,Tangent);\nfloat y=dot(Position,Bitangent);\nfloat dx=0.5-abs(x);\nfloat newx=(0.5-dx*Widths.x*2.0)*sign(x);\nfloat dy=0.5-abs(y);\nfloat newy=(0.5-dy*Widths.y*2.0)*sign(y);\nWire_Vx_Pos=Normal*0.5+newx*Tangent+newy*Bitangent;\nUV.x=dot(Wire_Vx_Pos,Tangent)+0.5;\nUV.y=dot(Wire_Vx_Pos,Bitangent)+0.5;\n}\nvec2 ramp2(vec2 start,vec2 end,vec2 x)\n{\nreturn clamp((x-start)/(end-start),vec2(0.0,0.0),vec2(1.0,1.0));\n}\nfloat computeSelection(\nvec3 blobPosition,\nvec3 normal,\nvec3 tangent,\nvec3 bitangent,\nvec3 faceCenter,\nvec2 faceSize,\nfloat selectionFuzz,\nfloat farDistance,\nfloat fadeLength\n)\n{\nvec3 delta=blobPosition-faceCenter;\nfloat absD=abs(dot(delta,normal));\nfloat fadeIn=1.0-clamp((absD-farDistance)/fadeLength,0.0,1.0);\nvec2 blobCenterXY=vec2(dot(delta,tangent),dot(delta,bitangent));\nvec2 innerFace=faceSize*(1.0-selectionFuzz)*0.5;\nvec2 selectPulse=ramp2(-faceSize*0.5,-innerFace,blobCenterXY)-ramp2(innerFace,faceSize*0.5,blobCenterXY);\nreturn selectPulse.x*selectPulse.y*fadeIn;\n}\nvoid Selection_Vertex_B48(\nvec3 Blob_Position,\nvec3 Blob_Position_2,\nvec3 Face_Center,\nvec2 Face_Size,\nvec3 Normal,\nvec3 Tangent,\nvec3 Bitangent,\nfloat Selection_Fuzz,\nfloat Selected,\nfloat Far_Distance,\nfloat Fade_Length,\nvec3 Active_Face_Dir,\nout float Show_Selection)\n{\nfloat select1=computeSelection(Blob_Position,Normal,Tangent,Bitangent,Face_Center,Face_Size,Selection_Fuzz,Far_Distance,Fade_Length);\nfloat select2=computeSelection(Blob_Position_2,Normal,Tangent,Bitangent,Face_Center,Face_Size,Selection_Fuzz,Far_Distance,Fade_Length);\nfloat Active=max(0.0,dot(Active_Face_Dir,Normal));\nShow_Selection=mix(max(select1,select2),1.0,Selected)*Active;\n}\nvoid Proximity_Visibility_B54(\nfloat Selection,\nvec3 Proximity_Center,\nvec3 Proximity_Center_2,\nfloat Input_Width,\nfloat Proximity_Far_Distance,\nfloat Proximity_Radius,\nvec3 Active_Face_Center,\nvec3 Active_Face_Dir,\nout float Width)\n{\nvec3 boxEdges=(world*vec4(vec3(0.5,0.5,0.5),0.0)).xyz;\nfloat boxMaxSize=length(boxEdges);\nfloat d1=dot(Proximity_Center-Active_Face_Center,Active_Face_Dir);\nvec3 blob1=Proximity_Center-d1*Active_Face_Dir;\nfloat d2=dot(Proximity_Center_2-Active_Face_Center,Active_Face_Dir);\nvec3 blob2=Proximity_Center_2-d2*Active_Face_Dir;\nvec3 delta1=blob1-Active_Face_Center;\nvec3 delta2=blob2-Active_Face_Center;\nfloat dist1=dot(delta1,delta1);\nfloat dist2=dot(delta2,delta2);\nfloat nearestProxDist=sqrt(min(dist1,dist2));\nWidth=Input_Width*(1.0-step(boxMaxSize+Proximity_Radius,nearestProxDist))*(1.0-step(Proximity_Far_Distance,min(d1,d2))*(1.0-step(0.0001,Selection)));\n}\nvoid Object_To_World_Dir_B67(\nvec3 Dir_Object,\nout vec3 Dir_World)\n{\nDir_World=(world*vec4(Dir_Object,0.0)).xyz;\n}\nvoid main()\n{\nvec3 Active_Face_Center_Q49;\nActive_Face_Center_Q49=(world*vec4(_Active_Face_Dir_*0.5,1.0)).xyz;\nvec3 Blob_Position_Q41= mix(_Blob_Position_,Global_Left_Index_Tip_Position.xyz,float(Use_Global_Left_Index));\nvec3 Blob_Position_Q42= mix(_Blob_Position_2_,Global_Right_Index_Tip_Position.xyz,float(Use_Global_Right_Index));\nvec3 Active_Face_Dir_Q64=normalize((world*vec4(_Active_Face_Dir_,0.0)).xyz);\nfloat Relative_Scale_Q57;\n#if RELATIVE_WIDTH\nRelative_Scale_Q57=length((world*vec4(vec3(0,1,0),0.0)).xyz);\n#else\nRelative_Scale_Q57=1.0;\n#endif\nvec3 Tangent_World_Q30;\nTangent_World_Q30=(world*vec4(tangent,0.0)).xyz;\nvec3 Binormal_World_Q31;\nBinormal_World_Q31=(world*vec4((cross(normal,tangent)),0.0)).xyz;\nvec3 Normal_World_Q60;\nNormal_World_Q60=(world*vec4(normal,0.0)).xyz;\nvec3 Result_Q18=0.5*normal;\nvec3 Dir_World_Q67;\nObject_To_World_Dir_B67(_Active_Face_Up_,Dir_World_Q67);\nfloat Product_Q56=_Edge_Width_*Relative_Scale_Q57;\nvec3 Normal_World_N_Q29=normalize(Normal_World_Q60);\nvec3 Tangent_World_N_Q28=normalize(Tangent_World_Q30);\nvec3 Binormal_World_N_Q32=normalize(Binormal_World_Q31);\nvec3 Position_Q38;\nfloat Near_Size_Q38;\nfloat Inner_Fade_Q38;\nfloat Blob_Enable_Q38;\nfloat Fade_Q38;\nfloat Pulse_Q38;\nChoose_Blob_B38(color,Blob_Position_Q41,Blob_Position_Q42,_Blob_Enable_,_Blob_Enable_2_,_Blob_Near_Size_,_Blob_Near_Size_2_,_Blob_Inner_Fade_,_Blob_Inner_Fade_2_,_Blob_Pulse_,_Blob_Pulse_2_,_Blob_Fade_,_Blob_Fade_2_,Position_Q38,Near_Size_Q38,Inner_Fade_Q38,Blob_Enable_Q38,Fade_Q38,Pulse_Q38);\nvec3 Face_Center_Q33;\nFace_Center_Q33=(world*vec4(Result_Q18,1.0)).xyz;\nvec2 Face_Size_Q50=vec2(length(Tangent_World_Q30),length(Binormal_World_Q31));\nfloat Show_Selection_Q48;\nSelection_Vertex_B48(Blob_Position_Q41,Blob_Position_Q42,Face_Center_Q33,Face_Size_Q50,Normal_World_N_Q29,Tangent_World_N_Q28,Binormal_World_N_Q32,_Selection_Fuzz_,_Selected_,_Selected_Distance_,_Selected_Fade_Length_,Active_Face_Dir_Q64,Show_Selection_Q48);\nvec3 Normalized_Q72=normalize(Dir_World_Q67);\nfloat Active_Q34=max(0.0,dot(Active_Face_Dir_Q64,Normal_World_N_Q29));\nfloat Width_Q54;\nProximity_Visibility_B54(Show_Selection_Q48,Blob_Position_Q41,Blob_Position_Q42,Product_Q56,_Proximity_Far_Distance_,_Proximity_Near_Radius_,Active_Face_Center_Q49,Active_Face_Dir_Q64,Width_Q54);\nvec3 Wire_Vx_Pos_Q51;\nvec2 UV_Q51;\nvec2 Widths_Q51;\nWireframe_Vertex_B51(position,normal,tangent,(cross(normal,tangent)),Width_Q54,Face_Size_Q50,Wire_Vx_Pos_Q51,UV_Q51,Widths_Q51);\nvec3 Vec3_Q27=vec3(Widths_Q51.x,Widths_Q51.y,color.r);\nvec3 Pos_World_Q13;\nObject_To_World_Pos_B13(Wire_Vx_Pos_Q51,Pos_World_Q13);\nvec3 Incident_Q36=normalize(Pos_World_Q13-cameraPosition);\nvec3 Out_Position_Q47;\nvec2 Out_UV_Q47;\nvec3 Blob_Info_Q47;\nBlob_Vertex_B47(Pos_World_Q13,Normal_World_N_Q29,Tangent_World_N_Q28,Binormal_World_N_Q32,Position_Q38,_Blob_Intensity_,Near_Size_Q38,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,color,uv,Face_Center_Q33,Face_Size_Q50,UV_Q51,_Blob_Fade_Length_,_Selection_Fade_,_Selection_Fade_Size_,Inner_Fade_Q38,Active_Face_Center_Q49,Pulse_Q38,Fade_Q38,Blob_Enable_Q38,Out_Position_Q47,Out_UV_Q47,Blob_Info_Q47);\nvec4 Extra1_Q66;\nfloat Distance_To_Face_Q66;\nfloat Intensity_Q66;\nProximity_Vertex_B66(Blob_Position_Q41,Blob_Position_Q42,Active_Face_Center_Q49,Active_Face_Dir_Q64,Pos_World_Q13,_Proximity_Far_Distance_,Relative_Scale_Q57,_Proximity_Anisotropy_,Normalized_Q72,Extra1_Q66,Distance_To_Face_Q66,Intensity_Q66);\nvec4 Holo_Edges_Q44;\nHolo_Edge_Vertex_B44(Incident_Q36,Normal_World_N_Q29,uv,Tangent_World_Q30,Binormal_World_Q31,_Smooth_Active_Face_,Active_Q34,Holo_Edges_Q44);\nvec3 Vec3_Q19=vec3(Show_Selection_Q48,Distance_To_Face_Q66,Intensity_Q66);\nvec3 Position=Out_Position_Q47;\nvec2 UV=Out_UV_Q47;\nvec3 Tangent=Blob_Info_Q47;\nvec3 Binormal=Vec3_Q19;\nvec3 Normal=Vec3_Q27;\nvec4 Extra1=Extra1_Q66;\nvec4 Color=Holo_Edges_Q44;\ngl_Position=viewProjection*vec4(Position,1);\nvPosition=Position;\nvNormal=Normal;\nvUV=UV;\nvTangent=Tangent;\nvBinormal=Binormal;\nvColor=Color;\nvExtra1=Extra1;\n}";class ut extends n.MaterialDefines{constructor(){super(),this.RELATIVE_WIDTH=!0,this.ENABLE_FADE=!0,this._needNormals=!0,this._needUVs=!0,this.rebuild()}}class ft extends n.PushMaterial{constructor(t,e){super(t,e),this.edgeWidth=.04,this.edgeColor=new n.Color4(.592157,.592157,.592157,1),this.proximityMaxIntensity=.45,this.proximityFarDistance=.16,this.proximityNearRadius=1.5,this.proximityAnisotropy=1,this.selectionFuzz=.5,this.selected=0,this.selectionFade=0,this.selectionFadeSize=.3,this.selectedDistance=.08,this.selectedFadeLength=.08,this.blobIntensity=.5,this.blobFarSize=.05,this.blobNearDistance=0,this.blobFarDistance=.08,this.blobFadeLength=.08,this.leftBlobEnable=!0,this.leftBlobNearSize=.025,this.leftBlobPulse=0,this.leftBlobFade=1,this.leftBlobInnerFade=.01,this.rightBlobEnable=!0,this.rightBlobNearSize=.025,this.rightBlobPulse=0,this.rightBlobFade=1,this.rightBlobInnerFade=.01,this.activeFaceDir=new n.Vector3(0,0,-1),this.activeFaceUp=new n.Vector3(0,1,0),this.enableFade=!0,this.fadeWidth=1.5,this.smoothActiveFace=!0,this.showFrame=!1,this.useBlobTexture=!0,this.globalLeftIndexTipPosition=n.Vector3.Zero(),this.globalRightIndexTipPosition=n.Vector3.Zero(),this.alphaMode=n.Constants.ALPHA_ADD,this.disableDepthWrite=!0,this.backFaceCulling=!1,this._blobTexture=new n.Texture(ft.BLOB_TEXTURE_URL,this.getScene(),!0,!1,n.Texture.NEAREST_SAMPLINGMODE)}needAlphaBlending(){return!0}needAlphaTesting(){return!0}getAlphaTestTexture(){return null}isReadyForSubMesh(t,e,i){if(this.isFrozen&&e.effect&&e.effect._wasPreviouslyReady)return!0;e.materialDefines||(e.materialDefines=new ut);const o=e.materialDefines,s=this.getScene();if(this._isReadyForSubMesh(e))return!0;const r=s.getEngine();if(n.MaterialHelper.PrepareDefinesForAttributes(t,o,!0,!1),o.isDirty){o.markAsProcessed(),s.resetCachedMaterial();const t=new n.EffectFallbacks;o.FOG&&t.addFallback(1,"FOG"),n.MaterialHelper.HandleFallbacksForShadows(o,t),o.IMAGEPROCESSINGPOSTPROCESS=s.imageProcessingConfiguration.applyByPostProcess;const i=[n.VertexBuffer.PositionKind];o.NORMAL&&i.push(n.VertexBuffer.NormalKind),o.UV1&&i.push(n.VertexBuffer.UVKind),o.UV2&&i.push(n.VertexBuffer.UV2Kind),o.VERTEXCOLOR&&i.push(n.VertexBuffer.ColorKind),o.TANGENT&&i.push(n.VertexBuffer.TangentKind),n.MaterialHelper.PrepareAttributesForInstances(i,o);const a="fluentButton",l=o.toString(),_=["world","viewProjection","cameraPosition","_Edge_Width_","_Edge_Color_","_Relative_Width_","_Proximity_Max_Intensity_","_Proximity_Far_Distance_","_Proximity_Near_Radius_","_Proximity_Anisotropy_","_Selection_Fuzz_","_Selected_","_Selection_Fade_","_Selection_Fade_Size_","_Selected_Distance_","_Selected_Fade_Length_","_Blob_Enable_","_Blob_Position_","_Blob_Intensity_","_Blob_Near_Size_","_Blob_Far_Size_","_Blob_Near_Distance_","_Blob_Far_Distance_","_Blob_Fade_Length_","_Blob_Inner_Fade_","_Blob_Pulse_","_Blob_Fade_","_Blob_Texture_","_Blob_Enable_2_","_Blob_Position_2_","_Blob_Near_Size_2_","_Blob_Inner_Fade_2_","_Blob_Pulse_2_","_Blob_Fade_2_","_Active_Face_Dir_","_Active_Face_Up_","_Enable_Fade_","_Fade_Width_","_Smooth_Active_Face_","_Show_Frame_","_Use_Blob_Texture_","Use_Global_Left_Index","Use_Global_Right_Index","Global_Left_Index_Tip_Position","Global_Right_Index_Tip_Position","Global_Left_Thumb_Tip_Position","Global_Right_Thumb_Tip_Position","Global_Left_Index_Tip_Proximity","Global_Right_Index_Tip_Proximity"],h=["_Blob_Texture_"],c=new Array;n.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:_,uniformBuffersNames:c,samplers:h,defines:o,maxSimultaneousLights:4}),e.setEffect(s.getEngine().createEffect(a,{attributes:i,uniformsNames:_,uniformBuffersNames:c,samplers:h,defines:l,fallbacks:t,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},r),o,this._materialContext)}return!(!e.effect||!e.effect.isReady()||(o._renderId=s.getRenderId(),e.effect._wasPreviouslyReady=!0,0))}bindForSubMesh(t,e,i){const o=this.getScene();if(!i.materialDefines)return;const s=i.effect;s&&(this._activeEffect=s,this.bindOnlyWorldMatrix(t),this._activeEffect.setMatrix("viewProjection",o.getTransformMatrix()),this._activeEffect.setVector3("cameraPosition",o.activeCamera.position),this._activeEffect.setTexture("_Blob_Texture_",this._blobTexture),this._activeEffect.setFloat("_Edge_Width_",this.edgeWidth),this._activeEffect.setColor4("_Edge_Color_",new n.Color3(this.edgeColor.r,this.edgeColor.g,this.edgeColor.b),this.edgeColor.a),this._activeEffect.setFloat("_Proximity_Max_Intensity_",this.proximityMaxIntensity),this._activeEffect.setFloat("_Proximity_Far_Distance_",this.proximityFarDistance),this._activeEffect.setFloat("_Proximity_Near_Radius_",this.proximityNearRadius),this._activeEffect.setFloat("_Proximity_Anisotropy_",this.proximityAnisotropy),this._activeEffect.setFloat("_Selection_Fuzz_",this.selectionFuzz),this._activeEffect.setFloat("_Selected_",this.selected),this._activeEffect.setFloat("_Selection_Fade_",this.selectionFade),this._activeEffect.setFloat("_Selection_Fade_Size_",this.selectionFadeSize),this._activeEffect.setFloat("_Selected_Distance_",this.selectedDistance),this._activeEffect.setFloat("_Selected_Fade_Length_",this.selectedFadeLength),this._activeEffect.setFloat("_Blob_Enable_",this.leftBlobEnable?1:0),this._activeEffect.setFloat("_Blob_Intensity_",this.blobIntensity),this._activeEffect.setFloat("_Blob_Near_Size_",this.leftBlobNearSize),this._activeEffect.setFloat("_Blob_Far_Size_",this.blobFarSize),this._activeEffect.setFloat("_Blob_Near_Distance_",this.blobNearDistance),this._activeEffect.setFloat("_Blob_Far_Distance_",this.blobFarDistance),this._activeEffect.setFloat("_Blob_Fade_Length_",this.blobFadeLength),this._activeEffect.setFloat("_Blob_Inner_Fade_",this.leftBlobInnerFade),this._activeEffect.setFloat("_Blob_Pulse_",this.leftBlobPulse),this._activeEffect.setFloat("_Blob_Fade_",this.leftBlobFade),this._activeEffect.setFloat("_Blob_Enable_2_",this.rightBlobEnable?1:0),this._activeEffect.setFloat("_Blob_Near_Size_2_",this.rightBlobNearSize),this._activeEffect.setFloat("_Blob_Inner_Fade_2_",this.rightBlobInnerFade),this._activeEffect.setFloat("_Blob_Pulse_2_",this.rightBlobPulse),this._activeEffect.setFloat("_Blob_Fade_2_",this.rightBlobFade),this._activeEffect.setVector3("_Active_Face_Dir_",this.activeFaceDir),this._activeEffect.setVector3("_Active_Face_Up_",this.activeFaceUp),this._activeEffect.setFloat("_Fade_Width_",this.fadeWidth),this._activeEffect.setFloat("_Smooth_Active_Face_",this.smoothActiveFace?1:0),this._activeEffect.setFloat("_Show_Frame_",this.showFrame?1:0),this._activeEffect.setFloat("_Use_Blob_Texture_",this.useBlobTexture?1:0),this._activeEffect.setFloat("Use_Global_Left_Index",1),this._activeEffect.setFloat("Use_Global_Right_Index",1),this._activeEffect.setVector4("Global_Left_Index_Tip_Position",new n.Vector4(this.globalLeftIndexTipPosition.x,this.globalLeftIndexTipPosition.y,this.globalLeftIndexTipPosition.z,1)),this._activeEffect.setVector4("Global_Right_Index_Tip_Position",new n.Vector4(this.globalRightIndexTipPosition.x,this.globalRightIndexTipPosition.y,this.globalRightIndexTipPosition.z,1)),this._afterBind(e,this._activeEffect))}getAnimatables(){return[]}dispose(t){super.dispose(t)}clone(t){return n.SerializationHelper.Clone((()=>new ft(t,this.getScene())),this)}serialize(){const t=super.serialize();return t.customType="BABYLON.FluentButtonMaterial",t}getClassName(){return"FluentButtonMaterial"}static Parse(t,e,i){return n.SerializationHelper.Parse((()=>new ft(t.name,e)),t,e,i)}}ft.BLOB_TEXTURE_URL="https://assets.babylonjs.com/meshes/MRTK/mrtk-fluent-button-blob.png",i([(0,n.serialize)()],ft.prototype,"edgeWidth",void 0),i([(0,n.serializeAsColor4)()],ft.prototype,"edgeColor",void 0),i([(0,n.serialize)()],ft.prototype,"proximityMaxIntensity",void 0),i([(0,n.serialize)()],ft.prototype,"proximityFarDistance",void 0),i([(0,n.serialize)()],ft.prototype,"proximityNearRadius",void 0),i([(0,n.serialize)()],ft.prototype,"proximityAnisotropy",void 0),i([(0,n.serialize)()],ft.prototype,"selectionFuzz",void 0),i([(0,n.serialize)()],ft.prototype,"selected",void 0),i([(0,n.serialize)()],ft.prototype,"selectionFade",void 0),i([(0,n.serialize)()],ft.prototype,"selectionFadeSize",void 0),i([(0,n.serialize)()],ft.prototype,"selectedDistance",void 0),i([(0,n.serialize)()],ft.prototype,"selectedFadeLength",void 0),i([(0,n.serialize)()],ft.prototype,"blobIntensity",void 0),i([(0,n.serialize)()],ft.prototype,"blobFarSize",void 0),i([(0,n.serialize)()],ft.prototype,"blobNearDistance",void 0),i([(0,n.serialize)()],ft.prototype,"blobFarDistance",void 0),i([(0,n.serialize)()],ft.prototype,"blobFadeLength",void 0),i([(0,n.serialize)()],ft.prototype,"leftBlobEnable",void 0),i([(0,n.serialize)()],ft.prototype,"leftBlobNearSize",void 0),i([(0,n.serialize)()],ft.prototype,"leftBlobPulse",void 0),i([(0,n.serialize)()],ft.prototype,"leftBlobFade",void 0),i([(0,n.serialize)()],ft.prototype,"leftBlobInnerFade",void 0),i([(0,n.serialize)()],ft.prototype,"rightBlobEnable",void 0),i([(0,n.serialize)()],ft.prototype,"rightBlobNearSize",void 0),i([(0,n.serialize)()],ft.prototype,"rightBlobPulse",void 0),i([(0,n.serialize)()],ft.prototype,"rightBlobFade",void 0),i([(0,n.serialize)()],ft.prototype,"rightBlobInnerFade",void 0),i([(0,n.serializeAsVector3)()],ft.prototype,"activeFaceDir",void 0),i([(0,n.serializeAsVector3)()],ft.prototype,"activeFaceUp",void 0),i([(0,n.serialize)()],ft.prototype,"enableFade",void 0),i([(0,n.serialize)()],ft.prototype,"fadeWidth",void 0),i([(0,n.serialize)()],ft.prototype,"smoothActiveFace",void 0),i([(0,n.serialize)()],ft.prototype,"showFrame",void 0),i([(0,n.serialize)()],ft.prototype,"useBlobTexture",void 0),i([(0,n.serializeAsVector3)()],ft.prototype,"globalLeftIndexTipPosition",void 0),i([(0,n.serializeAsVector3)()],ft.prototype,"globalRightIndexTipPosition",void 0),(0,n.RegisterClass)("BABYLON.GUI.FluentButtonMaterial",ft);class gt extends rt{constructor(t,e){super(t),this._isNearPressed=!1,this._interactionSurfaceHeight=0,this._isToggleButton=!1,this._toggleState=!1,this._toggleButtonCallback=()=>{this._onToggle(!this._toggleState)},this.onToggleObservable=new n.Observable,this.collidableFrontDirection=n.Vector3.Zero(),e&&(this.collisionMesh=e)}get isActiveNearInteraction(){return this._isNearPressed}set collidableFrontDirection(t){if(this._collidableFrontDirection=t.normalize(),this._collisionMesh){const t=n.TmpVectors.Matrix[0];t.copyFrom(this._collisionMesh.getWorldMatrix()),t.invert(),n.Vector3.TransformNormalToRef(this._collidableFrontDirection,t,this._collidableFrontDirection),this._collidableFrontDirection.normalize()}}get collidableFrontDirection(){if(this._collisionMesh){const t=n.TmpVectors.Vector3[0];return n.Vector3.TransformNormalToRef(this._collidableFrontDirection,this._collisionMesh.getWorldMatrix(),t),t.normalize()}return this._collidableFrontDirection}set collisionMesh(t){var e;this._collisionMesh&&(this._collisionMesh.isNearPickable=!1,(null===(e=this._collisionMesh.reservedDataStore)||void 0===e?void 0:e.GUI3D)&&(this._collisionMesh.reservedDataStore.GUI3D={}),this._collisionMesh.getChildMeshes().forEach((t=>{var e;t.isNearPickable=!1,(null===(e=t.reservedDataStore)||void 0===e?void 0:e.GUI3D)&&(t.reservedDataStore.GUI3D={})}))),this._collisionMesh=t,this._injectGUI3DReservedDataStore(this._collisionMesh).control=this,this._collisionMesh.isNearPickable=!0,this._collisionMesh.getChildMeshes().forEach((t=>{this._injectGUI3DReservedDataStore(t).control=this,t.isNearPickable=!0})),this.collidableFrontDirection=t.forward}set isToggleButton(t){t!==this._isToggleButton&&(this._isToggleButton=t,t?this.onPointerUpObservable.add(this._toggleButtonCallback):(this.onPointerUpObservable.removeCallback(this._toggleButtonCallback),this._toggleState&&this._onToggle(!1)))}get isToggleButton(){return this._isToggleButton}set isToggled(t){this._isToggleButton&&this._toggleState!==t&&this._onToggle(t)}get isToggled(){return this._toggleState}_onToggle(t){this._toggleState=t,this.onToggleObservable.notifyObservers(t)}_isInteractionInFrontOfButton(t){return this._getInteractionHeight(t,this._collisionMesh.getAbsolutePosition())>0}getPressDepth(t){if(!this._isNearPressed)return 0;const e=this._getInteractionHeight(t,this._collisionMesh.getAbsolutePosition());return this._interactionSurfaceHeight-e}_getInteractionHeight(t,e){const i=this.collidableFrontDirection;if(0===i.length())return n.Vector3.Distance(t,e);const o=n.Vector3.Dot(e,i);return n.Vector3.Dot(t,i)-o}_generatePointerEventType(t,e,i){if(t===n.PointerEventTypes.POINTERDOWN){if(!this._isInteractionInFrontOfButton(e))return n.PointerEventTypes.POINTERMOVE;this._isNearPressed=!0,this._interactionSurfaceHeight=this._getInteractionHeight(e,this._collisionMesh.getAbsolutePosition())}if(t===n.PointerEventTypes.POINTERUP){if(0==i)return n.PointerEventTypes.POINTERMOVE;this._isNearPressed=!1}return t}_getTypeName(){return"TouchButton3D"}_createNode(t){return super._createNode(t)}dispose(){super.dispose(),this.onPointerUpObservable.removeCallback(this._toggleButtonCallback),this.onToggleObservable.clear(),this._collisionMesh&&this._collisionMesh.dispose()}}class mt extends gt{constructor(t,e=!0){super(t),this._shareMaterials=!0,this._isBackplateVisible=!0,this._frontPlateDepth=.5,this._backPlateDepth=.04,this._backplateColor=new n.Color3(.08,.15,.55),this._backplateToggledColor=new n.Color3(.25,.4,.95),this._shareMaterials=e,this.pointerEnterAnimation=()=>{this._frontMaterial.leftBlobEnable=!0,this._frontMaterial.rightBlobEnable=!0},this.pointerOutAnimation=()=>{this._frontMaterial.leftBlobEnable=!1,this._frontMaterial.rightBlobEnable=!1},this.pointerDownAnimation=()=>{this._frontPlate&&!this.isActiveNearInteraction&&(this._frontPlate.scaling.z=.2*this._frontPlateDepth,this._frontPlate.position=n.Vector3.Forward(this._frontPlate._scene.useRightHandedSystem).scale((this._frontPlateDepth-.2*this._frontPlateDepth)/2),this._textPlate.position=n.Vector3.Forward(this._textPlate._scene.useRightHandedSystem).scale(-(this._backPlateDepth+.2*this._frontPlateDepth)/2))},this.pointerUpAnimation=()=>{this._frontPlate&&(this._frontPlate.scaling.z=this._frontPlateDepth,this._frontPlate.position=n.Vector3.Forward(this._frontPlate._scene.useRightHandedSystem).scale((this._frontPlateDepth-this._frontPlateDepth)/2),this._textPlate.position=n.Vector3.Forward(this._textPlate._scene.useRightHandedSystem).scale(-(this._backPlateDepth+this._frontPlateDepth)/2))},this.onPointerMoveObservable.add((t=>{if(this._frontPlate&&this.isActiveNearInteraction){const e=n.Vector3.Zero();if(this._backPlate.getWorldMatrix().decompose(e,void 0,void 0)){let i=this._getInteractionHeight(t,this._backPlate.getAbsolutePosition())/e.z;i=n.Scalar.Clamp(i-this._backPlateDepth/2,.2*this._frontPlateDepth,this._frontPlateDepth),this._frontPlate.scaling.z=i,this._frontPlate.position=n.Vector3.Forward(this._frontPlate._scene.useRightHandedSystem).scale((this._frontPlateDepth-i)/2),this._textPlate.position=n.Vector3.Forward(this._textPlate._scene.useRightHandedSystem).scale(-(this._backPlateDepth+i)/2)}}})),this._pointerHoverObserver=this.onPointerMoveObservable.add((t=>{this._frontMaterial.globalLeftIndexTipPosition=t}))}_disposeTooltip(){this._tooltipFade=null,this._tooltipTextBlock&&this._tooltipTextBlock.dispose(),this._tooltipTexture&&this._tooltipTexture.dispose(),this._tooltipMesh&&this._tooltipMesh.dispose(),this.onPointerEnterObservable.remove(this._tooltipHoverObserver),this.onPointerOutObservable.remove(this._tooltipOutObserver)}set renderingGroupId(t){this._backPlate.renderingGroupId=t,this._textPlate.renderingGroupId=t,this._frontPlate.renderingGroupId=t,this._tooltipMesh&&(this._tooltipMesh.renderingGroupId=t)}get renderingGroupId(){return this._backPlate.renderingGroupId}get mesh(){return this._backPlate}set tooltipText(t){if(t){if(!this._tooltipFade){const t=this._backPlate._scene.useRightHandedSystem;this._tooltipMesh=(0,n.CreatePlane)("",{size:1},this._backPlate._scene);const e=(0,n.CreatePlane)("",{size:1,sideOrientation:n.Mesh.DOUBLESIDE},this._backPlate._scene),i=new n.StandardMaterial("",this._backPlate._scene);i.diffuseColor=n.Color3.FromHexString("#212121"),e.material=i,e.isPickable=!1,this._tooltipMesh.addChild(e),e.position=n.Vector3.Forward(t).scale(.05),this._tooltipMesh.scaling.y=1/3,this._tooltipMesh.position=n.Vector3.Up().scale(.7).add(n.Vector3.Forward(t).scale(-.15)),this._tooltipMesh.isPickable=!1,this._tooltipMesh.parent=this._backPlate,this._tooltipTexture=$.CreateForMesh(this._tooltipMesh),this._tooltipTextBlock=new v,this._tooltipTextBlock.scaleY=3,this._tooltipTextBlock.color="white",this._tooltipTextBlock.fontSize=130,this._tooltipTexture.addControl(this._tooltipTextBlock),this._tooltipFade=new n.FadeInOutBehavior,this._tooltipFade.delay=500,this._tooltipMesh.addBehavior(this._tooltipFade),this._tooltipHoverObserver=this.onPointerEnterObservable.add((()=>{this._tooltipFade&&this._tooltipFade.fadeIn(!0)})),this._tooltipOutObserver=this.onPointerOutObservable.add((()=>{this._tooltipFade&&this._tooltipFade.fadeIn(!1)}))}this._tooltipTextBlock&&(this._tooltipTextBlock.text=t)}else this._disposeTooltip()}get tooltipText(){return this._tooltipTextBlock?this._tooltipTextBlock.text:null}get text(){return this._text}set text(t){this._text!==t&&(this._text=t,this._rebuildContent())}get imageUrl(){return this._imageUrl}set imageUrl(t){this._imageUrl!==t&&(this._imageUrl=t,this._rebuildContent())}get backMaterial(){return this._backMaterial}get frontMaterial(){return this._frontMaterial}get plateMaterial(){return this._plateMaterial}get shareMaterials(){return this._shareMaterials}set isBackplateVisible(t){this.mesh&&this._backMaterial&&(t&&!this._isBackplateVisible?this._backPlate.visibility=1:!t&&this._isBackplateVisible&&(this._backPlate.visibility=0)),this._isBackplateVisible=t}_getTypeName(){return"TouchHolographicButton"}_rebuildContent(){this._disposeFacadeTexture();const t=new y;if(t.isVertical=!0,n.DomManagement.IsDocumentAvailable()&&document.createElement&&this._imageUrl){const e=new b;e.source=this._imageUrl,e.paddingTop="40px",e.height="180px",e.width="100px",e.paddingBottom="40px",t.addControl(e)}if(this._text){const e=new v;e.text=this._text,e.color="white",e.height="30px",e.fontSize=24,t.addControl(e)}this.content=t}_createNode(t){var e;this.name=null!==(e=this.name)&&void 0!==e?e:"TouchHolographicButton";const i=(0,n.CreateBox)(`${this.name}_collisionMesh`,{width:1,height:1,depth:this._frontPlateDepth},t);i.isPickable=!0,i.isNearPickable=!0,i.visibility=0,i.position=n.Vector3.Forward(t.useRightHandedSystem).scale(-this._frontPlateDepth/2),n.SceneLoader.ImportMeshAsync(void 0,mt.MODEL_BASE_URL,mt.MODEL_FILENAME,t).then((e=>{const o=(0,n.CreateBox)("${this.name}_alphaMesh",{width:1,height:1,depth:1},t);o.isPickable=!1,o.material=new n.StandardMaterial("${this.name}_alphaMesh_material",t),o.material.alpha=.15;const s=e.meshes[1];s.name=`${this.name}_frontPlate`,s.isPickable=!1,s.scaling.z=this._frontPlateDepth,o.parent=s,s.parent=i,this._frontMaterial&&(s.material=this._frontMaterial),this._frontPlate=s})),this._backPlate=(0,n.CreateBox)(`${this.name}_backPlate`,{width:1,height:1,depth:this._backPlateDepth},t),this._backPlate.position=n.Vector3.Forward(t.useRightHandedSystem).scale(this._backPlateDepth/2),this._backPlate.isPickable=!1,this._textPlate=super._createNode(t),this._textPlate.name=`${this.name}_textPlate`,this._textPlate.isPickable=!1,this._textPlate.position=n.Vector3.Forward(t.useRightHandedSystem).scale(-this._frontPlateDepth/2),this._backPlate.addChild(i),this._backPlate.addChild(this._textPlate);const o=new n.TransformNode("{this.name}_root",t);return this._backPlate.setParent(o),this.collisionMesh=i,this.collidableFrontDirection=this._backPlate.forward.negate(),o}_applyFacade(t){this._plateMaterial.emissiveTexture=t,this._plateMaterial.opacityTexture=t,this._plateMaterial.diffuseColor=new n.Color3(.4,.4,.4)}_createBackMaterial(t){this._backMaterial=new ct(this.name+"backPlateMaterial",t.getScene()),this._backMaterial.albedoColor=this._backplateColor,this._backMaterial.renderBorders=!0,this._backMaterial.renderHoverLight=!1}_createFrontMaterial(t){this._frontMaterial=new ft(this.name+"Front Material",t.getScene())}_createPlateMaterial(t){this._plateMaterial=new n.StandardMaterial(this.name+"Plate Material",t.getScene()),this._plateMaterial.specularColor=n.Color3.Black()}_onToggle(t){this._backMaterial&&(this._backMaterial.albedoColor=t?this._backplateToggledColor:this._backplateColor),super._onToggle(t)}_affectMaterial(t){this._shareMaterials?(this._host._touchSharedMaterials.backFluentMaterial?this._backMaterial=this._host._touchSharedMaterials.backFluentMaterial:(this._createBackMaterial(t),this._host._touchSharedMaterials.backFluentMaterial=this._backMaterial),this._host._touchSharedMaterials.frontFluentMaterial?this._frontMaterial=this._host._touchSharedMaterials.frontFluentMaterial:(this._createFrontMaterial(t),this._host._touchSharedMaterials.frontFluentMaterial=this._frontMaterial)):(this._createBackMaterial(t),this._createFrontMaterial(t)),this._createPlateMaterial(t),this._backPlate.material=this._backMaterial,this._textPlate.material=this._plateMaterial,this._isBackplateVisible||(this._backPlate.visibility=0),this._frontPlate&&(this._frontPlate.material=this._frontMaterial),this._rebuildContent()}dispose(){super.dispose(),this._disposeTooltip(),this.onPointerMoveObservable.remove(this._pointerHoverObserver),this.shareMaterials||(this._backMaterial.dispose(),this._frontMaterial.dispose(),this._plateMaterial.dispose(),this._pickedPointObserver&&(this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver),this._pickedPointObserver=null))}}mt.MODEL_BASE_URL="https://assets.babylonjs.com/meshes/MRTK/",mt.MODEL_FILENAME="mrtk-fluent-button.glb";class pt{constructor(){this.followBehaviorEnabled=!1,this.sixDofDragBehaviorEnabled=!0,this.surfaceMagnetismBehaviorEnabled=!0,this._followBehavior=new n.FollowBehavior,this._sixDofDragBehavior=new n.SixDofDragBehavior,this._surfaceMagnetismBehavior=new n.SurfaceMagnetismBehavior}get name(){return"Default"}get followBehavior(){return this._followBehavior}get sixDofDragBehavior(){return this._sixDofDragBehavior}get surfaceMagnetismBehavior(){return this._surfaceMagnetismBehavior}init(){}attach(t,e,i){this._scene=t.getScene(),this.attachedNode=t,this._addObservables(),this._followBehavior.attach(t),this._sixDofDragBehavior.attach(t),this._sixDofDragBehavior.draggableMeshes=e||null,this._sixDofDragBehavior.faceCameraOnDragStart=!0,this._surfaceMagnetismBehavior.attach(t,this._scene),i&&(this._surfaceMagnetismBehavior.meshes=i),this._surfaceMagnetismBehavior.enabled=!1}detach(){this.attachedNode=null,this._removeObservables(),this._followBehavior.detach(),this._sixDofDragBehavior.detach(),this._surfaceMagnetismBehavior.detach()}_addObservables(){this._onBeforeRenderObserver=this._scene.onBeforeRenderObservable.add((()=>{this._followBehavior._enabled=!this._sixDofDragBehavior.isMoving&&this.followBehaviorEnabled})),this._onDragObserver=this._sixDofDragBehavior.onDragObservable.add((t=>{this._sixDofDragBehavior.disableMovement=this._surfaceMagnetismBehavior.findAndUpdateTarget(t.pickInfo)}))}_removeObservables(){this._scene.onBeforeRenderObservable.remove(this._onBeforeRenderObserver),this._sixDofDragBehavior.onDragObservable.remove(this._onDragObserver)}}n.ShaderStore.ShadersStore.handleVertexShader="precision highp float;\nattribute vec3 position;\nuniform vec3 positionOffset;\nuniform mat4 worldViewProjection;\nuniform float scale;\nvoid main(void) {\nvec4 vPos=vec4((vec3(position)+positionOffset)*scale,1.0);\ngl_Position=worldViewProjection*vPos;\n}";n.ShaderStore.ShadersStore.handlePixelShader="uniform vec3 color;\nvoid main(void) {\ngl_FragColor=vec4(color,1.0);\n}";class vt extends n.ShaderMaterial{constructor(t,e){super(t,e,"handle",{attributes:["position"],uniforms:["worldViewProjection","color","scale","positionOffset"],needAlphaBlending:!1,needAlphaTesting:!1}),this._hover=!1,this._drag=!1,this._color=new n.Color3,this._scale=1,this._lastTick=-1,this.animationLength=100,this.hoverColor=new n.Color3(0,.467,.84),this.baseColor=new n.Color3(1,1,1),this.hoverScale=.75,this.baseScale=.35,this.dragScale=.55,this._positionOffset=n.Vector3.Zero(),this._updateInterpolationTarget(),this._lastTick=Date.now(),this._onBeforeRender=this.getScene().onBeforeRenderObservable.add((()=>{const t=Date.now(),e=t-this._lastTick,i=this._targetScale-this._scale,o=n.TmpColors.Color3[0].copyFrom(this._targetColor).subtractToRef(this._color,n.TmpColors.Color3[0]);this._scale=this._scale+i*e/this.animationLength,o.scaleToRef(e/this.animationLength,o),this._color.addToRef(o,this._color),this.setColor3("color",this._color),this.setFloat("scale",this._scale),this.setVector3("positionOffset",this._positionOffset),this._lastTick=t}))}get hover(){return this._hover}set hover(t){this._hover=t,this._updateInterpolationTarget()}get drag(){return this._drag}set drag(t){this._drag=t,this._updateInterpolationTarget()}_updateInterpolationTarget(){this.drag?(this._targetColor=this.hoverColor,this._targetScale=this.dragScale):this.hover?(this._targetColor=this.hoverColor,this._targetScale=this.hoverScale):(this._targetColor=this.baseColor,this._targetScale=this.baseScale)}dispose(){super.dispose(),this.getScene().onBeforeRenderObservable.remove(this._onBeforeRender)}}var bt;!function(t){t[t.IDLE=0]="IDLE",t[t.HOVER=1]="HOVER",t[t.DRAG=2]="DRAG"}(bt||(bt={}));class xt{constructor(t,e){this._state=bt.IDLE,this._materials=[],this._scene=e,this._gizmo=t,this.node=this.createNode(),this.node.reservedDataStore={handle:this}}get state(){return this._state}get gizmo(){return this._gizmo}set hover(t){t?this._state|=bt.HOVER:this._state&=~bt.HOVER,this._updateMaterial()}set drag(t){t?this._state|=bt.DRAG:this._state&=~bt.DRAG,this._updateMaterial()}_createMaterial(t){const e=new vt("handle",this._scene);return t&&(e._positionOffset=t),e}_updateMaterial(){const t=this._state;for(const t of this._materials)t.hover=!1,t.drag=!1;if(t&bt.DRAG)for(const t of this._materials)t.drag=!0;else if(t&bt.HOVER)for(const t of this._materials)t.hover=!0}setDragBehavior(t,e,i){const o=new n.BaseSixDofDragBehavior;this._dragBehavior=o,this._dragStartObserver=o.onDragStartObservable.add(t),this._draggingObserver=o.onDragObservable.add(e),this._dragEndObserver=o.onDragEndObservable.add(i),this._dragBehavior.attach(this.node)}dispose(){this._dragBehavior.onDragStartObservable.remove(this._dragStartObserver),this._dragBehavior.onDragObservable.remove(this._draggingObserver),this._dragBehavior.onDragEndObservable.remove(this._dragEndObserver),this._dragBehavior.detach();for(const t of this._materials)t.dispose();this.node.dispose()}}class yt extends xt{createNode(){const t=(0,n.CreateBox)("sideVert",{width:1,height:10,depth:.1},this._scene),e=new n.TransformNode("side",this._scene);t.parent=e;const i=this._createMaterial();return t.material=i,t.isNearGrabbable=!0,this._materials.push(i),e}}class Bt extends xt{createNode(){const t=(0,n.CreateBox)("angleHor",{width:3,height:1,depth:.1},this._scene),e=(0,n.CreateBox)("angleVert",{width:1,height:3,depth:.1},this._scene),i=new n.TransformNode("angle",this._scene);return t.parent=i,e.parent=i,t.material=this._createMaterial(new n.Vector3(1,0,0)),e.material=this._createMaterial(new n.Vector3(0,1,0)),e.isNearGrabbable=!0,t.isNearGrabbable=!0,this._materials.push(t.material),this._materials.push(e.material),i}}class Ct extends n.Gizmo{constructor(t){super(t),this._boundingDimensions=new n.Vector3(0,0,0),this._renderObserver=null,this._tmpQuaternion=new n.Quaternion,this._tmpVector=new n.Vector3(0,0,0),this._corners=[],this._sides=[],this._boundingBoxGizmo={min:new n.Vector3,max:new n.Vector3},this._margin=.35,this._handleSize=.075,this._attachedSlate=null,this._existingSlateScale=new n.Vector3,this.fixedScreenSize=!1,this.fixedScreenSizeDistanceFactor=10,this._createNode(),this.updateScale=!1,this._renderObserver=this.gizmoLayer.originalScene.onBeforeRenderObservable.add((()=>{this.attachedMesh&&!this._existingSlateScale.equals(this.attachedMesh.scaling)&&this.updateBoundingBox()}))}set attachedSlate(t){t?(this.attachedMesh=t.mesh,this.updateBoundingBox(),this._pickedPointObserver=t._host.onPickingObservable.add((t=>{if(!this._handleHovered||t&&t.parent===this._handleHovered.node||(this._handleHovered.hover=!1,this._handleHovered=null),t&&t.parent&&t.parent.reservedDataStore&&t.parent.reservedDataStore.handle){const e=t.parent.reservedDataStore.handle;e.gizmo===this&&(this._handleHovered=e,this._handleHovered.hover=!0)}}))):this._attachedSlate&&this._attachedSlate._host.onPickingObservable.remove(this._pickedPointObserver),this._attachedSlate=t}get attachedSlate(){return this._attachedSlate}_createNode(){this._handlesParent=new n.TransformNode("handlesParent",this.gizmoLayer.utilityLayerScene),this._handlesParent.rotationQuaternion=n.Quaternion.Identity();const t=[{dimensions:new n.Vector3(-1,-1,0),origin:new n.Vector3(1,0,0)},{dimensions:new n.Vector3(1,-1,0),origin:new n.Vector3(0,0,0)},{dimensions:new n.Vector3(1,1,0),origin:new n.Vector3(0,1,0)},{dimensions:new n.Vector3(-1,1,0),origin:new n.Vector3(1,1,0)}];for(let e=0;e<4;e++){const i=new Bt(this,this.gizmoLayer.utilityLayerScene);this._corners.push(i),i.node.rotation.z=Math.PI/2*e,i.node.parent=this._handlesParent,this._assignDragBehaviorCorners(i,((t,e,i,o)=>this._moveHandle(t,e,i,o,!0)),t[e])}for(let t=0;t<4;t++){const e=new yt(this,this.gizmoLayer.utilityLayerScene);this._sides.push(e),e.node.rotation.z=Math.PI/2*t,e.node.parent=this._handlesParent,this._assignDragBehaviorSides(e,t%2==0?new n.Vector3(0,1,0):new n.Vector3(1,0,0))}this._handlesParent.parent=this._rootMesh}_keepAspectRatio(t,e,i=!1){const o=n.TmpVectors.Vector3[0];o.copyFromFloats(e,1,0).normalize(),i&&(o.y*=-1);const s=n.Vector3.Dot(t,o);t.copyFrom(o).scaleInPlace(s)}_clampDimensions(t,e,i,o=!1){const s=n.TmpVectors.Vector3[0];s.copyFrom(t).multiplyInPlace(i);const r=n.TmpVectors.Vector3[1];if(r.copyFromFloats(Math.max(this._attachedSlate.minDimensions.x,s.x+e.x),Math.max(this._attachedSlate.minDimensions.y,s.y+e.y),0),o){const t=e.x/e.y;r.x=Math.max(r.x,r.y*t),r.y=Math.max(r.y,r.x/t)}s.copyFrom(r).subtractInPlace(e),t.x=Math.sign(t.x)*Math.abs(s.x),t.y=Math.sign(t.y)*Math.abs(s.y)}_moveHandle(t,e,i,o,s){if(!this._attachedSlate)return;if(s){const t=e.x/e.y;this._keepAspectRatio(i,t,o.dimensions.x*o.dimensions.y<0)}this._clampDimensions(i,e,o.dimensions,s);const r=n.TmpVectors.Vector3[0],a=n.TmpVectors.Vector3[1];r.copyFrom(i).multiplyInPlace(o.origin),a.copyFrom(i).multiplyInPlace(o.dimensions),this._attachedSlate.origin.copyFrom(t).addInPlace(r),this._attachedSlate.dimensions.set(e.x+a.x,e.y+a.y)}_assignDragBehaviorCorners(t,e,i){const o=new n.Vector3,s=new n.Vector3,r=new n.Vector3,a=new n.Matrix,l=new n.Vector3;t.setDragBehavior((t=>{this.attachedSlate&&this.attachedMesh&&(o.set(this.attachedSlate.dimensions.x,this.attachedSlate.dimensions.y,n.Epsilon),s.copyFrom(this.attachedSlate.origin),r.copyFrom(t.position),a.copyFrom(this.attachedMesh.computeWorldMatrix(!0)),a.invert(),this.attachedSlate._followButton.isToggled=!1,n.Vector3.TransformNormalToRef(n.Vector3.Forward(),this.attachedMesh.getWorldMatrix(),l),l.normalize(),this._handleHovered&&(this._handleDragged=this._handleHovered,this._handleDragged.drag=!0))}),(t=>{this.attachedSlate&&this.attachedMesh&&(((t,e,i,o)=>{t.subtractToRef(i,n.TmpVectors.Vector3[0]);const s=n.Vector3.Dot(n.TmpVectors.Vector3[0],e);n.TmpVectors.Vector3[1].copyFrom(e).scaleInPlace(s),n.TmpVectors.Vector3[0].subtractInPlace(n.TmpVectors.Vector3[1]),n.TmpVectors.Vector3[0].addToRef(i,o)})(t.position,l,r,this._tmpVector),this._tmpVector.subtractInPlace(r),n.Vector3.TransformNormalToRef(this._tmpVector,a,this._tmpVector),e(s,o,this._tmpVector,i),this.attachedSlate._positionElements(),this.updateBoundingBox())}),(()=>{this.attachedSlate&&this.attachedNode&&(this.attachedSlate._updatePivot(),this._handleDragged&&(this._handleDragged.drag=!1,this._handleDragged=null))}))}_assignDragBehaviorSides(t,e){const i=new n.Quaternion,o=new n.Vector3,s=new n.Vector3,r=new n.Vector3,a=new n.Vector3;t.setDragBehavior((t=>{this.attachedSlate&&this.attachedMesh&&(i.copyFrom(this.attachedMesh.rotationQuaternion),o.copyFrom(t.position),r.copyFrom(this.attachedMesh.getAbsolutePivotPoint()),s.copyFrom(o).subtractInPlace(r).normalize(),this.attachedSlate._followButton.isToggled=!1,n.Vector3.TransformNormalToRef(e,this.attachedMesh.getWorldMatrix(),a),a.normalize(),this._handleHovered&&(this._handleDragged=this._handleHovered,this._handleDragged.drag=!0))}),(t=>{if(this.attachedSlate&&this.attachedMesh){this._tmpVector.copyFrom(t.position),this._tmpVector.subtractInPlace(r),this._tmpVector.normalize();const o=-n.Vector3.GetAngleBetweenVectorsOnPlane(this._tmpVector,s,a);n.Quaternion.RotationAxisToRef(e,o,this._tmpQuaternion),i.multiplyToRef(this._tmpQuaternion,this.attachedMesh.rotationQuaternion)}}),(()=>{this.attachedSlate&&this.attachedNode&&(this.attachedSlate._updatePivot(),this._handleDragged&&(this._handleDragged.drag=!1,this._handleDragged=null))}))}_attachedNodeChanged(t){t&&this.updateBoundingBox()}updateBoundingBox(){if(this.attachedMesh){n.PivotTools._RemoveAndStorePivotPoint(this.attachedMesh);const t=this.attachedMesh.parent;this.attachedMesh.setParent(null),this._update(),this.attachedMesh.rotationQuaternion||(this.attachedMesh.rotationQuaternion=n.Quaternion.RotationYawPitchRoll(this.attachedMesh.rotation.y,this.attachedMesh.rotation.x,this.attachedMesh.rotation.z)),this._tmpQuaternion.copyFrom(this.attachedMesh.rotationQuaternion),this._tmpVector.copyFrom(this.attachedMesh.position),this.attachedMesh.rotationQuaternion.set(0,0,0,1),this.attachedMesh.position.set(0,0,0);const e=this.attachedMesh.getHierarchyBoundingVectors();e.max.subtractToRef(e.min,this._boundingDimensions),this._boundingBoxGizmo.min=e.min,this._boundingBoxGizmo.max=e.max,this._updateHandlesPosition(),this._updateHandlesScaling(),this.attachedMesh.rotationQuaternion.copyFrom(this._tmpQuaternion),this.attachedMesh.position.copyFrom(this._tmpVector),n.PivotTools._RestorePivotPoint(this.attachedMesh),this.attachedMesh.setParent(t),this.attachedMesh.computeWorldMatrix(!0),this._existingSlateScale.copyFrom(this.attachedMesh.scaling)}}_updateHandlesPosition(){const t=this._boundingBoxGizmo.min.clone(),e=this._boundingBoxGizmo.max.clone(),i=this._corners[0].node.scaling.length();t.x-=this._margin*i,t.y-=this._margin*i,e.x+=this._margin*i,e.y+=this._margin*i;const o=t.add(e).scaleInPlace(.5);this._corners[0].node.position.copyFromFloats(t.x,t.y,0),this._corners[1].node.position.copyFromFloats(e.x,t.y,0),this._corners[2].node.position.copyFromFloats(e.x,e.y,0),this._corners[3].node.position.copyFromFloats(t.x,e.y,0),this._sides[0].node.position.copyFromFloats(t.x,o.y,0),this._sides[1].node.position.copyFromFloats(o.x,t.y,0),this._sides[2].node.position.copyFromFloats(e.x,o.y,0),this._sides[3].node.position.copyFromFloats(o.x,e.y,0)}_updateHandlesScaling(){if(this._attachedSlate&&this._attachedSlate.mesh){const t=this._attachedSlate.mesh.scaling.x*this._attachedSlate.dimensions.x,e=this._attachedSlate.mesh.scaling.y*this._attachedSlate.dimensions.y,i=Math.min(t,e)*this._handleSize;for(let t=0;t<this._corners.length;t++)this._corners[t].node.scaling.setAll(i);for(let t=0;t<this._sides.length;t++)this._sides[t].node.scaling.setAll(i)}}_update(){if(super._update(),this.gizmoLayer.utilityLayerScene.activeCamera&&this._attachedSlate&&this._attachedSlate.mesh){if(this.fixedScreenSize){this._attachedSlate.mesh.absolutePosition.subtractToRef(this.gizmoLayer.utilityLayerScene.activeCamera.position,this._tmpVector);const t=this._handleSize*this._tmpVector.length()/this.fixedScreenSizeDistanceFactor;for(let e=0;e<this._corners.length;e++)this._corners[e].node.scaling.set(t,t,t);for(let e=0;e<this._sides.length;e++)this._sides[e].node.scaling.set(t,t,t)}this._updateHandlesPosition()}}dispose(){this.gizmoLayer.originalScene.onBeforeRenderObservable.remove(this._renderObserver),super.dispose();for(const t of this._corners)t.dispose();for(const t of this._sides)t.dispose()}}n.ShaderStore.ShadersStore.fluentBackplatePixelShader="uniform vec3 cameraPosition;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec4 vColor;\nvarying vec4 vExtra1;\nvarying vec4 vExtra2;\nvarying vec4 vExtra3;\nuniform float _Radius_;\nuniform float _Line_Width_;\nuniform bool _Absolute_Sizes_;\nuniform float _Filter_Width_;\nuniform vec4 _Base_Color_;\nuniform vec4 _Line_Color_;\nuniform float _Radius_Top_Left_;\nuniform float _Radius_Top_Right_;\nuniform float _Radius_Bottom_Left_;\nuniform float _Radius_Bottom_Right_;\nuniform vec3 _Blob_Position_;\nuniform float _Blob_Intensity_;\nuniform float _Blob_Near_Size_;\nuniform float _Blob_Far_Size_;\nuniform float _Blob_Near_Distance_;\nuniform float _Blob_Far_Distance_;\nuniform float _Blob_Fade_Length_;\nuniform float _Blob_Pulse_;\nuniform float _Blob_Fade_;\nuniform sampler2D _Blob_Texture_;\nuniform vec3 _Blob_Position_2_;\nuniform float _Blob_Near_Size_2_;\nuniform float _Blob_Pulse_2_;\nuniform float _Blob_Fade_2_;\nuniform float _Rate_;\nuniform vec4 _Highlight_Color_;\nuniform float _Highlight_Width_;\nuniform vec4 _Highlight_Transform_;\nuniform float _Highlight_;\nuniform float _Iridescence_Intensity_;\nuniform float _Iridescence_Edge_Intensity_;\nuniform float _Angle_;\nuniform float _Fade_Out_;\nuniform bool _Reflected_;\nuniform float _Frequency_;\nuniform float _Vertical_Offset_;\nuniform sampler2D _Iridescent_Map_;\nuniform bool _Use_Global_Left_Index_;\nuniform bool _Use_Global_Right_Index_;\nuniform vec4 Global_Left_Index_Tip_Position;\nuniform vec4 Global_Right_Index_Tip_Position;\nvoid Round_Rect_Fragment_B31(\nfloat Radius,\nfloat Line_Width,\nvec4 Line_Color,\nfloat Filter_Width,\nvec2 UV,\nfloat Line_Visibility,\nvec4 Rect_Parms,\nvec4 Fill_Color,\nout vec4 Color)\n{\nfloat d=length(max(abs(UV)-Rect_Parms.xy,0.0));\nfloat dx=max(fwidth(d)*Filter_Width,0.00001);\nfloat g=min(Rect_Parms.z,Rect_Parms.w);\nfloat dgrad=max(fwidth(g)*Filter_Width,0.00001);\nfloat Inside_Rect=clamp(g/dgrad,0.0,1.0);\nfloat inner=clamp((d+dx*0.5-max(Radius-Line_Width,d-dx*0.5))/dx,0.0,1.0);\nColor=clamp(mix(Fill_Color,Line_Color,inner),0.0,1.0)*Inside_Rect;\n}\nvoid Blob_Fragment_B71(\nsampler2D Blob_Texture,\nvec4 Blob_Info1,\nvec4 Blob_Info2,\nout vec4 Blob_Color)\n{\nfloat k1=dot(Blob_Info1.xy,Blob_Info1.xy);\nfloat k2=dot(Blob_Info2.xy,Blob_Info2.xy);\nvec3 closer=k1<k2 ? vec3(k1,Blob_Info1.z,Blob_Info1.w) : vec3(k2,Blob_Info2.z,Blob_Info2.w);\nBlob_Color=closer.z*texture(Blob_Texture,vec2(vec2(sqrt(closer.x),closer.y).x,1.0-vec2(sqrt(closer.x),closer.y).y))*clamp(1.0-closer.x,0.0,1.0);\n}\nvoid Line_Fragment_B48(\nvec4 Base_Color,\nvec4 Highlight_Color,\nfloat Highlight_Width,\nvec3 Line_Vertex,\nfloat Highlight,\nout vec4 Line_Color)\n{\nfloat k2=1.0-clamp(abs(Line_Vertex.y/Highlight_Width),0.0,1.0);\nLine_Color=mix(Base_Color,Highlight_Color,Highlight*k2);\n}\nvoid Scale_RGB_B54(\nvec4 Color,\nfloat Scalar,\nout vec4 Result)\n{\nResult=vec4(Scalar,Scalar,Scalar,1)*Color;\n}\nvoid Conditional_Float_B38(\nbool Which,\nfloat If_True,\nfloat If_False,\nout float Result)\n{\nResult=Which ? If_True : If_False;\n}\nvoid main()\n{\nfloat R_Q72;\nfloat G_Q72;\nfloat B_Q72;\nfloat A_Q72;\nR_Q72=vColor.r; G_Q72=vColor.g; B_Q72=vColor.b; A_Q72=vColor.a;\nvec4 Blob_Color_Q71;\n#if BLOB_ENABLE\nfloat k1=dot(vExtra2.xy,vExtra2.xy);\nfloat k2=dot(vExtra3.xy,vExtra3.xy);\nvec3 closer=k1<k2 ? vec3(k1,vExtra2.z,vExtra2.w) : vec3(k2,vExtra3.z,vExtra3.w);\nBlob_Color_Q71=closer.z*texture(_Blob_Texture_,vec2(vec2(sqrt(closer.x),closer.y).x,1.0-vec2(sqrt(closer.x),closer.y).y))*clamp(1.0-closer.x,0.0,1.0);\n#else\nBlob_Color_Q71=vec4(0,0,0,0);\n#endif\nvec4 Line_Color_Q48;\nLine_Fragment_B48(_Line_Color_,_Highlight_Color_,_Highlight_Width_,vTangent,_Highlight_,Line_Color_Q48);\nfloat X_Q67;\nfloat Y_Q67;\nX_Q67=vUV.x;\nY_Q67=vUV.y;\nvec3 Incident_Q66=normalize(vPosition-cameraPosition);\nvec3 Reflected_Q60=reflect(Incident_Q66,vBinormal);\nfloat Product_Q63=Y_Q67*_Vertical_Offset_;\nfloat Dot_Q68=dot(Incident_Q66, Reflected_Q60);\nfloat Dot_Q57=dot(vNormal, Incident_Q66);\nfloat Result_Q38;\nConditional_Float_B38(_Reflected_,Dot_Q68,Dot_Q57,Result_Q38);\nfloat Product_Q64=Result_Q38*_Frequency_;\nfloat Sum_Q69=Product_Q64+1.0;\nfloat Product_Q70=Sum_Q69*0.5;\nfloat Sum_Q62=Product_Q63+Product_Q70;\nfloat FractF_Q59=fract(Sum_Q62);\nvec2 Vec2_Q65=vec2(FractF_Q59,0.5);\nvec4 Color_Q58;\n#if IRIDESCENT_MAP_ENABLE\nColor_Q58=texture(_Iridescent_Map_,Vec2_Q65);\n#else\nColor_Q58=vec4(0,0,0,0);\n#endif\nvec4 Result_Q54;\nScale_RGB_B54(Color_Q58,_Iridescence_Edge_Intensity_,Result_Q54);\nvec4 Result_Q55;\nScale_RGB_B54(Color_Q58,_Iridescence_Intensity_,Result_Q55);\nvec4 Base_And_Iridescent_Q53;\nBase_And_Iridescent_Q53=Line_Color_Q48+vec4(Result_Q54.rgb,0.0);\nvec4 Base_And_Iridescent_Q56;\nBase_And_Iridescent_Q56=_Base_Color_+vec4(Result_Q55.rgb,0.0);\nvec4 Result_Q52=Base_And_Iridescent_Q53; Result_Q52.a=1.0;\nvec4 Result_Q35=Blob_Color_Q71+(1.0-Blob_Color_Q71.a)*Base_And_Iridescent_Q56;\nvec4 Color_Q31;\nRound_Rect_Fragment_B31(R_Q72,G_Q72,Result_Q52,_Filter_Width_,vUV,1.0,vExtra1,Result_Q35,Color_Q31);\nvec4 Result_Q47=_Fade_Out_*Color_Q31;\nvec4 Out_Color=Result_Q47;\nfloat Clip_Threshold=0.001;\nbool To_sRGB=false;\ngl_FragColor=Out_Color;\n}";n.ShaderStore.ShadersStore.fluentBackplateVertexShader="uniform mat4 world;\nuniform mat4 viewProjection;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\n#ifdef TANGENT\nattribute vec3 tangent;\n#else\nconst vec3 tangent=vec3(0.);\n#endif\nuniform float _Radius_;\nuniform float _Line_Width_;\nuniform bool _Absolute_Sizes_;\nuniform float _Filter_Width_;\nuniform vec4 _Base_Color_;\nuniform vec4 _Line_Color_;\nuniform float _Radius_Top_Left_;\nuniform float _Radius_Top_Right_;\nuniform float _Radius_Bottom_Left_;\nuniform float _Radius_Bottom_Right_;\nuniform vec3 _Blob_Position_;\nuniform float _Blob_Intensity_;\nuniform float _Blob_Near_Size_;\nuniform float _Blob_Far_Size_;\nuniform float _Blob_Near_Distance_;\nuniform float _Blob_Far_Distance_;\nuniform float _Blob_Fade_Length_;\nuniform float _Blob_Pulse_;\nuniform float _Blob_Fade_;\nuniform sampler2D _Blob_Texture_;\nuniform vec3 _Blob_Position_2_;\nuniform float _Blob_Near_Size_2_;\nuniform float _Blob_Pulse_2_;\nuniform float _Blob_Fade_2_;\nuniform float _Rate_;\nuniform vec4 _Highlight_Color_;\nuniform float _Highlight_Width_;\nuniform vec4 _Highlight_Transform_;\nuniform float _Highlight_;\nuniform float _Iridescence_Intensity_;\nuniform float _Iridescence_Edge_Intensity_;\nuniform float _Angle_;\nuniform float _Fade_Out_;\nuniform bool _Reflected_;\nuniform float _Frequency_;\nuniform float _Vertical_Offset_;\nuniform sampler2D _Iridescent_Map_;\nuniform bool _Use_Global_Left_Index_;\nuniform bool _Use_Global_Right_Index_;\nuniform vec4 Global_Left_Index_Tip_Position;\nuniform vec4 Global_Right_Index_Tip_Position;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec4 vColor;\nvarying vec4 vExtra1;\nvarying vec4 vExtra2;\nvarying vec4 vExtra3;\nvoid Object_To_World_Pos_B115(\nvec3 Pos_Object,\nout vec3 Pos_World)\n{\nPos_World=(world*vec4(Pos_Object,1.0)).xyz;\n}\nvoid PickDir_B140(\nfloat Degrees,\nvec3 DirX,\nvec3 DirY,\nout vec3 Dir)\n{\nfloat a=Degrees*3.14159/180.0;\nDir=cos(a)*DirX+sin(a)*DirY;\n}\nvoid Round_Rect_Vertex_B139(\nvec2 UV,\nfloat Radius,\nfloat Margin,\nfloat Anisotropy,\nfloat Gradient1,\nfloat Gradient2,\nout vec2 Rect_UV,\nout vec4 Rect_Parms,\nout vec2 Scale_XY,\nout vec2 Line_UV)\n{\nScale_XY=vec2(Anisotropy,1.0);\nLine_UV=(UV-vec2(0.5,0.5));\nRect_UV=Line_UV*Scale_XY;\nRect_Parms.xy=Scale_XY*0.5-vec2(Radius,Radius)-vec2(Margin,Margin);\nRect_Parms.z=Gradient1; \nRect_Parms.w=Gradient2;\n}\nvoid Line_Vertex_B135(\nvec2 Scale_XY,\nvec2 UV,\nfloat Time,\nfloat Rate,\nvec4 Highlight_Transform,\nout vec3 Line_Vertex)\n{\nfloat angle2=(Rate*Time)*2.0*3.1416;\nfloat sinAngle2=sin(angle2);\nfloat cosAngle2=cos(angle2);\nvec2 xformUV=UV*Highlight_Transform.xy+Highlight_Transform.zw;\nLine_Vertex.x=0.0;\nLine_Vertex.y=cosAngle2*xformUV.x-sinAngle2*xformUV.y;\nLine_Vertex.z=0.0; \n}\nvoid Blob_Vertex_B180(\nvec3 Position,\nvec3 Normal,\nvec3 Tangent,\nvec3 Bitangent,\nvec3 Blob_Position,\nfloat Intensity,\nfloat Blob_Near_Size,\nfloat Blob_Far_Size,\nfloat Blob_Near_Distance,\nfloat Blob_Far_Distance,\nfloat Blob_Fade_Length,\nfloat Blob_Pulse,\nfloat Blob_Fade,\nout vec4 Blob_Info)\n{\nvec3 blob=Blob_Position;\nvec3 delta=blob-Position;\nfloat dist=dot(Normal,delta);\nfloat lerpValue=clamp((abs(dist)-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);\nfloat fadeValue=1.0-clamp((abs(dist)-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);\nfloat size=Blob_Near_Size+(Blob_Far_Size-Blob_Near_Size)*lerpValue;\nvec2 blobXY=vec2(dot(delta,Tangent),dot(delta,Bitangent))/(0.0001+size);\nfloat Fade=fadeValue*Intensity*Blob_Fade;\nfloat Distance=(lerpValue*0.5+0.5)*(1.0-Blob_Pulse);\nBlob_Info=vec4(blobXY.x,blobXY.y,Distance,Fade);\n}\nvoid Move_Verts_B129(\nfloat Anisotropy,\nvec3 P,\nfloat Radius,\nout vec3 New_P,\nout vec2 New_UV,\nout float Radial_Gradient,\nout vec3 Radial_Dir)\n{\nvec2 UV=P.xy*2.0+0.5;\nvec2 center=clamp(UV,0.0,1.0);\nvec2 delta=UV-center;\nvec2 r2=2.0*vec2(Radius/Anisotropy,Radius);\nNew_UV=center+r2*(UV-2.0*center+0.5);\nNew_P=vec3(New_UV-0.5,P.z);\nRadial_Gradient=1.0-length(delta)*2.0;\nRadial_Dir=vec3(delta*r2,0.0);\n}\nvoid Object_To_World_Dir_B132(\nvec3 Dir_Object,\nout vec3 Binormal_World,\nout vec3 Binormal_World_N,\nout float Binormal_Length)\n{\nBinormal_World=(world*vec4(Dir_Object,0.0)).xyz;\nBinormal_Length=length(Binormal_World);\nBinormal_World_N=Binormal_World/Binormal_Length;\n}\nvoid RelativeOrAbsoluteDetail_B147(\nfloat Nominal_Radius,\nfloat Nominal_LineWidth,\nbool Absolute_Measurements,\nfloat Height,\nout float Radius,\nout float Line_Width)\n{\nfloat scale=Absolute_Measurements ? 1.0/Height : 1.0;\nRadius=Nominal_Radius*scale;\nLine_Width=Nominal_LineWidth*scale;\n}\nvoid Edge_AA_Vertex_B130(\nvec3 Position_World,\nvec3 Position_Object,\nvec3 Normal_Object,\nvec3 Eye,\nfloat Radial_Gradient,\nvec3 Radial_Dir,\nvec3 Tangent,\nout float Gradient1,\nout float Gradient2)\n{\nvec3 I=(Eye-Position_World);\nvec3 T=(world* vec4(Tangent,0.0)).xyz;\nfloat g=(dot(T,I)<0.0) ? 0.0 : 1.0;\nif (Normal_Object.z==0.0) { \nGradient1=Position_Object.z>0.0 ? g : 1.0;\nGradient2=Position_Object.z>0.0 ? 1.0 : g;\n} else {\nGradient1=g+(1.0-g)*(Radial_Gradient);\nGradient2=1.0;\n}\n}\nvoid Pick_Radius_B144(\nfloat Radius,\nfloat Radius_Top_Left,\nfloat Radius_Top_Right,\nfloat Radius_Bottom_Left,\nfloat Radius_Bottom_Right,\nvec3 Position,\nout float Result)\n{\nbool whichY=Position.y>0.0;\nResult=Position.x<0.0 ? (whichY ? Radius_Top_Left : Radius_Bottom_Left) : (whichY ? Radius_Top_Right : Radius_Bottom_Right);\nResult*=Radius;\n}\nvoid main()\n{\nvec3 Nrm_World_Q128;\nNrm_World_Q128=normalize((world*vec4(normal,0.0)).xyz);\nvec3 Tangent_World_Q131;\nvec3 Tangent_World_N_Q131;\nfloat Tangent_Length_Q131;\nTangent_World_Q131=(world*vec4(vec3(1,0,0),0.0)).xyz;\nTangent_Length_Q131=length(Tangent_World_Q131);\nTangent_World_N_Q131=Tangent_World_Q131/Tangent_Length_Q131;\nvec3 Binormal_World_Q132;\nvec3 Binormal_World_N_Q132;\nfloat Binormal_Length_Q132;\nObject_To_World_Dir_B132(vec3(0,1,0),Binormal_World_Q132,Binormal_World_N_Q132,Binormal_Length_Q132);\nfloat Anisotropy_Q133=Tangent_Length_Q131/Binormal_Length_Q132;\nvec3 Result_Q177;\nResult_Q177=mix(_Blob_Position_,Global_Left_Index_Tip_Position.xyz,float(_Use_Global_Left_Index_));\nvec3 Result_Q178;\nResult_Q178=mix(_Blob_Position_2_,Global_Right_Index_Tip_Position.xyz,float(_Use_Global_Right_Index_));\nfloat Result_Q144;\nPick_Radius_B144(_Radius_,_Radius_Top_Left_,_Radius_Top_Right_,_Radius_Bottom_Left_,_Radius_Bottom_Right_,position,Result_Q144);\nvec3 Dir_Q140;\nPickDir_B140(_Angle_,Tangent_World_N_Q131,Binormal_World_N_Q132,Dir_Q140);\nfloat Radius_Q147;\nfloat Line_Width_Q147;\nRelativeOrAbsoluteDetail_B147(Result_Q144,_Line_Width_,_Absolute_Sizes_,Binormal_Length_Q132,Radius_Q147,Line_Width_Q147);\nvec4 Out_Color_Q145=vec4(Radius_Q147,Line_Width_Q147,0,1);\nvec3 New_P_Q129;\nvec2 New_UV_Q129;\nfloat Radial_Gradient_Q129;\nvec3 Radial_Dir_Q129;\nMove_Verts_B129(Anisotropy_Q133,position,Radius_Q147,New_P_Q129,New_UV_Q129,Radial_Gradient_Q129,Radial_Dir_Q129);\nvec3 Pos_World_Q115;\nObject_To_World_Pos_B115(New_P_Q129,Pos_World_Q115);\nvec4 Blob_Info_Q180;\n#if BLOB_ENABLE\nBlob_Vertex_B180(Pos_World_Q115,Nrm_World_Q128,Tangent_World_N_Q131,Binormal_World_N_Q132,Result_Q177,_Blob_Intensity_,_Blob_Near_Size_,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,_Blob_Fade_Length_,_Blob_Pulse_,_Blob_Fade_,Blob_Info_Q180);\n#else\nBlob_Info_Q180=vec4(0,0,0,0);\n#endif\nvec4 Blob_Info_Q181;\n#if BLOB_ENABLE_2\nBlob_Vertex_B180(Pos_World_Q115,Nrm_World_Q128,Tangent_World_N_Q131,Binormal_World_N_Q132,Result_Q178,_Blob_Intensity_,_Blob_Near_Size_2_,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,_Blob_Fade_Length_,_Blob_Pulse_2_,_Blob_Fade_2_,Blob_Info_Q181);\n#else\nBlob_Info_Q181=vec4(0,0,0,0);\n#endif\nfloat Gradient1_Q130;\nfloat Gradient2_Q130;\n#if SMOOTH_EDGES\nEdge_AA_Vertex_B130(Pos_World_Q115,position,normal,cameraPosition,Radial_Gradient_Q129,Radial_Dir_Q129,tangent,Gradient1_Q130,Gradient2_Q130);\n#else\nGradient1_Q130=1.0;\nGradient2_Q130=1.0;\n#endif\nvec2 Rect_UV_Q139;\nvec4 Rect_Parms_Q139;\nvec2 Scale_XY_Q139;\nvec2 Line_UV_Q139;\nRound_Rect_Vertex_B139(New_UV_Q129,Radius_Q147,0.0,Anisotropy_Q133,Gradient1_Q130,Gradient2_Q130,Rect_UV_Q139,Rect_Parms_Q139,Scale_XY_Q139,Line_UV_Q139);\nvec3 Line_Vertex_Q135;\nLine_Vertex_B135(Scale_XY_Q139,Line_UV_Q139,0.0,_Rate_,_Highlight_Transform_,Line_Vertex_Q135);\nvec3 Position=Pos_World_Q115;\nvec3 Normal=Dir_Q140;\nvec2 UV=Rect_UV_Q139;\nvec3 Tangent=Line_Vertex_Q135;\nvec3 Binormal=Nrm_World_Q128;\nvec4 Color=Out_Color_Q145;\nvec4 Extra1=Rect_Parms_Q139;\nvec4 Extra2=Blob_Info_Q180;\nvec4 Extra3=Blob_Info_Q181;\ngl_Position=viewProjection*vec4(Position,1);\nvPosition=Position;\nvNormal=Normal;\nvUV=UV;\nvTangent=Tangent;\nvBinormal=Binormal;\nvColor=Color;\nvExtra1=Extra1;\nvExtra2=Extra2;\nvExtra3=Extra3;\n}";class Tt extends n.MaterialDefines{constructor(){super(),this.BLOB_ENABLE=!0,this.BLOB_ENABLE_2=!0,this.SMOOTH_EDGES=!0,this.IRIDESCENT_MAP_ENABLE=!0,this._needNormals=!0,this.rebuild()}}class Pt extends n.PushMaterial{constructor(t,e){super(t,e),this.radius=.03,this.lineWidth=.01,this.absoluteSizes=!1,this._filterWidth=1,this.baseColor=new n.Color4(.0392157,.0666667,.207843,1),this.lineColor=new n.Color4(.14902,.133333,.384314,1),this.blobIntensity=.98,this.blobFarSize=.04,this.blobNearDistance=0,this.blobFarDistance=.08,this.blobFadeLength=.08,this.blobNearSize=.22,this.blobPulse=0,this.blobFade=0,this.blobNearSize2=.22,this.blobPulse2=0,this.blobFade2=0,this._rate=.135,this.highlightColor=new n.Color4(.98,.98,.98,1),this.highlightWidth=.25,this._highlightTransform=new n.Vector4(1,1,0,0),this._highlight=1,this.iridescenceIntensity=0,this.iridescenceEdgeIntensity=1,this._angle=-45,this.fadeOut=1,this._reflected=!0,this._frequency=1,this._verticalOffset=0,this.globalLeftIndexTipPosition=n.Vector3.Zero(),this._globalLeftIndexTipPosition4=n.Vector4.Zero(),this.globalRightIndexTipPosition=n.Vector3.Zero(),this._globalRightIndexTipPosition4=n.Vector4.Zero(),this.alphaMode=n.Constants.ALPHA_DISABLE,this.backFaceCulling=!1,this._blobTexture=new n.Texture(Pt.BLOB_TEXTURE_URL,this.getScene(),!0,!1,n.Texture.NEAREST_SAMPLINGMODE),this._iridescentMap=new n.Texture(Pt.IM_TEXTURE_URL,this.getScene(),!0,!1,n.Texture.NEAREST_SAMPLINGMODE)}needAlphaBlending(){return!1}needAlphaTesting(){return!1}getAlphaTestTexture(){return null}isReadyForSubMesh(t,e,i){if(this.isFrozen&&e.effect&&e.effect._wasPreviouslyReady)return!0;e.materialDefines||(e.materialDefines=new Tt);const o=e.materialDefines,s=this.getScene();if(this._isReadyForSubMesh(e))return!0;const r=s.getEngine();if(n.MaterialHelper.PrepareDefinesForAttributes(t,o,!1,!1),o.isDirty){o.markAsProcessed(),s.resetCachedMaterial();const t=new n.EffectFallbacks;o.FOG&&t.addFallback(1,"FOG"),n.MaterialHelper.HandleFallbacksForShadows(o,t),o.IMAGEPROCESSINGPOSTPROCESS=s.imageProcessingConfiguration.applyByPostProcess;const i=[n.VertexBuffer.PositionKind];o.NORMAL&&i.push(n.VertexBuffer.NormalKind),o.UV1&&i.push(n.VertexBuffer.UVKind),o.UV2&&i.push(n.VertexBuffer.UV2Kind),o.VERTEXCOLOR&&i.push(n.VertexBuffer.ColorKind),o.TANGENT&&i.push(n.VertexBuffer.TangentKind),n.MaterialHelper.PrepareAttributesForInstances(i,o);const a="fluentBackplate",l=o.toString(),_=["world","viewProjection","cameraPosition","_Radius_","_Line_Width_","_Absolute_Sizes_","_Filter_Width_","_Base_Color_","_Line_Color_","_Radius_Top_Left_","_Radius_Top_Right_","_Radius_Bottom_Left_","_Radius_Bottom_Right_","_Blob_Position_","_Blob_Intensity_","_Blob_Near_Size_","_Blob_Far_Size_","_Blob_Near_Distance_","_Blob_Far_Distance_","_Blob_Fade_Length_","_Blob_Pulse_","_Blob_Fade_","_Blob_Texture_","_Blob_Position_2_","_Blob_Near_Size_2_","_Blob_Pulse_2_","_Blob_Fade_2_","_Rate_","_Highlight_Color_","_Highlight_Width_","_Highlight_Transform_","_Highlight_","_Iridescence_Intensity_","_Iridescence_Edge_Intensity_","_Angle_","_Fade_Out_","_Reflected_","_Frequency_","_Vertical_Offset_","_Iridescent_Map_","_Use_Global_Left_Index_","_Use_Global_Right_Index_","Global_Left_Index_Tip_Position","Global_Right_Index_Tip_Position"],h=["_Blob_Texture_","_Iridescent_Map_"],c=new Array;n.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:_,uniformBuffersNames:c,samplers:h,defines:o,maxSimultaneousLights:4}),e.setEffect(s.getEngine().createEffect(a,{attributes:i,uniformsNames:_,uniformBuffersNames:c,samplers:h,defines:l,fallbacks:t,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},r),o,this._materialContext)}return!(!e.effect||!e.effect.isReady()||(o._renderId=s.getRenderId(),e.effect._wasPreviouslyReady=!0,0))}bindForSubMesh(t,e,i){var o,s;if(!i.materialDefines)return;const r=i.effect;r&&(this._activeEffect=r,this.bindOnlyWorldMatrix(t),this._activeEffect.setMatrix("viewProjection",this.getScene().getTransformMatrix()),this._activeEffect.setVector3("cameraPosition",null!==(s=null===(o=this.getScene().activeCamera)||void 0===o?void 0:o.position)&&void 0!==s?s:n.Vector3.ZeroReadOnly),this._activeEffect.setFloat("_Radius_",this.radius),this._activeEffect.setFloat("_Line_Width_",this.lineWidth),this._activeEffect.setFloat("_Absolute_Sizes_",this.absoluteSizes?1:0),this._activeEffect.setFloat("_Filter_Width_",this._filterWidth),this._activeEffect.setDirectColor4("_Base_Color_",this.baseColor),this._activeEffect.setDirectColor4("_Line_Color_",this.lineColor),this._activeEffect.setFloat("_Radius_Top_Left_",1),this._activeEffect.setFloat("_Radius_Top_Right_",1),this._activeEffect.setFloat("_Radius_Bottom_Left_",1),this._activeEffect.setFloat("_Radius_Bottom_Right_",1),this._activeEffect.setFloat("_Blob_Intensity_",this.blobIntensity),this._activeEffect.setFloat("_Blob_Near_Size_",this.blobNearSize),this._activeEffect.setFloat("_Blob_Far_Size_",this.blobFarSize),this._activeEffect.setFloat("_Blob_Near_Distance_",this.blobNearDistance),this._activeEffect.setFloat("_Blob_Far_Distance_",this.blobFarDistance),this._activeEffect.setFloat("_Blob_Fade_Length_",this.blobFadeLength),this._activeEffect.setFloat("_Blob_Pulse_",this.blobPulse),this._activeEffect.setFloat("_Blob_Fade_",this.blobFade),this._activeEffect.setTexture("_Blob_Texture_",this._blobTexture),this._activeEffect.setFloat("_Blob_Near_Size_2_",this.blobNearSize2),this._activeEffect.setFloat("_Blob_Pulse_2_",this.blobPulse2),this._activeEffect.setFloat("_Blob_Fade_2_",this.blobFade2),this._activeEffect.setFloat("_Rate_",this._rate),this._activeEffect.setDirectColor4("_Highlight_Color_",this.highlightColor),this._activeEffect.setFloat("_Highlight_Width_",this.highlightWidth),this._activeEffect.setVector4("_Highlight_Transform_",this._highlightTransform),this._activeEffect.setFloat("_Highlight_",this._highlight),this._activeEffect.setFloat("_Iridescence_Intensity_",this.iridescenceIntensity),this._activeEffect.setFloat("_Iridescence_Edge_Intensity_",this.iridescenceEdgeIntensity),this._activeEffect.setFloat("_Angle_",this._angle),this._activeEffect.setFloat("_Fade_Out_",this.fadeOut),this._activeEffect.setFloat("_Reflected_",this._reflected?1:0),this._activeEffect.setFloat("_Frequency_",this._frequency),this._activeEffect.setFloat("_Vertical_Offset_",this._verticalOffset),this._activeEffect.setTexture("_Iridescent_Map_",this._iridescentMap),this._activeEffect.setFloat("_Use_Global_Left_Index_",1),this._activeEffect.setFloat("_Use_Global_Right_Index_",1),this._globalLeftIndexTipPosition4.set(this.globalLeftIndexTipPosition.x,this.globalLeftIndexTipPosition.y,this.globalLeftIndexTipPosition.z,1),this._activeEffect.setVector4("Global_Left_Index_Tip_Position",this._globalLeftIndexTipPosition4),this._globalRightIndexTipPosition4.set(this.globalRightIndexTipPosition.x,this.globalRightIndexTipPosition.y,this.globalRightIndexTipPosition.z,1),this._activeEffect.setVector4("Global_Right_Index_Tip_Position",this._globalRightIndexTipPosition4),this._afterBind(e,this._activeEffect))}getAnimatables(){return[]}dispose(t){super.dispose(t),this._blobTexture.dispose(),this._iridescentMap.dispose()}clone(t){return n.SerializationHelper.Clone((()=>new Pt(t,this.getScene())),this)}serialize(){const t=super.serialize();return t.customType="BABYLON.FluentBackplateMaterial",t}getClassName(){return"FluentBackplateMaterial"}static Parse(t,e,i){return n.SerializationHelper.Parse((()=>new Pt(t.name,e)),t,e,i)}}Pt.BLOB_TEXTURE_URL="https://assets.babylonjs.com/meshes/MRTK/mrtk-fluent-backplate-blob.png",Pt.IM_TEXTURE_URL="https://assets.babylonjs.com/meshes/MRTK/mrtk-fluent-backplate-iridescence.png",i([(0,n.serialize)()],Pt.prototype,"radius",void 0),i([(0,n.serialize)()],Pt.prototype,"lineWidth",void 0),i([(0,n.serialize)()],Pt.prototype,"absoluteSizes",void 0),i([(0,n.serialize)()],Pt.prototype,"baseColor",void 0),i([(0,n.serialize)()],Pt.prototype,"lineColor",void 0),i([(0,n.serialize)()],Pt.prototype,"blobIntensity",void 0),i([(0,n.serialize)()],Pt.prototype,"blobFarSize",void 0),i([(0,n.serialize)()],Pt.prototype,"blobNearDistance",void 0),i([(0,n.serialize)()],Pt.prototype,"blobFarDistance",void 0),i([(0,n.serialize)()],Pt.prototype,"blobFadeLength",void 0),i([(0,n.serialize)()],Pt.prototype,"blobNearSize",void 0),i([(0,n.serialize)()],Pt.prototype,"blobPulse",void 0),i([(0,n.serialize)()],Pt.prototype,"blobFade",void 0),i([(0,n.serialize)()],Pt.prototype,"blobNearSize2",void 0),i([(0,n.serialize)()],Pt.prototype,"blobPulse2",void 0),i([(0,n.serialize)()],Pt.prototype,"blobFade2",void 0),i([(0,n.serialize)()],Pt.prototype,"highlightColor",void 0),i([(0,n.serialize)()],Pt.prototype,"highlightWidth",void 0),i([(0,n.serialize)()],Pt.prototype,"iridescenceIntensity",void 0),i([(0,n.serialize)()],Pt.prototype,"iridescenceEdgeIntensity",void 0),i([(0,n.serialize)()],Pt.prototype,"fadeOut",void 0),i([(0,n.serializeAsVector3)()],Pt.prototype,"globalLeftIndexTipPosition",void 0),i([(0,n.serializeAsVector3)()],Pt.prototype,"globalRightIndexTipPosition",void 0),(0,n.RegisterClass)("BABYLON.GUI.FluentBackplateMaterial",Pt);class It extends st{constructor(t){super(t),this.titleBarMargin=.005,this.origin=new n.Vector3(0,0,0),this._dimensions=new n.Vector2(21.875,12.5),this._titleBarHeight=.625,this._titleText="",this._contentScaleRatio=1,this.minDimensions=new n.Vector2(15.625,6.25),this.defaultDimensions=this._dimensions.clone(),this._followButton=new mt("followButton"+this.name),this._followButton.isToggleButton=!0,this._closeButton=new mt("closeButton"+this.name),this._contentViewport=new n.Viewport(0,0,1,1),this._contentDragBehavior=new n.PointerDragBehavior({dragPlaneNormal:new n.Vector3(0,0,-1)})}get defaultBehavior(){return this._defaultBehavior}get dimensions(){return this._dimensions}set dimensions(t){let e=1;if(t.x<this.minDimensions.x||t.y<this.minDimensions.y){const i=t.x/t.y;e=this.minDimensions.x/this.minDimensions.y>i?this.minDimensions.x/t.x:this.minDimensions.y/t.y}this._dimensions.copyFrom(t).scaleInPlace(e),this._updatePivot(),this._positionElements()}get titleBarHeight(){return this._titleBarHeight}set titleBarHeight(t){this._titleBarHeight=t}set renderingGroupId(t){this._titleBar.renderingGroupId=t,this._titleBarTitle.renderingGroupId=t,this._contentPlate.renderingGroupId=t,this._backPlate.renderingGroupId=t}get renderingGroupId(){return this._titleBar.renderingGroupId}set title(t){this._titleText=t,this._titleTextComponent&&(this._titleTextComponent.text=t)}get title(){return this._titleText}_applyFacade(t){this._contentMaterial.albedoTexture=t,this._resetContentPositionAndZoom(),this._applyContentViewport(),t.attachToMesh(this._contentPlate,!0)}_addControl(t){t._host=this._host,this._host.utilityLayer&&t._prepareNode(this._host.utilityLayer.utilityLayerScene)}_getTypeName(){return"HolographicSlate"}_positionElements(){const t=this._followButton,e=this._closeButton,i=this._titleBar,o=this._titleBarTitle,s=this._contentPlate,r=this._backPlate;if(t&&e&&i){e.scaling.setAll(this.titleBarHeight),t.scaling.setAll(this.titleBarHeight),e.position.copyFromFloats(this.dimensions.x-this.titleBarHeight/2,-this.titleBarHeight/2,0).addInPlace(this.origin),t.position.copyFromFloats(this.dimensions.x-3*this.titleBarHeight/2,-this.titleBarHeight/2,0).addInPlace(this.origin);const a=this.dimensions.y-this.titleBarHeight-this.titleBarMargin,l=s.getScene().useRightHandedSystem;i.scaling.set(this.dimensions.x,this.titleBarHeight,n.Epsilon),o.scaling.set(this.dimensions.x-2*this.titleBarHeight,this.titleBarHeight,n.Epsilon),s.scaling.copyFromFloats(this.dimensions.x,a,n.Epsilon),r.scaling.copyFromFloats(this.dimensions.x,a,n.Epsilon),i.position.copyFromFloats(this.dimensions.x/2,-this.titleBarHeight/2,0).addInPlace(this.origin),o.position.copyFromFloats(this.dimensions.x/2-this.titleBarHeight,-this.titleBarHeight/2,l?n.Epsilon:-n.Epsilon).addInPlace(this.origin),s.position.copyFromFloats(this.dimensions.x/2,-(this.titleBarHeight+this.titleBarMargin+a/2),0).addInPlace(this.origin),r.position.copyFromFloats(this.dimensions.x/2,-(this.titleBarHeight+this.titleBarMargin+a/2),l?-n.Epsilon:n.Epsilon).addInPlace(this.origin),this._titleTextComponent.host.scaleTo(It.DEFAULT_TEXT_RESOLUTION_Y*o.scaling.x/o.scaling.y,It.DEFAULT_TEXT_RESOLUTION_Y);const _=this.dimensions.x/a;this._contentViewport.width=this._contentScaleRatio,this._contentViewport.height=this._contentScaleRatio/_,this._applyContentViewport(),this._gizmo&&this._gizmo.updateBoundingBox()}}_applyContentViewport(){var t;if((null===(t=this._contentPlate)||void 0===t?void 0:t.material)&&this._contentPlate.material.albedoTexture){const t=this._contentPlate.material.albedoTexture;t.uScale=this._contentScaleRatio,t.vScale=this._contentScaleRatio/this._contentViewport.width*this._contentViewport.height,t.uOffset=this._contentViewport.x,t.vOffset=this._contentViewport.y}}_resetContentPositionAndZoom(){this._contentViewport.x=0,this._contentViewport.y=1-this._contentViewport.height/this._contentViewport.width,this._contentScaleRatio=1}_updatePivot(){if(!this.mesh)return;const t=new n.Vector3(.5*this.dimensions.x,.5*-this.dimensions.y,n.Epsilon);t.addInPlace(this.origin),t.z=0;const e=new n.Vector3(0,0,0);n.Vector3.TransformCoordinatesToRef(e,this.mesh.computeWorldMatrix(!0),e),this.mesh.setPivotPoint(t);const i=new n.Vector3(0,0,0);n.Vector3.TransformCoordinatesToRef(i,this.mesh.computeWorldMatrix(!0),i),this.mesh.position.addInPlace(e).subtractInPlace(i)}_createNode(t){const e=new n.Mesh("slate_"+this.name,t);this._titleBar=(0,n.CreateBox)("titleBar_"+this.name,{size:1},t),this._titleBarTitle=(0,n.CreatePlane)("titleText_"+this.name,{size:1},t),this._titleBarTitle.parent=e,this._titleBarTitle.isPickable=!1;const i=$.CreateForMesh(this._titleBarTitle);if(this._titleTextComponent=new v("titleText_"+this.name,this._titleText),this._titleTextComponent.textWrapping=p.Ellipsis,this._titleTextComponent.textHorizontalAlignment=f.HORIZONTAL_ALIGNMENT_LEFT,this._titleTextComponent.color="white",this._titleTextComponent.fontSize=It.DEFAULT_TEXT_RESOLUTION_Y/2,this._titleTextComponent.paddingLeft=It.DEFAULT_TEXT_RESOLUTION_Y/4,i.addControl(this._titleTextComponent),t.useRightHandedSystem){const e=new n.Vector4(0,0,1,1);this._contentPlate=(0,n.CreatePlane)("contentPlate_"+this.name,{size:1,sideOrientation:n.VertexData.BACKSIDE,frontUVs:e},t),this._backPlate=(0,n.CreatePlane)("backPlate_"+this.name,{size:1,sideOrientation:n.VertexData.FRONTSIDE},t)}else{const e=new n.Vector4(0,0,1,1);this._contentPlate=(0,n.CreatePlane)("contentPlate_"+this.name,{size:1,sideOrientation:n.VertexData.FRONTSIDE,frontUVs:e},t),this._backPlate=(0,n.CreatePlane)("backPlate_"+this.name,{size:1,sideOrientation:n.VertexData.BACKSIDE},t)}this._titleBar.parent=e,this._titleBar.isNearGrabbable=!0,this._contentPlate.parent=e,this._backPlate.parent=e,this._attachContentPlateBehavior(),this._addControl(this._followButton),this._addControl(this._closeButton);const o=this._followButton,s=this._closeButton;return o.node.parent=e,s.node.parent=e,this._positionElements(),this._followButton.imageUrl=It.ASSETS_BASE_URL+It.FOLLOW_ICON_FILENAME,this._closeButton.imageUrl=It.ASSETS_BASE_URL+It.CLOSE_ICON_FILENAME,this._followButton.isBackplateVisible=!1,this._closeButton.isBackplateVisible=!1,this._followButton.onToggleObservable.add((t=>{this._defaultBehavior.followBehaviorEnabled=t,this._defaultBehavior.followBehaviorEnabled&&this._defaultBehavior.followBehavior.recenter()})),this._closeButton.onPointerClickObservable.add((()=>{this.dispose()})),e.rotationQuaternion=n.Quaternion.Identity(),e.isVisible=!1,e}_attachContentPlateBehavior(){this._contentDragBehavior.attach(this._contentPlate),this._contentDragBehavior.moveAttached=!1,this._contentDragBehavior.useObjectOrientationForDragging=!0,this._contentDragBehavior.updateDragPlane=!1;const t=new n.Vector3,e=new n.Vector3,i=new n.Vector3,o=new n.Vector3,s=new n.Vector2;let r,a;this._contentDragBehavior.onDragStartObservable.add((s=>{this.node&&(r=this._contentViewport.clone(),a=this.node.computeWorldMatrix(!0),t.copyFrom(s.dragPlanePoint),e.set(this.dimensions.x,this.dimensions.y,n.Epsilon),e.y-=this.titleBarHeight+this.titleBarMargin,n.Vector3.TransformNormalToRef(e,a,e),i.copyFromFloats(0,1,0),n.Vector3.TransformNormalToRef(i,a,i),o.copyFromFloats(1,0,0),n.Vector3.TransformNormalToRef(o,a,o),i.normalize(),i.scaleInPlace(1/n.Vector3.Dot(i,e)),o.normalize(),o.scaleInPlace(1/n.Vector3.Dot(o,e)))}));const l=new n.Vector3;this._contentDragBehavior.onDragObservable.add((e=>{l.copyFrom(e.dragPlanePoint),l.subtractInPlace(t),s.copyFromFloats(n.Vector3.Dot(l,o),n.Vector3.Dot(l,i)),this._contentViewport.x=n.Scalar.Clamp(r.x-l.x,0,1-this._contentViewport.width*this._contentScaleRatio),this._contentViewport.y=n.Scalar.Clamp(r.y-l.y,0,1-this._contentViewport.height*this._contentScaleRatio),this._applyContentViewport()}))}_affectMaterial(t){this._titleBarMaterial=new Pt(`${this.name} plateMaterial`,t.getScene()),this._contentMaterial=new ct(`${this.name} contentMaterial`,t.getScene()),this._contentMaterial.renderBorders=!0,this._backMaterial=new Pt(`${this.name} backPlate`,t.getScene()),this._backMaterial.lineWidth=n.Epsilon,this._backMaterial.radius=.005,this._backMaterial.backFaceCulling=!0,this._titleBar.material=this._titleBarMaterial,this._contentPlate.material=this._contentMaterial,this._backPlate.material=this._backMaterial,this._resetContent(),this._applyContentViewport()}_prepareNode(t){super._prepareNode(t),this._gizmo=new Ct(this._host.utilityLayer),this._gizmo.attachedSlate=this,this._defaultBehavior=new pt,this._defaultBehavior.attach(this.node,[this._titleBar]),this._defaultBehavior.sixDofDragBehavior.onDragStartObservable.add((()=>{this._followButton.isToggled=!1})),this._positionChangedObserver=this._defaultBehavior.sixDofDragBehavior.onPositionChangedObservable.add((()=>{this._gizmo.updateBoundingBox()})),this._updatePivot(),this.resetDefaultAspectAndPose(!1)}resetDefaultAspectAndPose(t=!0){if(!this._host||!this._host.utilityLayer||!this.node)return;const e=this._host.utilityLayer.utilityLayerScene,i=e.activeCamera;if(i){const o=i.getWorldMatrix(),s=n.Vector3.TransformNormal(n.Vector3.Backward(e.useRightHandedSystem),o);this.origin.setAll(0),this._gizmo.updateBoundingBox();const r=this.node.getAbsolutePivotPoint();this.node.position.copyFrom(i.position).subtractInPlace(s).subtractInPlace(r),this.node.rotationQuaternion=n.Quaternion.FromLookDirectionLH(s,new n.Vector3(0,1,0)),t&&(this.dimensions=this.defaultDimensions)}}dispose(){super.dispose(),this._titleBarMaterial.dispose(),this._contentMaterial.dispose(),this._titleBar.dispose(),this._titleBarTitle.dispose(),this._contentPlate.dispose(),this._backPlate.dispose(),this._followButton.dispose(),this._closeButton.dispose(),this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver),this._defaultBehavior.sixDofDragBehavior.onPositionChangedObservable.remove(this._positionChangedObserver),this._defaultBehavior.detach(),this._gizmo.dispose(),this._contentDragBehavior.detach()}}It.ASSETS_BASE_URL="https://assets.babylonjs.com/meshes/MRTK/",It.CLOSE_ICON_FILENAME="IconClose.png",It.FOLLOW_ICON_FILENAME="IconFollowMe.png",It.DEFAULT_TEXT_RESOLUTION_Y=102.4;class Rt extends lt{constructor(t){super(t),this._backPlateMargin=1.25}get backPlateMargin(){return this._backPlateMargin}set backPlateMargin(t){this._backPlateMargin=t,this._children.length>=1&&(this.children.forEach((t=>{this._updateCurrentMinMax(t.position)})),this._updateMargins())}_createNode(t){const e=new n.Mesh(`menu_${this.name}`,t);return this._backPlate=(0,n.CreateBox)("backPlate"+this.name,{size:1},t),this._backPlate.parent=e,e}_affectMaterial(t){this._backPlateMaterial=new ct(this.name+"backPlateMaterial",t.getScene()),this._backPlateMaterial.albedoColor=new n.Color3(.08,.15,.55),this._backPlateMaterial.renderBorders=!0,this._backPlateMaterial.renderHoverLight=!0,this._pickedPointObserver=this._host.onPickedPointChangedObservable.add((t=>{t?(this._backPlateMaterial.hoverPosition=t,this._backPlateMaterial.hoverColor.a=1):this._backPlateMaterial.hoverColor.a=0})),this._backPlate.material=this._backPlateMaterial}_mapGridNode(t,e){t.mesh&&(t.position=e.clone(),this._updateCurrentMinMax(e))}_finalProcessing(){this._updateMargins()}_updateCurrentMinMax(t){this._currentMin||(this._currentMin=t.clone(),this._currentMax=t.clone()),this._currentMin.minimizeInPlace(t),this._currentMax.maximizeInPlace(t)}_updateMargins(){if(this._children.length>0){this._currentMin.addInPlaceFromFloats(-this._cellWidth/2,-this._cellHeight/2,0),this._currentMax.addInPlaceFromFloats(this._cellWidth/2,this._cellHeight/2,0);const t=this._currentMax.subtract(this._currentMin);this._backPlate.scaling.x=t.x+this._cellWidth*this.backPlateMargin,this._backPlate.scaling.y=t.y+this._cellHeight*this.backPlateMargin,this._backPlate.scaling.z=.001;for(let e=0;e<this._children.length;e++)this._children[e].position.subtractInPlace(this._currentMin).subtractInPlace(t.scale(.5)),this._children[e].position.z-=.01}this._currentMin=null,this._currentMax=null}addButton(t){const e=this.blockLayout;return e||(this.blockLayout=!0),super.addControl(t),t.isBackplateVisible=!1,t.scaling.scaleInPlace(Rt.MENU_BUTTON_SCALE),e||(this.blockLayout=!1),this}addControl(t){return n.Logger.Warn("TouchHolographicMenu can only contain buttons. Please use the method `addButton` instead."),this}dispose(){super.dispose(),this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver)}}Rt.MENU_BUTTON_SCALE=1;class St extends Rt{constructor(t,e){super(e),this._handConstraintBehavior=new n.HandConstraintBehavior,this._handConstraintBehavior.linkToXRExperience(t),this.backPlateMargin=.15,this.rows=3}get handConstraintBehavior(){return this._handConstraintBehavior}_createNode(t){const e=super._createNode(t);return this._handConstraintBehavior.attach(e),e}dispose(){super.dispose(),this._handConstraintBehavior.detach()}}class wt extends rt{constructor(t,e){super(e),this._currentMesh=t,this.pointerEnterAnimation=()=>{this.mesh&&this.mesh.scaling.scaleInPlace(1.1)},this.pointerOutAnimation=()=>{this.mesh&&this.mesh.scaling.scaleInPlace(1/1.1)},this.pointerDownAnimation=()=>{this.mesh&&this.mesh.scaling.scaleInPlace(.95)},this.pointerUpAnimation=()=>{this.mesh&&this.mesh.scaling.scaleInPlace(1/.95)}}_getTypeName(){return"MeshButton3D"}_createNode(t){return this._currentMesh.getChildMeshes().forEach((t=>{this._injectGUI3DReservedDataStore(t).control=this})),this._currentMesh}_affectMaterial(t){}}class Mt extends Rt{constructor(t){super(t),this._isPinned=!1,this._defaultBehavior=new pt,this._dragObserver=this._defaultBehavior.sixDofDragBehavior.onDragObservable.add((()=>{this.isPinned=!0})),this.backPlateMargin=1}get defaultBehavior(){return this._defaultBehavior}get isPinned(){return this._isPinned}set isPinned(t){this._pinButton.isToggled===t?(this._isPinned=t,this._defaultBehavior.followBehaviorEnabled=!t):this._pinButton.isToggled=t}_createPinButton(t){const e=new mt("pin"+this.name,!1);return e.imageUrl=Mt.ASSETS_BASE_URL+Mt.PIN_ICON_FILENAME,e.parent=this,e._host=this._host,e.isToggleButton=!0,e.onToggleObservable.add((t=>{this.isPinned=t})),this._host.utilityLayer&&(e._prepareNode(this._host.utilityLayer.utilityLayerScene),e.scaling.scaleInPlace(Rt.MENU_BUTTON_SCALE),e.node&&(e.node.parent=t)),e}_createNode(t){const e=super._createNode(t);return this._pinButton=this._createPinButton(e),this.isPinned=!1,this._defaultBehavior.attach(e,[this._backPlate]),this._defaultBehavior.followBehavior.ignoreCameraPitchAndRoll=!0,this._defaultBehavior.followBehavior.pitchOffset=-15,this._defaultBehavior.followBehavior.minimumDistance=.3,this._defaultBehavior.followBehavior.defaultDistance=.4,this._defaultBehavior.followBehavior.maximumDistance=.6,this._backPlate.isNearGrabbable=!0,e.isVisible=!1,e}_finalProcessing(){super._finalProcessing(),this._pinButton.position.copyFromFloats((this._backPlate.scaling.x+Rt.MENU_BUTTON_SCALE)/2,this._backPlate.scaling.y/2,0)}dispose(){super.dispose(),this._defaultBehavior.sixDofDragBehavior.onDragObservable.remove(this._dragObserver),this._defaultBehavior.detach()}}Mt.ASSETS_BASE_URL="https://assets.babylonjs.com/meshes/MRTK/",Mt.PIN_ICON_FILENAME="IconPin.png";class Ot extends lt{_mapGridNode(t,e){const i=t.mesh;if(!i)return;t.position=e.clone();const o=n.TmpVectors.Vector3[0];switch(o.copyFrom(e),this.orientation){case at.FACEORIGIN_ORIENTATION:case at.FACEFORWARD_ORIENTATION:o.addInPlace(new n.Vector3(0,0,1)),i.lookAt(o);break;case at.FACEFORWARDREVERSED_ORIENTATION:case at.FACEORIGINREVERSED_ORIENTATION:o.addInPlace(new n.Vector3(0,0,-1)),i.lookAt(o)}}}class Et extends lt{constructor(){super(...arguments),this._iteration=100}get iteration(){return this._iteration}set iteration(t){this._iteration!==t&&(this._iteration=t,n.Tools.SetImmediate((()=>{this._arrangeChildren()})))}_mapGridNode(t,e){const i=t.mesh,o=this._scatterMapping(e);if(i){switch(this.orientation){case at.FACEORIGIN_ORIENTATION:case at.FACEFORWARD_ORIENTATION:i.lookAt(new n.Vector3(0,0,1));break;case at.FACEFORWARDREVERSED_ORIENTATION:case at.FACEORIGINREVERSED_ORIENTATION:i.lookAt(new n.Vector3(0,0,-1))}t.position=o}}_scatterMapping(t){return t.x=(1-2*Math.random())*this._cellWidth,t.y=(1-2*Math.random())*this._cellHeight,t}_finalProcessing(){const t=[];for(const e of this._children)e.mesh&&t.push(e.mesh);for(let e=0;e<this._iteration;e++){t.sort(((t,e)=>{const i=t.position.lengthSquared(),o=e.position.lengthSquared();return i<o?1:i>o?-1:0}));const e=Math.pow(this.margin,2),i=Math.max(this._cellWidth,this._cellHeight),o=n.TmpVectors.Vector2[0],s=n.TmpVectors.Vector3[0];for(let n=0;n<t.length-1;n++)for(let r=n+1;r<t.length;r++)if(n!=r){t[r].position.subtractToRef(t[n].position,s),o.x=s.x,o.y=s.y;const a=i;let l=o.lengthSquared()-e;l-=Math.min(l,e),l<Math.pow(a,2)&&(o.normalize(),s.scaleInPlace(.5*(a-Math.sqrt(l))),t[r].position.addInPlace(s),t[n].position.subtractInPlace(s))}}}}n.ShaderStore.ShadersStore.mrdlSliderBarPixelShader="uniform vec3 cameraPosition;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec4 vColor;\nvarying vec4 vExtra1;\nvarying vec4 vExtra2;\nvarying vec4 vExtra3;\nuniform float _Radius_;\nuniform float _Bevel_Front_;\nuniform float _Bevel_Front_Stretch_;\nuniform float _Bevel_Back_;\nuniform float _Bevel_Back_Stretch_;\nuniform float _Radius_Top_Left_;\nuniform float _Radius_Top_Right_;\nuniform float _Radius_Bottom_Left_;\nuniform float _Radius_Bottom_Right_;\nuniform bool _Bulge_Enabled_;\nuniform float _Bulge_Height_;\nuniform float _Bulge_Radius_;\nuniform float _Sun_Intensity_;\nuniform float _Sun_Theta_;\nuniform float _Sun_Phi_;\nuniform float _Indirect_Diffuse_;\nuniform vec4 _Albedo_;\nuniform float _Specular_;\nuniform float _Shininess_;\nuniform float _Sharpness_;\nuniform float _Subsurface_;\nuniform vec4 _Left_Color_;\nuniform vec4 _Right_Color_;\nuniform float _Reflection_;\nuniform float _Front_Reflect_;\nuniform float _Edge_Reflect_;\nuniform float _Power_;\nuniform vec4 _Sky_Color_;\nuniform vec4 _Horizon_Color_;\nuniform vec4 _Ground_Color_;\nuniform float _Horizon_Power_;\nuniform sampler2D _Reflection_Map_;\nuniform sampler2D _Indirect_Environment_;\nuniform float _Width_;\nuniform float _Fuzz_;\nuniform float _Min_Fuzz_;\nuniform float _Clip_Fade_;\nuniform float _Hue_Shift_;\nuniform float _Saturation_Shift_;\nuniform float _Value_Shift_;\nuniform vec3 _Blob_Position_;\nuniform float _Blob_Intensity_;\nuniform float _Blob_Near_Size_;\nuniform float _Blob_Far_Size_;\nuniform float _Blob_Near_Distance_;\nuniform float _Blob_Far_Distance_;\nuniform float _Blob_Fade_Length_;\nuniform float _Blob_Pulse_;\nuniform float _Blob_Fade_;\nuniform sampler2D _Blob_Texture_;\nuniform vec3 _Blob_Position_2_;\nuniform float _Blob_Near_Size_2_;\nuniform float _Blob_Pulse_2_;\nuniform float _Blob_Fade_2_;\nuniform vec3 _Left_Index_Pos_;\nuniform vec3 _Right_Index_Pos_;\nuniform vec3 _Left_Index_Middle_Pos_;\nuniform vec3 _Right_Index_Middle_Pos_;\nuniform sampler2D _Decal_;\nuniform vec2 _Decal_Scale_XY_;\nuniform bool _Decal_Front_Only_;\nuniform float _Rim_Intensity_;\nuniform sampler2D _Rim_Texture_;\nuniform float _Rim_Hue_Shift_;\nuniform float _Rim_Saturation_Shift_;\nuniform float _Rim_Value_Shift_;\nuniform float _Iridescence_Intensity_;\nuniform sampler2D _Iridescence_Texture_;\nuniform bool Use_Global_Left_Index;\nuniform bool Use_Global_Right_Index;\nuniform vec4 Global_Left_Index_Tip_Position;\nuniform vec4 Global_Right_Index_Tip_Position;\nuniform vec4 Global_Left_Thumb_Tip_Position;\nuniform vec4 Global_Right_Thumb_Tip_Position;\nuniform vec4 Global_Left_Index_Middle_Position;\nuniform vec4 Global_Right_Index_Middle_Position;\nuniform float Global_Left_Index_Tip_Proximity;\nuniform float Global_Right_Index_Tip_Proximity;\nvoid Blob_Fragment_B30(\nsampler2D Blob_Texture,\nvec4 Blob_Info1,\nvec4 Blob_Info2,\nout vec4 Blob_Color)\n{\nfloat k1=dot(Blob_Info1.xy,Blob_Info1.xy);\nfloat k2=dot(Blob_Info2.xy,Blob_Info2.xy);\nvec3 closer=k1<k2 ? vec3(k1,Blob_Info1.z,Blob_Info1.w) : vec3(k2,Blob_Info2.z,Blob_Info2.w);\nBlob_Color=closer.z*texture(Blob_Texture,vec2(vec2(sqrt(closer.x),closer.y).x,1.0-vec2(sqrt(closer.x),closer.y).y))*clamp(1.0-closer.x,0.0,1.0);\n}\nvoid FastLinearTosRGB_B42(\nvec4 Linear,\nout vec4 sRGB)\n{\nsRGB.rgb=sqrt(clamp(Linear.rgb,0.0,1.0));\nsRGB.a=Linear.a;\n}\nvoid Scale_RGB_B59(\nvec4 Color,\nfloat Scalar,\nout vec4 Result)\n{\nResult=vec4(Scalar,Scalar,Scalar,1)*Color;\n}\nvoid Fragment_Main_B121(\nfloat Sun_Intensity,\nfloat Sun_Theta,\nfloat Sun_Phi,\nvec3 Normal,\nvec4 Albedo,\nfloat Fresnel_Reflect,\nfloat Shininess,\nvec3 Incident,\nvec4 Horizon_Color,\nvec4 Sky_Color,\nvec4 Ground_Color,\nfloat Indirect_Diffuse,\nfloat Specular,\nfloat Horizon_Power,\nfloat Reflection,\nvec4 Reflection_Sample,\nvec4 Indirect_Sample,\nfloat Sharpness,\nfloat SSS,\nfloat Subsurface,\nvec4 Translucence,\nvec4 Rim_Light,\nvec4 Iridescence,\nout vec4 Result)\n{\nfloat theta=Sun_Theta*2.0*3.14159;\nfloat phi=Sun_Phi*3.14159;\nvec3 lightDir= vec3(cos(phi)*cos(theta),sin(phi),cos(phi)*sin(theta));\nfloat NdotL=max(dot(lightDir,Normal),0.0);\nvec3 R=reflect(Incident,Normal);\nfloat RdotL=max(0.0,dot(R,lightDir));\nfloat specular=pow(RdotL,Shininess);\nspecular=mix(specular,smoothstep(0.495*Sharpness,1.0-0.495*Sharpness,specular),Sharpness);\nvec4 gi=mix(Ground_Color,Sky_Color,Normal.y*0.5+0.5);\nResult=((Sun_Intensity*NdotL+Indirect_Sample*Indirect_Diffuse+Translucence)*(1.0+SSS*Subsurface))*Albedo*(1.0-Fresnel_Reflect)+(Sun_Intensity*specular*Specular+Fresnel_Reflect*Reflection*Reflection_Sample)+Fresnel_Reflect*Rim_Light+Iridescence;\n}\nvoid Bulge_B79(\nbool Enabled,\nvec3 Normal,\nvec3 Tangent,\nfloat Bulge_Height,\nvec4 UV,\nfloat Bulge_Radius,\nvec3 ButtonN,\nout vec3 New_Normal)\n{\nvec2 xy=clamp(UV.xy*2.0,vec2(-1,-1),vec2(1,1));\nvec3 B=(cross(Normal,Tangent));\nfloat k=-clamp(1.0-length(xy)/Bulge_Radius,0.0,1.0)*Bulge_Height;\nk=sin(k*3.14159*0.5);\nk*=smoothstep(0.9998,0.9999,abs(dot(ButtonN,Normal)));\nNew_Normal=Normal*sqrt(1.0-k*k)+(xy.x*Tangent+xy.y*B)*k;\nNew_Normal=Enabled ? New_Normal : Normal;\n}\nvoid SSS_B77(\nvec3 ButtonN,\nvec3 Normal,\nvec3 Incident,\nout float Result)\n{\nfloat NdotI=abs(dot(Normal,Incident));\nfloat BdotI=abs(dot(ButtonN,Incident));\nResult=(abs(NdotI-BdotI)); \n}\nvoid FingerOcclusion_B67(\nfloat Width,\nfloat DistToCenter,\nfloat Fuzz,\nfloat Min_Fuzz,\nvec3 Position,\nvec3 Forward,\nvec3 Nearest,\nfloat Fade_Out,\nout float NotInShadow)\n{\nfloat d=dot((Nearest-Position),Forward);\nfloat sh=smoothstep(Width*0.5,Width*0.5+Fuzz*max(d,0.0)+Min_Fuzz,DistToCenter);\nNotInShadow=1.0-(1.0-sh)*smoothstep(-Fade_Out,0.0,d);\n}\nvoid FingerOcclusion_B68(\nfloat Width,\nfloat DistToCenter,\nfloat Fuzz,\nfloat Min_Fuzz,\nvec3 Position,\nvec3 Forward,\nvec3 Nearest,\nfloat Fade_Out,\nout float NotInShadow)\n{\nfloat d=dot((Nearest-Position),Forward);\nfloat sh=smoothstep(Width*0.5,Width*0.5+Fuzz*max(d,0.0)+Min_Fuzz,DistToCenter);\nNotInShadow=1.0-(1.0-sh)*smoothstep(-Fade_Out,0.0,d);\n}\nvoid Scale_Color_B91(\nvec4 Color,\nfloat Scalar,\nout vec4 Result)\n{\nResult=Scalar*Color;\n}\nvoid From_HSV_B73(\nfloat Hue,\nfloat Saturation,\nfloat Value,\nfloat Alpha,\nout vec4 Color)\n{\nvec4 K=vec4(1.0,2.0/3.0,1.0/3.0,3.0);\nvec3 p=abs(fract(vec3(Hue,Hue,Hue)+K.xyz)*6.0-K.www);\nColor.rgb=Value*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),Saturation);\nColor.a=Alpha;\n}\nvoid Fast_Fresnel_B122(\nfloat Front_Reflect,\nfloat Edge_Reflect,\nfloat Power,\nvec3 Normal,\nvec3 Incident,\nout float Transmit,\nout float Reflect)\n{\nfloat d=max(-dot(Incident,Normal),0.0);\nReflect=Front_Reflect+(Edge_Reflect-Front_Reflect)*pow(.01-d,Power);\nTransmit=1.0-Reflect;\n}\nvoid Mapped_Environment_B51(\nsampler2D Reflected_Environment,\nsampler2D Indirect_Environment,\nvec3 Dir,\nout vec4 Reflected_Color,\nout vec4 Indirect_Diffuse)\n{\nReflected_Color=texture(Reflected_Environment,vec2(atan(Dir.z,Dir.x)/3.14159*0.5,asin(Dir.y)/3.14159+0.5));\nIndirect_Diffuse=texture(Indirect_Environment,vec2(atan(Dir.z,Dir.x)/3.14159*0.5,asin(Dir.y)/3.14159+0.5));\n}\nvec4 SampleEnv_Bid50(vec3 D,vec4 S,vec4 H,vec4 G,float exponent)\n{\nfloat k=pow(abs(D.y),exponent);\nvec4 C;\nif (D.y>0.0) {\nC=mix(H,S,k);\n} else {\nC=mix(H,G,k); \n}\nreturn C;\n}\nvoid Sky_Environment_B50(\nvec3 Normal,\nvec3 Reflected,\nvec4 Sky_Color,\nvec4 Horizon_Color,\nvec4 Ground_Color,\nfloat Horizon_Power,\nout vec4 Reflected_Color,\nout vec4 Indirect_Color)\n{\nReflected_Color=SampleEnv_Bid50(Reflected,Sky_Color,Horizon_Color,Ground_Color,Horizon_Power);\nIndirect_Color=mix(Ground_Color,Sky_Color,Normal.y*0.5+0.5);\n}\nvoid Min_Segment_Distance_B65(\nvec3 P0,\nvec3 P1,\nvec3 Q0,\nvec3 Q1,\nout vec3 NearP,\nout vec3 NearQ,\nout float Distance)\n{\nvec3 u=P1-P0;\nvec3 v=Q1-Q0;\nvec3 w=P0-Q0;\nfloat a=dot(u,u);\nfloat b=dot(u,v);\nfloat c=dot(v,v);\nfloat d=dot(u,w);\nfloat e=dot(v,w);\nfloat D=a*c-b*b;\nfloat sD=D;\nfloat tD=D;\nfloat sc,sN,tc,tN;\nif (D<0.00001) {\nsN=0.0;\nsD=1.0;\ntN=e;\ntD=c;\n} else {\nsN=(b*e-c*d);\ntN=(a*e-b*d);\nif (sN<0.0) {\nsN=0.0;\ntN=e;\ntD=c;\n} else if (sN>sD) {\nsN=sD;\ntN=e+b;\ntD=c;\n}\n}\nif (tN<0.0) {\ntN=0.0;\nif (-d<0.0) {\nsN=0.0;\n} else if (-d>a) {\nsN=sD;\n} else {\nsN=-d;\nsD=a;\n}\n} else if (tN>tD) {\ntN=tD;\nif ((-d+b)<0.0) {\nsN=0.0;\n} else if ((-d+b)>a) {\nsN=sD;\n} else {\nsN=(-d+b);\nsD=a;\n}\n}\nsc=abs(sN)<0.000001 ? 0.0 : sN/sD;\ntc=abs(tN)<0.000001 ? 0.0 : tN/tD;\nNearP=P0+sc*u;\nNearQ=Q0+tc*v;\nDistance=distance(NearP,NearQ);\n}\nvoid To_XYZ_B74(\nvec3 Vec3,\nout float X,\nout float Y,\nout float Z)\n{\nX=Vec3.x;\nY=Vec3.y;\nZ=Vec3.z;\n}\nvoid Finger_Positions_B64(\nvec3 Left_Index_Pos,\nvec3 Right_Index_Pos,\nvec3 Left_Index_Middle_Pos,\nvec3 Right_Index_Middle_Pos,\nout vec3 Left_Index,\nout vec3 Right_Index,\nout vec3 Left_Index_Middle,\nout vec3 Right_Index_Middle)\n{\nLeft_Index= (Use_Global_Left_Index ? Global_Left_Index_Tip_Position.xyz : Left_Index_Pos);\nRight_Index= (Use_Global_Right_Index ? Global_Right_Index_Tip_Position.xyz : Right_Index_Pos);\nLeft_Index_Middle= (Use_Global_Left_Index ? Global_Left_Index_Middle_Position.xyz : Left_Index_Middle_Pos);\nRight_Index_Middle= (Use_Global_Right_Index ? Global_Right_Index_Middle_Position.xyz : Right_Index_Middle_Pos);\n}\nvoid VaryHSV_B108(\nvec3 HSV_In,\nfloat Hue_Shift,\nfloat Saturation_Shift,\nfloat Value_Shift,\nout vec3 HSV_Out)\n{\nHSV_Out=vec3(fract(HSV_In.x+Hue_Shift),clamp(HSV_In.y+Saturation_Shift,0.0,1.0),clamp(HSV_In.z+Value_Shift,0.0,1.0));\n}\nvoid Remap_Range_B114(\nfloat In_Min,\nfloat In_Max,\nfloat Out_Min,\nfloat Out_Max,\nfloat In,\nout float Out)\n{\nOut=mix(Out_Min,Out_Max,clamp((In-In_Min)/(In_Max-In_Min),0.0,1.0));\n}\nvoid To_HSV_B75(\nvec4 Color,\nout float Hue,\nout float Saturation,\nout float Value,\nout float Alpha,\nout vec3 HSV)\n{\nvec4 K=vec4(0.0,-1.0/3.0,2.0/3.0,-1.0);\nvec4 p=Color.g<Color.b ? vec4(Color.bg,K.wz) : vec4(Color.gb,K.xy);\nvec4 q=Color.r<p.x ? vec4(p.xyw,Color.r) : vec4(Color.r,p.yzx);\nfloat d=q.x-min(q.w,q.y);\nfloat e=1.0e-10;\nHue=abs(q.z+(q.w-q.y)/(6.0*d+e));\nSaturation=d/(q.x+e);\nValue=q.x;\nAlpha=Color.a;\nHSV=vec3(Hue,Saturation,Value);\n}\nvoid Code_B110(\nfloat X,\nout float Result)\n{\nResult=(acos(X)/3.14159-0.5)*2.0;\n}\nvoid Rim_Light_B132(\nvec3 Front,\nvec3 Normal,\nvec3 Incident,\nfloat Rim_Intensity,\nsampler2D Texture,\nout vec4 Result)\n{\nvec3 R=reflect(Incident,Normal);\nfloat RdotF=dot(R,Front);\nfloat RdotL=sqrt(1.0-RdotF*RdotF);\nvec2 UV=vec2(R.y*0.5+0.5,0.5);\nvec4 Color=texture(Texture,UV);\nResult=Color;\n}\nvoid main()\n{\nvec4 Blob_Color_Q30;\n#if BLOB_ENABLE\nBlob_Fragment_B30(_Blob_Texture_,vExtra2,vExtra3,Blob_Color_Q30);\n#else\nBlob_Color_Q30=vec4(0,0,0,0);\n#endif\nvec3 Incident_Q39=normalize(vPosition-cameraPosition);\nvec3 Normalized_Q38=normalize(vNormal);\nvec3 Normalized_Q71=normalize(vTangent);\nvec4 Color_Q83;\n#if DECAL_ENABLE\nColor_Q83=texture(_Decal_,vUV);\n#else\nColor_Q83=vec4(0,0,0,0);\n#endif\nfloat X_Q90;\nfloat Y_Q90;\nfloat Z_Q90;\nfloat W_Q90;\nX_Q90=vExtra1.x;\nY_Q90=vExtra1.y;\nZ_Q90=vExtra1.z;\nW_Q90=vExtra1.w;\nvec4 Linear_Q43;\nLinear_Q43.rgb=clamp(_Sky_Color_.rgb*_Sky_Color_.rgb,0.0,1.0);\nLinear_Q43.a=_Sky_Color_.a;\nvec4 Linear_Q44;\nLinear_Q44.rgb=clamp(_Horizon_Color_.rgb*_Horizon_Color_.rgb,0.0,1.0);\nLinear_Q44.a=_Horizon_Color_.a;\nvec4 Linear_Q45;\nLinear_Q45.rgb=clamp(_Ground_Color_.rgb*_Ground_Color_.rgb,0.0,1.0);\nLinear_Q45.a=_Ground_Color_.a;\nvec3 Left_Index_Q64;\nvec3 Right_Index_Q64;\nvec3 Left_Index_Middle_Q64;\nvec3 Right_Index_Middle_Q64;\nFinger_Positions_B64(_Left_Index_Pos_,_Right_Index_Pos_,_Left_Index_Middle_Pos_,_Right_Index_Middle_Pos_,Left_Index_Q64,Right_Index_Q64,Left_Index_Middle_Q64,Right_Index_Middle_Q64);\nvec4 Linear_Q46;\nLinear_Q46.rgb=clamp(_Albedo_.rgb*_Albedo_.rgb,0.0,1.0);\nLinear_Q46.a=_Albedo_.a;\nvec3 Normalized_Q107=normalize(vBinormal);\nvec3 Incident_Q70=normalize(vPosition-cameraPosition);\nvec3 New_Normal_Q79;\nBulge_B79(_Bulge_Enabled_,Normalized_Q38,Normalized_Q71,_Bulge_Height_,vColor,_Bulge_Radius_,vBinormal,New_Normal_Q79);\nfloat Result_Q77;\nSSS_B77(vBinormal,New_Normal_Q79,Incident_Q39,Result_Q77);\nvec4 Result_Q91;\nScale_Color_B91(Color_Q83,X_Q90,Result_Q91);\nfloat Transmit_Q122;\nfloat Reflect_Q122;\nFast_Fresnel_B122(_Front_Reflect_,_Edge_Reflect_,_Power_,New_Normal_Q79,Incident_Q39,Transmit_Q122,Reflect_Q122);\nfloat Product_Q125=Y_Q90*Y_Q90;\nvec3 NearP_Q65;\nvec3 NearQ_Q65;\nfloat Distance_Q65;\nMin_Segment_Distance_B65(Left_Index_Q64,Left_Index_Middle_Q64,vPosition,cameraPosition,NearP_Q65,NearQ_Q65,Distance_Q65);\nvec3 NearP_Q63;\nvec3 NearQ_Q63;\nfloat Distance_Q63;\nMin_Segment_Distance_B65(Right_Index_Q64,Right_Index_Middle_Q64,vPosition,cameraPosition,NearP_Q63,NearQ_Q63,Distance_Q63);\nvec3 Reflected_Q47=reflect(Incident_Q39,New_Normal_Q79);\nvec4 Product_Q103=Linear_Q46*vec4(1,1,1,1);\nvec4 Result_Q132;\nRim_Light_B132(Normalized_Q107,Normalized_Q38,Incident_Q70,_Rim_Intensity_,_Rim_Texture_,Result_Q132);\nfloat Dot_Q72=dot(Incident_Q70, Normalized_Q71);\nfloat MaxAB_Q123=max(Reflect_Q122,Product_Q125);\nfloat NotInShadow_Q67;\n#if OCCLUSION_ENABLED\nFingerOcclusion_B67(_Width_,Distance_Q65,_Fuzz_,_Min_Fuzz_,vPosition,vBinormal,NearP_Q65,_Clip_Fade_,NotInShadow_Q67);\n#else\nNotInShadow_Q67=1.0;\n#endif\nfloat NotInShadow_Q68;\n#if OCCLUSION_ENABLED\nFingerOcclusion_B68(_Width_,Distance_Q63,_Fuzz_,_Min_Fuzz_,vPosition,vBinormal,NearP_Q63,_Clip_Fade_,NotInShadow_Q68);\n#else\nNotInShadow_Q68=1.0;\n#endif\nvec4 Reflected_Color_Q51;\nvec4 Indirect_Diffuse_Q51;\n#if ENV_ENABLE\nMapped_Environment_B51(_Reflection_Map_,_Indirect_Environment_,Reflected_Q47,Reflected_Color_Q51,Indirect_Diffuse_Q51);\n#else\nReflected_Color_Q51=vec4(0,0,0,1);\nIndirect_Diffuse_Q51=vec4(0,0,0,1);\n#endif\nvec4 Reflected_Color_Q50;\nvec4 Indirect_Color_Q50;\n#if SKY_ENABLED\nSky_Environment_B50(New_Normal_Q79,Reflected_Q47,Linear_Q43,Linear_Q44,Linear_Q45,_Horizon_Power_,Reflected_Color_Q50,Indirect_Color_Q50);\n#else\nReflected_Color_Q50=vec4(0,0,0,1);\nIndirect_Color_Q50=vec4(0,0,0,1);\n#endif\nfloat Hue_Q75;\nfloat Saturation_Q75;\nfloat Value_Q75;\nfloat Alpha_Q75;\nvec3 HSV_Q75;\nTo_HSV_B75(Product_Q103,Hue_Q75,Saturation_Q75,Value_Q75,Alpha_Q75,HSV_Q75);\nfloat Hue_Q127;\nfloat Saturation_Q127;\nfloat Value_Q127;\nfloat Alpha_Q127;\nvec3 HSV_Q127;\nTo_HSV_B75(Result_Q132,Hue_Q127,Saturation_Q127,Value_Q127,Alpha_Q127,HSV_Q127);\nfloat Result_Q110;\nCode_B110(Dot_Q72,Result_Q110);\nfloat AbsA_Q76=abs(Result_Q110);\nfloat MinAB_Q58=min(NotInShadow_Q67,NotInShadow_Q68);\nvec4 Sum_Q48=Reflected_Color_Q51+Reflected_Color_Q50;\nvec4 Sum_Q49=Indirect_Diffuse_Q51+Indirect_Color_Q50;\nvec3 HSV_Out_Q126;\nVaryHSV_B108(HSV_Q127,_Rim_Hue_Shift_,_Rim_Saturation_Shift_,_Rim_Value_Shift_,HSV_Out_Q126);\nfloat Out_Q114;\nRemap_Range_B114(-1.0,1.0,0.0,1.0,Result_Q110,Out_Q114);\nfloat Product_Q106;\nProduct_Q106=AbsA_Q76*_Hue_Shift_;\nfloat X_Q128;\nfloat Y_Q128;\nfloat Z_Q128;\nTo_XYZ_B74(HSV_Out_Q126,X_Q128,Y_Q128,Z_Q128);\nvec2 Vec2_Q112=vec2(Out_Q114,0.5);\nvec3 HSV_Out_Q108;\nVaryHSV_B108(HSV_Q75,Product_Q106,_Saturation_Shift_,_Value_Shift_,HSV_Out_Q108);\nvec4 Color_Q129;\nFrom_HSV_B73(X_Q128,Y_Q128,Z_Q128,0.0,Color_Q129);\nvec4 Color_Q111;\n#if IRIDESCENCE_ENABLED\nColor_Q111=texture(_Iridescence_Texture_,Vec2_Q112);\n#else\nColor_Q111=vec4(0,0,0,0);\n#endif\nfloat X_Q74;\nfloat Y_Q74;\nfloat Z_Q74;\nTo_XYZ_B74(HSV_Out_Q108,X_Q74,Y_Q74,Z_Q74);\nvec4 Result_Q131=_Rim_Intensity_*Color_Q129;\nvec4 Result_Q113=_Iridescence_Intensity_*Color_Q111;\nvec4 Color_Q73;\nFrom_HSV_B73(X_Q74,Y_Q74,Z_Q74,0.0,Color_Q73);\nvec4 Result_Q84=Result_Q91+(1.0-Result_Q91.a)*Color_Q73;\nvec4 Result_Q121;\nFragment_Main_B121(_Sun_Intensity_,_Sun_Theta_,_Sun_Phi_,New_Normal_Q79,Result_Q84,MaxAB_Q123,_Shininess_,Incident_Q39,_Horizon_Color_,_Sky_Color_,_Ground_Color_,_Indirect_Diffuse_,_Specular_,_Horizon_Power_,_Reflection_,Sum_Q48,Sum_Q49,_Sharpness_,Result_Q77,_Subsurface_,vec4(0,0,0,0),Result_Q131,Result_Q113,Result_Q121);\nvec4 Result_Q59;\nScale_RGB_B59(Result_Q121,MinAB_Q58,Result_Q59);\nvec4 sRGB_Q42;\nFastLinearTosRGB_B42(Result_Q59,sRGB_Q42);\nvec4 Result_Q31=Blob_Color_Q30+(1.0-Blob_Color_Q30.a)*sRGB_Q42;\nvec4 Result_Q40=Result_Q31; Result_Q40.a=1.0;\nvec4 Out_Color=Result_Q40;\nfloat Clip_Threshold=0.001;\nbool To_sRGB=false;\ngl_FragColor=Out_Color;\n}";n.ShaderStore.ShadersStore.mrdlSliderBarVertexShader="uniform mat4 world;\nuniform mat4 viewProjection;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n#ifdef TANGENT\nattribute vec3 tangent;\n#else\nconst vec3 tangent=vec3(0.);\n#endif\nuniform float _Radius_;\nuniform float _Bevel_Front_;\nuniform float _Bevel_Front_Stretch_;\nuniform float _Bevel_Back_;\nuniform float _Bevel_Back_Stretch_;\nuniform float _Radius_Top_Left_;\nuniform float _Radius_Top_Right_;\nuniform float _Radius_Bottom_Left_;\nuniform float _Radius_Bottom_Right_;\nuniform bool _Bulge_Enabled_;\nuniform float _Bulge_Height_;\nuniform float _Bulge_Radius_;\nuniform float _Sun_Intensity_;\nuniform float _Sun_Theta_;\nuniform float _Sun_Phi_;\nuniform float _Indirect_Diffuse_;\nuniform vec4 _Albedo_;\nuniform float _Specular_;\nuniform float _Shininess_;\nuniform float _Sharpness_;\nuniform float _Subsurface_;\nuniform vec4 _Left_Color_;\nuniform vec4 _Right_Color_;\nuniform float _Reflection_;\nuniform float _Front_Reflect_;\nuniform float _Edge_Reflect_;\nuniform float _Power_;\nuniform vec4 _Sky_Color_;\nuniform vec4 _Horizon_Color_;\nuniform vec4 _Ground_Color_;\nuniform float _Horizon_Power_;\nuniform sampler2D _Reflection_Map_;\nuniform sampler2D _Indirect_Environment_;\nuniform float _Width_;\nuniform float _Fuzz_;\nuniform float _Min_Fuzz_;\nuniform float _Clip_Fade_;\nuniform float _Hue_Shift_;\nuniform float _Saturation_Shift_;\nuniform float _Value_Shift_;\nuniform vec3 _Blob_Position_;\nuniform float _Blob_Intensity_;\nuniform float _Blob_Near_Size_;\nuniform float _Blob_Far_Size_;\nuniform float _Blob_Near_Distance_;\nuniform float _Blob_Far_Distance_;\nuniform float _Blob_Fade_Length_;\nuniform float _Blob_Pulse_;\nuniform float _Blob_Fade_;\nuniform sampler2D _Blob_Texture_;\nuniform vec3 _Blob_Position_2_;\nuniform float _Blob_Near_Size_2_;\nuniform float _Blob_Pulse_2_;\nuniform float _Blob_Fade_2_;\nuniform vec3 _Left_Index_Pos_;\nuniform vec3 _Right_Index_Pos_;\nuniform vec3 _Left_Index_Middle_Pos_;\nuniform vec3 _Right_Index_Middle_Pos_;\nuniform sampler2D _Decal_;\nuniform vec2 _Decal_Scale_XY_;\nuniform bool _Decal_Front_Only_;\nuniform float _Rim_Intensity_;\nuniform sampler2D _Rim_Texture_;\nuniform float _Rim_Hue_Shift_;\nuniform float _Rim_Saturation_Shift_;\nuniform float _Rim_Value_Shift_;\nuniform float _Iridescence_Intensity_;\nuniform sampler2D _Iridescence_Texture_;\nuniform bool Use_Global_Left_Index;\nuniform bool Use_Global_Right_Index;\nuniform vec4 Global_Left_Index_Tip_Position;\nuniform vec4 Global_Right_Index_Tip_Position;\nuniform vec4 Global_Left_Thumb_Tip_Position;\nuniform vec4 Global_Right_Thumb_Tip_Position;\nuniform float Global_Left_Index_Tip_Proximity;\nuniform float Global_Right_Index_Tip_Proximity;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec4 vColor;\nvarying vec4 vExtra1;\nvarying vec4 vExtra2;\nvarying vec4 vExtra3;\nvoid Object_To_World_Pos_B12(\nvec3 Pos_Object,\nout vec3 Pos_World)\n{\nPos_World=(world*vec4(Pos_Object,1.0)).xyz;\n}\nvoid Object_To_World_Normal_B32(\nvec3 Nrm_Object,\nout vec3 Nrm_World)\n{\nNrm_World=(vec4(Nrm_Object,0.0)).xyz;\n}\nvoid Blob_Vertex_B23(\nvec3 Position,\nvec3 Normal,\nvec3 Tangent,\nvec3 Bitangent,\nvec3 Blob_Position,\nfloat Intensity,\nfloat Blob_Near_Size,\nfloat Blob_Far_Size,\nfloat Blob_Near_Distance,\nfloat Blob_Far_Distance,\nfloat Blob_Fade_Length,\nfloat Blob_Pulse,\nfloat Blob_Fade,\nout vec4 Blob_Info)\n{\nvec3 blob= (Use_Global_Left_Index ? Global_Left_Index_Tip_Position.xyz : Blob_Position);\nvec3 delta=blob-Position;\nfloat dist=dot(Normal,delta);\nfloat lerpValue=clamp((abs(dist)-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);\nfloat fadeValue=1.0-clamp((abs(dist)-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);\nfloat size=Blob_Near_Size+(Blob_Far_Size-Blob_Near_Size)*lerpValue;\nvec2 blobXY=vec2(dot(delta,Tangent),dot(delta,Bitangent))/(0.0001+size);\nfloat Fade=fadeValue*Intensity*Blob_Fade;\nfloat Distance=(lerpValue*0.5+0.5)*(1.0-Blob_Pulse);\nBlob_Info=vec4(blobXY.x,blobXY.y,Distance,Fade);\n}\nvoid Blob_Vertex_B24(\nvec3 Position,\nvec3 Normal,\nvec3 Tangent,\nvec3 Bitangent,\nvec3 Blob_Position,\nfloat Intensity,\nfloat Blob_Near_Size,\nfloat Blob_Far_Size,\nfloat Blob_Near_Distance,\nfloat Blob_Far_Distance,\nfloat Blob_Fade_Length,\nfloat Blob_Pulse,\nfloat Blob_Fade,\nout vec4 Blob_Info)\n{\nvec3 blob= (Use_Global_Right_Index ? Global_Right_Index_Tip_Position.xyz : Blob_Position);\nvec3 delta=blob-Position;\nfloat dist=dot(Normal,delta);\nfloat lerpValue=clamp((abs(dist)-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);\nfloat fadeValue=1.0-clamp((abs(dist)-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);\nfloat size=Blob_Near_Size+(Blob_Far_Size-Blob_Near_Size)*lerpValue;\nvec2 blobXY=vec2(dot(delta,Tangent),dot(delta,Bitangent))/(0.0001+size);\nfloat Fade=fadeValue*Intensity*Blob_Fade;\nfloat Distance=(lerpValue*0.5+0.5)*(1.0-Blob_Pulse);\nBlob_Info=vec4(blobXY.x,blobXY.y,Distance,Fade);\n}\nvoid Move_Verts_B130(\nfloat Anisotropy,\nvec3 P,\nfloat Radius,\nfloat Bevel,\nvec3 Normal_Object,\nfloat ScaleZ,\nfloat Stretch,\nout vec3 New_P,\nout vec2 New_UV,\nout float Radial_Gradient,\nout vec3 Radial_Dir,\nout vec3 New_Normal)\n{\nvec2 UV=P.xy*2.0+0.5;\nvec2 center=clamp(UV,0.0,1.0);\nvec2 delta=UV-center;\nfloat deltad=(length(delta)*2.0);\nfloat f=(Bevel+(Radius-Bevel)*Stretch)/Radius;\nfloat innerd=clamp(deltad*2.0,0.0,1.0);\nfloat outerd=clamp(deltad*2.0-1.0,0.0,1.0);\nfloat bevelAngle=outerd*3.14159*0.5;\nfloat sinb=sin(bevelAngle);\nfloat cosb=cos(bevelAngle);\nfloat beveld=(1.0-f)*innerd+f*sinb;\nfloat br=outerd;\nvec2 r2=2.0*vec2(Radius/Anisotropy,Radius);\nfloat dir=P.z<0.0001 ? 1.0 : -1.0;\nNew_UV=center+r2*((0.5-center)+normalize(delta+vec2(0.0,0.000001))*beveld*0.5);\nNew_P=vec3(New_UV-0.5,P.z+dir*(1.0-cosb)*Bevel*ScaleZ);\nRadial_Gradient=clamp((deltad-0.5)*2.0,0.0,1.0);\nRadial_Dir=vec3(delta*r2,0.0);\nvec3 beveledNormal=cosb*Normal_Object+sinb*vec3(delta.x,delta.y,0.0);\nNew_Normal=Normal_Object.z==0.0 ? Normal_Object : beveledNormal;\n}\nvoid Object_To_World_Dir_B60(\nvec3 Dir_Object,\nout vec3 Normal_World,\nout vec3 Normal_World_N,\nout float Normal_Length)\n{\nNormal_World=(world*vec4(Dir_Object,0.0)).xyz;\nNormal_Length=length(Normal_World);\nNormal_World_N=Normal_World/Normal_Length;\n}\nvoid To_XYZ_B78(\nvec3 Vec3,\nout float X,\nout float Y,\nout float Z)\n{\nX=Vec3.x;\nY=Vec3.y;\nZ=Vec3.z;\n}\nvoid Conditional_Float_B93(\nbool Which,\nfloat If_True,\nfloat If_False,\nout float Result)\n{\nResult=Which ? If_True : If_False;\n}\nvoid Object_To_World_Dir_B28(\nvec3 Dir_Object,\nout vec3 Binormal_World,\nout vec3 Binormal_World_N,\nout float Binormal_Length)\n{\nBinormal_World=(world*vec4(Dir_Object,0.0)).xyz;\nBinormal_Length=length(Binormal_World);\nBinormal_World_N=Binormal_World/Binormal_Length;\n}\nvoid Pick_Radius_B69(\nfloat Radius,\nfloat Radius_Top_Left,\nfloat Radius_Top_Right,\nfloat Radius_Bottom_Left,\nfloat Radius_Bottom_Right,\nvec3 Position,\nout float Result)\n{\nbool whichY=Position.y>0.0;\nResult=Position.x<0.0 ? (whichY ? Radius_Top_Left : Radius_Bottom_Left) : (whichY ? Radius_Top_Right : Radius_Bottom_Right);\nResult*=Radius;\n}\nvoid Conditional_Float_B36(\nbool Which,\nfloat If_True,\nfloat If_False,\nout float Result)\n{\nResult=Which ? If_True : If_False;\n}\nvoid Greater_Than_B37(\nfloat Left,\nfloat Right,\nout bool Not_Greater_Than,\nout bool Greater_Than)\n{\nGreater_Than=Left>Right;\nNot_Greater_Than=!Greater_Than;\n}\nvoid Remap_Range_B105(\nfloat In_Min,\nfloat In_Max,\nfloat Out_Min,\nfloat Out_Max,\nfloat In,\nout float Out)\n{\nOut=mix(Out_Min,Out_Max,clamp((In-In_Min)/(In_Max-In_Min),0.0,1.0));\n}\nvoid main()\n{\nvec2 XY_Q85;\nXY_Q85=(uv-vec2(0.5,0.5))*_Decal_Scale_XY_+vec2(0.5,0.5);\nvec3 Tangent_World_Q27;\nvec3 Tangent_World_N_Q27;\nfloat Tangent_Length_Q27;\nTangent_World_Q27=(world*vec4(vec3(1,0,0),0.0)).xyz;\nTangent_Length_Q27=length(Tangent_World_Q27);\nTangent_World_N_Q27=Tangent_World_Q27/Tangent_Length_Q27;\nvec3 Normal_World_Q60;\nvec3 Normal_World_N_Q60;\nfloat Normal_Length_Q60;\nObject_To_World_Dir_B60(vec3(0,0,1),Normal_World_Q60,Normal_World_N_Q60,Normal_Length_Q60);\nfloat X_Q78;\nfloat Y_Q78;\nfloat Z_Q78;\nTo_XYZ_B78(position,X_Q78,Y_Q78,Z_Q78);\nvec3 Nrm_World_Q26;\nNrm_World_Q26=normalize((world*vec4(normal,0.0)).xyz);\nvec3 Binormal_World_Q28;\nvec3 Binormal_World_N_Q28;\nfloat Binormal_Length_Q28;\nObject_To_World_Dir_B28(vec3(0,1,0),Binormal_World_Q28,Binormal_World_N_Q28,Binormal_Length_Q28);\nfloat Anisotropy_Q29=Tangent_Length_Q27/Binormal_Length_Q28;\nfloat Result_Q69;\nPick_Radius_B69(_Radius_,_Radius_Top_Left_,_Radius_Top_Right_,_Radius_Bottom_Left_,_Radius_Bottom_Right_,position,Result_Q69);\nfloat Anisotropy_Q53=Binormal_Length_Q28/Normal_Length_Q60;\nbool Not_Greater_Than_Q37;\nbool Greater_Than_Q37;\nGreater_Than_B37(Z_Q78,0.0,Not_Greater_Than_Q37,Greater_Than_Q37);\nvec4 Linear_Q101;\nLinear_Q101.rgb=clamp(_Left_Color_.rgb*_Left_Color_.rgb,0.0,1.0);\nLinear_Q101.a=_Left_Color_.a;\nvec4 Linear_Q102;\nLinear_Q102.rgb=clamp(_Right_Color_.rgb*_Right_Color_.rgb,0.0,1.0);\nLinear_Q102.a=_Right_Color_.a;\nvec3 Difference_Q61=vec3(0,0,0)-Normal_World_N_Q60;\nvec4 Out_Color_Q34=vec4(X_Q78,Y_Q78,Z_Q78,1);\nfloat Result_Q36;\nConditional_Float_B36(Greater_Than_Q37,_Bevel_Back_,_Bevel_Front_,Result_Q36);\nfloat Result_Q94;\nConditional_Float_B36(Greater_Than_Q37,_Bevel_Back_Stretch_,_Bevel_Front_Stretch_,Result_Q94);\nvec3 New_P_Q130;\nvec2 New_UV_Q130;\nfloat Radial_Gradient_Q130;\nvec3 Radial_Dir_Q130;\nvec3 New_Normal_Q130;\nMove_Verts_B130(Anisotropy_Q29,position,Result_Q69,Result_Q36,normal,Anisotropy_Q53,Result_Q94,New_P_Q130,New_UV_Q130,Radial_Gradient_Q130,Radial_Dir_Q130,New_Normal_Q130);\nfloat X_Q98;\nfloat Y_Q98;\nX_Q98=New_UV_Q130.x;\nY_Q98=New_UV_Q130.y;\nvec3 Pos_World_Q12;\nObject_To_World_Pos_B12(New_P_Q130,Pos_World_Q12);\nvec3 Nrm_World_Q32;\nObject_To_World_Normal_B32(New_Normal_Q130,Nrm_World_Q32);\nvec4 Blob_Info_Q23;\n#if BLOB_ENABLE\nBlob_Vertex_B23(Pos_World_Q12,Nrm_World_Q26,Tangent_World_N_Q27,Binormal_World_N_Q28,_Blob_Position_,_Blob_Intensity_,_Blob_Near_Size_,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,_Blob_Fade_Length_,_Blob_Pulse_,_Blob_Fade_,Blob_Info_Q23);\n#else\nBlob_Info_Q23=vec4(0,0,0,0);\n#endif\nvec4 Blob_Info_Q24;\n#if BLOB_ENABLE_2\nBlob_Vertex_B24(Pos_World_Q12,Nrm_World_Q26,Tangent_World_N_Q27,Binormal_World_N_Q28,_Blob_Position_2_,_Blob_Intensity_,_Blob_Near_Size_2_,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,_Blob_Fade_Length_,_Blob_Pulse_2_,_Blob_Fade_2_,Blob_Info_Q24);\n#else\nBlob_Info_Q24=vec4(0,0,0,0);\n#endif\nfloat Out_Q105;\nRemap_Range_B105(0.0,1.0,0.0,1.0,X_Q98,Out_Q105);\nfloat X_Q86;\nfloat Y_Q86;\nfloat Z_Q86;\nTo_XYZ_B78(Nrm_World_Q32,X_Q86,Y_Q86,Z_Q86);\nvec4 Color_At_T_Q97=mix(Linear_Q101,Linear_Q102,Out_Q105);\nfloat Minus_F_Q87=-Z_Q86;\nfloat R_Q99;\nfloat G_Q99;\nfloat B_Q99;\nfloat A_Q99;\nR_Q99=Color_At_T_Q97.r; G_Q99=Color_At_T_Q97.g; B_Q99=Color_At_T_Q97.b; A_Q99=Color_At_T_Q97.a;\nfloat ClampF_Q88=clamp(0.0,Minus_F_Q87,1.0);\nfloat Result_Q93;\nConditional_Float_B93(_Decal_Front_Only_,ClampF_Q88,1.0,Result_Q93);\nvec4 Vec4_Q89=vec4(Result_Q93,Radial_Gradient_Q130,G_Q99,B_Q99);\nvec3 Position=Pos_World_Q12;\nvec3 Normal=Nrm_World_Q32;\nvec2 UV=XY_Q85;\nvec3 Tangent=Tangent_World_N_Q27;\nvec3 Binormal=Difference_Q61;\nvec4 Color=Out_Color_Q34;\nvec4 Extra1=Vec4_Q89;\nvec4 Extra2=Blob_Info_Q23;\nvec4 Extra3=Blob_Info_Q24;\ngl_Position=viewProjection*vec4(Position,1);\nvPosition=Position;\nvNormal=Normal;\nvUV=UV;\nvTangent=Tangent;\nvBinormal=Binormal;\nvColor=Color;\nvExtra1=Extra1;\nvExtra2=Extra2;\nvExtra3=Extra3;\n}";class Dt extends n.MaterialDefines{constructor(){super(),this.SKY_ENABLED=!0,this.BLOB_ENABLE_2=!0,this.IRIDESCENCE_ENABLED=!0,this._needNormals=!0,this._needUVs=!0,this.rebuild()}}class Lt extends n.PushMaterial{constructor(t,e){super(t,e),this.radius=.6,this.bevelFront=.6,this.bevelFrontStretch=.077,this.bevelBack=0,this.bevelBackStretch=0,this.radiusTopLeft=1,this.radiusTopRight=1,this.radiusBottomLeft=1,this.radiusBottomRight=1,this.bulgeEnabled=!1,this.bulgeHeight=-.323,this.bulgeRadius=.73,this.sunIntensity=1.102,this.sunTheta=.76,this.sunPhi=.526,this.indirectDiffuse=.658,this.albedo=new n.Color4(.0117647,.505882,.996078,1),this.specular=0,this.shininess=10,this.sharpness=0,this.subsurface=0,this.leftGradientColor=new n.Color4(.0117647,.505882,.996078,1),this.rightGradientColor=new n.Color4(.0117647,.505882,.996078,1),this.reflection=.749,this.frontReflect=0,this.edgeReflect=.09,this.power=8.13,this.skyColor=new n.Color4(.0117647,.964706,.996078,1),this.horizonColor=new n.Color4(.0117647,.333333,.996078,1),this.groundColor=new n.Color4(0,.254902,.996078,1),this.horizonPower=1,this.width=.02,this.fuzz=.5,this.minFuzz=.001,this.clipFade=.01,this.hueShift=0,this.saturationShift=0,this.valueShift=0,this.blobPosition=new n.Vector3(0,0,.1),this.blobIntensity=.5,this.blobNearSize=.01,this.blobFarSize=.03,this.blobNearDistance=0,this.blobFarDistance=.08,this.blobFadeLength=.576,this.blobPulse=0,this.blobFade=1,this.blobPosition2=new n.Vector3(.2,0,.1),this.blobNearSize2=.01,this.blobPulse2=0,this.blobFade2=1,this.blobTexture=new n.Texture("",this.getScene()),this.leftIndexPosition=new n.Vector3(0,0,1),this.rightIndexPosition=new n.Vector3(-1,-1,-1),this.leftIndexMiddlePosition=new n.Vector3(0,0,0),this.rightIndexMiddlePosition=new n.Vector3(0,0,0),this.decalScaleXY=new n.Vector2(1.5,1.5),this.decalFrontOnly=!0,this.rimIntensity=.287,this.rimHueShift=0,this.rimSaturationShift=0,this.rimValueShift=-1,this.iridescenceIntensity=0,this.useGlobalLeftIndex=1,this.useGlobalRightIndex=1,this.globalLeftIndexTipProximity=0,this.globalRightIndexTipProximity=0,this.globalLeftIndexTipPosition=new n.Vector4(.5,0,-.55,1),this.globaRightIndexTipPosition=new n.Vector4(0,0,0,1),this.globalLeftThumbTipPosition=new n.Vector4(.5,0,-.55,1),this.globalRightThumbTipPosition=new n.Vector4(0,0,0,1),this.globalLeftIndexMiddlePosition=new n.Vector4(.5,0,-.55,1),this.globalRightIndexMiddlePosition=new n.Vector4(0,0,0,1),this.alphaMode=n.Constants.ALPHA_DISABLE,this.backFaceCulling=!1,this._blueGradientTexture=new n.Texture(Lt.BLUE_GRADIENT_TEXTURE_URL,this.getScene(),!0,!1,n.Texture.NEAREST_SAMPLINGMODE)}needAlphaBlending(){return!1}needAlphaTesting(){return!1}getAlphaTestTexture(){return null}isReadyForSubMesh(t,e,i){if(this.isFrozen&&e.effect&&e.effect._wasPreviouslyReady)return!0;e.materialDefines||(e.materialDefines=new Dt);const o=e.materialDefines,s=this.getScene();if(this._isReadyForSubMesh(e))return!0;const r=s.getEngine();if(n.MaterialHelper.PrepareDefinesForAttributes(t,o,!1,!1),o.isDirty){o.markAsProcessed(),s.resetCachedMaterial();const t=new n.EffectFallbacks;o.FOG&&t.addFallback(1,"FOG"),n.MaterialHelper.HandleFallbacksForShadows(o,t),o.IMAGEPROCESSINGPOSTPROCESS=s.imageProcessingConfiguration.applyByPostProcess;const i=[n.VertexBuffer.PositionKind];o.NORMAL&&i.push(n.VertexBuffer.NormalKind),o.UV1&&i.push(n.VertexBuffer.UVKind),o.UV2&&i.push(n.VertexBuffer.UV2Kind),o.VERTEXCOLOR&&i.push(n.VertexBuffer.ColorKind),o.TANGENT&&i.push(n.VertexBuffer.TangentKind),n.MaterialHelper.PrepareAttributesForInstances(i,o);const a="mrdlSliderBar",l=o.toString(),_=["world","viewProjection","cameraPosition","_Radius_","_Bevel_Front_","_Bevel_Front_Stretch_","_Bevel_Back_","_Bevel_Back_Stretch_","_Radius_Top_Left_","_Radius_Top_Right_","_Radius_Bottom_Left_","_Radius_Bottom_Right_","_Bulge_Enabled_","_Bulge_Height_","_Bulge_Radius_","_Sun_Intensity_","_Sun_Theta_","_Sun_Phi_","_Indirect_Diffuse_","_Albedo_","_Specular_","_Shininess_","_Sharpness_","_Subsurface_","_Left_Color_","_Right_Color_","_Reflection_","_Front_Reflect_","_Edge_Reflect_","_Power_","_Sky_Color_","_Horizon_Color_","_Ground_Color_","_Horizon_Power_","_Reflection_Map_","_Indirect_Environment_","_Width_","_Fuzz_","_Min_Fuzz_","_Clip_Fade_","_Hue_Shift_","_Saturation_Shift_","_Value_Shift_","_Blob_Position_","_Blob_Intensity_","_Blob_Near_Size_","_Blob_Far_Size_","_Blob_Near_Distance_","_Blob_Far_Distance_","_Blob_Fade_Length_","_Blob_Pulse_","_Blob_Fade_","_Blob_Texture_","_Blob_Position_2_","_Blob_Near_Size_2_","_Blob_Pulse_2_","_Blob_Fade_2_","_Left_Index_Pos_","_Right_Index_Pos_","_Left_Index_Middle_Pos_","_Right_Index_Middle_Pos_","_Decal_","_Decal_Scale_XY_","_Decal_Front_Only_","_Rim_Intensity_","_Rim_Texture_","_Rim_Hue_Shift_","_Rim_Saturation_Shift_","_Rim_Value_Shift_","_Iridescence_Intensity_","_Iridescence_Texture_","Use_Global_Left_Index","Use_Global_Right_Index","Global_Left_Index_Tip_Position","Global_Right_Index_Tip_Position","Global_Left_Thumb_Tip_Position","Global_Right_Thumb_Tip_Position","Global_Left_Index_Middle_Position;","Global_Right_Index_Middle_Position","Global_Left_Index_Tip_Proximity","Global_Right_Index_Tip_Proximity"],h=["_Rim_Texture_","_Iridescence_Texture_"],c=new Array;n.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:_,uniformBuffersNames:c,samplers:h,defines:o,maxSimultaneousLights:4}),e.setEffect(s.getEngine().createEffect(a,{attributes:i,uniformsNames:_,uniformBuffersNames:c,samplers:h,defines:l,fallbacks:t,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},r),o,this._materialContext)}return!(!e.effect||!e.effect.isReady()||(o._renderId=s.getRenderId(),e.effect._wasPreviouslyReady=!0,0))}bindForSubMesh(t,e,i){if(!i.materialDefines)return;const o=i.effect;o&&(this._activeEffect=o,this.bindOnlyWorldMatrix(t),this._activeEffect.setMatrix("viewProjection",this.getScene().getTransformMatrix()),this._activeEffect.setVector3("cameraPosition",this.getScene().activeCamera.position),this._activeEffect.setFloat("_Radius_",this.radius),this._activeEffect.setFloat("_Bevel_Front_",this.bevelFront),this._activeEffect.setFloat("_Bevel_Front_Stretch_",this.bevelFrontStretch),this._activeEffect.setFloat("_Bevel_Back_",this.bevelBack),this._activeEffect.setFloat("_Bevel_Back_Stretch_",this.bevelBackStretch),this._activeEffect.setFloat("_Radius_Top_Left_",this.radiusTopLeft),this._activeEffect.setFloat("_Radius_Top_Right_",this.radiusTopRight),this._activeEffect.setFloat("_Radius_Bottom_Left_",this.radiusBottomLeft),this._activeEffect.setFloat("_Radius_Bottom_Right_",this.radiusBottomRight),this._activeEffect.setFloat("_Bulge_Enabled_",this.bulgeEnabled?1:0),this._activeEffect.setFloat("_Bulge_Height_",this.bulgeHeight),this._activeEffect.setFloat("_Bulge_Radius_",this.bulgeRadius),this._activeEffect.setFloat("_Sun_Intensity_",this.sunIntensity),this._activeEffect.setFloat("_Sun_Theta_",this.sunTheta),this._activeEffect.setFloat("_Sun_Phi_",this.sunPhi),this._activeEffect.setFloat("_Indirect_Diffuse_",this.indirectDiffuse),this._activeEffect.setDirectColor4("_Albedo_",this.albedo),this._activeEffect.setFloat("_Specular_",this.specular),this._activeEffect.setFloat("_Shininess_",this.shininess),this._activeEffect.setFloat("_Sharpness_",this.sharpness),this._activeEffect.setFloat("_Subsurface_",this.subsurface),this._activeEffect.setDirectColor4("_Left_Color_",this.leftGradientColor),this._activeEffect.setDirectColor4("_Right_Color_",this.rightGradientColor),this._activeEffect.setFloat("_Reflection_",this.reflection),this._activeEffect.setFloat("_Front_Reflect_",this.frontReflect),this._activeEffect.setFloat("_Edge_Reflect_",this.edgeReflect),this._activeEffect.setFloat("_Power_",this.power),this._activeEffect.setDirectColor4("_Sky_Color_",this.skyColor),this._activeEffect.setDirectColor4("_Horizon_Color_",this.horizonColor),this._activeEffect.setDirectColor4("_Ground_Color_",this.groundColor),this._activeEffect.setFloat("_Horizon_Power_",this.horizonPower),this._activeEffect.setTexture("_Reflection_Map_",new n.Texture("",this.getScene())),this._activeEffect.setTexture("_Indirect_Environment_",new n.Texture("",this.getScene())),this._activeEffect.setFloat("_Width_",this.width),this._activeEffect.setFloat("_Fuzz_",this.fuzz),this._activeEffect.setFloat("_Min_Fuzz_",this.minFuzz),this._activeEffect.setFloat("_Clip_Fade_",this.clipFade),this._activeEffect.setFloat("_Hue_Shift_",this.hueShift),this._activeEffect.setFloat("_Saturation_Shift_",this.saturationShift),this._activeEffect.setFloat("_Value_Shift_",this.valueShift),this._activeEffect.setVector3("_Blob_Position_",this.blobPosition),this._activeEffect.setFloat("_Blob_Intensity_",this.blobIntensity),this._activeEffect.setFloat("_Blob_Near_Size_",this.blobNearSize),this._activeEffect.setFloat("_Blob_Far_Size_",this.blobFarSize),this._activeEffect.setFloat("_Blob_Near_Distance_",this.blobNearDistance),this._activeEffect.setFloat("_Blob_Far_Distance_",this.blobFarDistance),this._activeEffect.setFloat("_Blob_Fade_Length_",this.blobFadeLength),this._activeEffect.setFloat("_Blob_Pulse_",this.blobPulse),this._activeEffect.setFloat("_Blob_Fade_",this.blobFade),this._activeEffect.setTexture("_Blob_Texture_",this.blobTexture),this._activeEffect.setVector3("_Blob_Position_2_",this.blobPosition2),this._activeEffect.setFloat("_Blob_Near_Size_2_",this.blobNearSize2),this._activeEffect.setFloat("_Blob_Pulse_2_",this.blobPulse2),this._activeEffect.setFloat("_Blob_Fade_2_",this.blobFade2),this._activeEffect.setVector3("_Left_Index_Pos_",this.leftIndexPosition),this._activeEffect.setVector3("_Right_Index_Pos_",this.rightIndexPosition),this._activeEffect.setVector3("_Left_Index_Middle_Pos_",this.leftIndexMiddlePosition),this._activeEffect.setVector3("_Right_Index_Middle_Pos_",this.rightIndexMiddlePosition),this._activeEffect.setTexture("_Decal_",new n.Texture("",this.getScene())),this._activeEffect.setVector2("_Decal_Scale_XY_",this.decalScaleXY),this._activeEffect.setFloat("_Decal_Front_Only_",this.decalFrontOnly?1:0),this._activeEffect.setFloat("_Rim_Intensity_",this.rimIntensity),this._activeEffect.setTexture("_Rim_Texture_",this._blueGradientTexture),this._activeEffect.setFloat("_Rim_Hue_Shift_",this.rimHueShift),this._activeEffect.setFloat("_Rim_Saturation_Shift_",this.rimSaturationShift),this._activeEffect.setFloat("_Rim_Value_Shift_",this.rimValueShift),this._activeEffect.setFloat("_Iridescence_Intensity_",this.iridescenceIntensity),this._activeEffect.setTexture("_Iridescence_Texture_",this._blueGradientTexture),this._activeEffect.setFloat("Use_Global_Left_Index",this.useGlobalLeftIndex),this._activeEffect.setFloat("Use_Global_Right_Index",this.useGlobalRightIndex),this._activeEffect.setVector4("Global_Left_Index_Tip_Position",this.globalLeftIndexTipPosition),this._activeEffect.setVector4("Global_Right_Index_Tip_Position",this.globaRightIndexTipPosition),this._activeEffect.setVector4("Global_Left_Thumb_Tip_Position",this.globalLeftThumbTipPosition),this._activeEffect.setVector4("Global_Right_Thumb_Tip_Position",this.globalRightThumbTipPosition),this._activeEffect.setVector4("Global_Left_Index_Middle_Position",this.globalLeftIndexMiddlePosition),this._activeEffect.setVector4("Global_Right_Index_Middle_Position",this.globalRightIndexMiddlePosition),this._activeEffect.setFloat("Global_Left_Index_Tip_Proximity",this.globalLeftIndexTipProximity),this._activeEffect.setFloat("Global_Right_Index_Tip_Proximity",this.globalRightIndexTipProximity),this._afterBind(e,this._activeEffect))}getAnimatables(){return[]}dispose(t){super.dispose(t)}clone(t){return n.SerializationHelper.Clone((()=>new Lt(t,this.getScene())),this)}serialize(){const t=super.serialize();return t.customType="BABYLON.MRDLSliderBarMaterial",t}getClassName(){return"MRDLSliderBarMaterial"}static Parse(t,e,i){return n.SerializationHelper.Parse((()=>new Lt(t.name,e)),t,e,i)}}Lt.BLUE_GRADIENT_TEXTURE_URL="https://assets.babylonjs.com/meshes/MRTK/MRDL/mrtk-mrdl-blue-gradient.png",i([(0,n.serialize)()],Lt.prototype,"radius",void 0),i([(0,n.serialize)()],Lt.prototype,"bevelFront",void 0),i([(0,n.serialize)()],Lt.prototype,"bevelFrontStretch",void 0),i([(0,n.serialize)()],Lt.prototype,"bevelBack",void 0),i([(0,n.serialize)()],Lt.prototype,"bevelBackStretch",void 0),i([(0,n.serialize)()],Lt.prototype,"radiusTopLeft",void 0),i([(0,n.serialize)()],Lt.prototype,"radiusTopRight",void 0),i([(0,n.serialize)()],Lt.prototype,"radiusBottomLeft",void 0),i([(0,n.serialize)()],Lt.prototype,"radiusBottomRight",void 0),i([(0,n.serialize)()],Lt.prototype,"bulgeEnabled",void 0),i([(0,n.serialize)()],Lt.prototype,"bulgeHeight",void 0),i([(0,n.serialize)()],Lt.prototype,"bulgeRadius",void 0),i([(0,n.serialize)()],Lt.prototype,"sunIntensity",void 0),i([(0,n.serialize)()],Lt.prototype,"sunTheta",void 0),i([(0,n.serialize)()],Lt.prototype,"sunPhi",void 0),i([(0,n.serialize)()],Lt.prototype,"indirectDiffuse",void 0),i([(0,n.serialize)()],Lt.prototype,"albedo",void 0),i([(0,n.serialize)()],Lt.prototype,"specular",void 0),i([(0,n.serialize)()],Lt.prototype,"shininess",void 0),i([(0,n.serialize)()],Lt.prototype,"sharpness",void 0),i([(0,n.serialize)()],Lt.prototype,"subsurface",void 0),i([(0,n.serialize)()],Lt.prototype,"leftGradientColor",void 0),i([(0,n.serialize)()],Lt.prototype,"rightGradientColor",void 0),i([(0,n.serialize)()],Lt.prototype,"reflection",void 0),i([(0,n.serialize)()],Lt.prototype,"frontReflect",void 0),i([(0,n.serialize)()],Lt.prototype,"edgeReflect",void 0),i([(0,n.serialize)()],Lt.prototype,"power",void 0),i([(0,n.serialize)()],Lt.prototype,"skyColor",void 0),i([(0,n.serialize)()],Lt.prototype,"horizonColor",void 0),i([(0,n.serialize)()],Lt.prototype,"groundColor",void 0),i([(0,n.serialize)()],Lt.prototype,"horizonPower",void 0),i([(0,n.serialize)()],Lt.prototype,"width",void 0),i([(0,n.serialize)()],Lt.prototype,"fuzz",void 0),i([(0,n.serialize)()],Lt.prototype,"minFuzz",void 0),i([(0,n.serialize)()],Lt.prototype,"clipFade",void 0),i([(0,n.serialize)()],Lt.prototype,"hueShift",void 0),i([(0,n.serialize)()],Lt.prototype,"saturationShift",void 0),i([(0,n.serialize)()],Lt.prototype,"valueShift",void 0),i([(0,n.serialize)()],Lt.prototype,"blobPosition",void 0),i([(0,n.serialize)()],Lt.prototype,"blobIntensity",void 0),i([(0,n.serialize)()],Lt.prototype,"blobNearSize",void 0),i([(0,n.serialize)()],Lt.prototype,"blobFarSize",void 0),i([(0,n.serialize)()],Lt.prototype,"blobNearDistance",void 0),i([(0,n.serialize)()],Lt.prototype,"blobFarDistance",void 0),i([(0,n.serialize)()],Lt.prototype,"blobFadeLength",void 0),i([(0,n.serialize)()],Lt.prototype,"blobPulse",void 0),i([(0,n.serialize)()],Lt.prototype,"blobFade",void 0),i([(0,n.serialize)()],Lt.prototype,"blobPosition2",void 0),i([(0,n.serialize)()],Lt.prototype,"blobNearSize2",void 0),i([(0,n.serialize)()],Lt.prototype,"blobPulse2",void 0),i([(0,n.serialize)()],Lt.prototype,"blobFade2",void 0),i([(0,n.serialize)()],Lt.prototype,"blobTexture",void 0),i([(0,n.serialize)()],Lt.prototype,"leftIndexPosition",void 0),i([(0,n.serialize)()],Lt.prototype,"rightIndexPosition",void 0),i([(0,n.serialize)()],Lt.prototype,"leftIndexMiddlePosition",void 0),i([(0,n.serialize)()],Lt.prototype,"rightIndexMiddlePosition",void 0),i([(0,n.serialize)()],Lt.prototype,"decalScaleXY",void 0),i([(0,n.serialize)()],Lt.prototype,"decalFrontOnly",void 0),i([(0,n.serialize)()],Lt.prototype,"rimIntensity",void 0),i([(0,n.serialize)()],Lt.prototype,"rimHueShift",void 0),i([(0,n.serialize)()],Lt.prototype,"rimSaturationShift",void 0),i([(0,n.serialize)()],Lt.prototype,"rimValueShift",void 0),i([(0,n.serialize)()],Lt.prototype,"iridescenceIntensity",void 0),(0,n.RegisterClass)("BABYLON.GUI.MRDLSliderBarMaterial",Lt);n.ShaderStore.ShadersStore.mrdlSliderThumbPixelShader="uniform vec3 cameraPosition;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec4 vColor;\nvarying vec4 vExtra1;\nvarying vec4 vExtra2;\nvarying vec4 vExtra3;\nuniform float _Radius_;\nuniform float _Bevel_Front_;\nuniform float _Bevel_Front_Stretch_;\nuniform float _Bevel_Back_;\nuniform float _Bevel_Back_Stretch_;\nuniform float _Radius_Top_Left_;\nuniform float _Radius_Top_Right_;\nuniform float _Radius_Bottom_Left_;\nuniform float _Radius_Bottom_Right_;\nuniform bool _Bulge_Enabled_;\nuniform float _Bulge_Height_;\nuniform float _Bulge_Radius_;\nuniform float _Sun_Intensity_;\nuniform float _Sun_Theta_;\nuniform float _Sun_Phi_;\nuniform float _Indirect_Diffuse_;\nuniform vec4 _Albedo_;\nuniform float _Specular_;\nuniform float _Shininess_;\nuniform float _Sharpness_;\nuniform float _Subsurface_;\nuniform vec4 _Left_Color_;\nuniform vec4 _Right_Color_;\nuniform float _Reflection_;\nuniform float _Front_Reflect_;\nuniform float _Edge_Reflect_;\nuniform float _Power_;\nuniform vec4 _Sky_Color_;\nuniform vec4 _Horizon_Color_;\nuniform vec4 _Ground_Color_;\nuniform float _Horizon_Power_;\nuniform sampler2D _Reflection_Map_;\nuniform sampler2D _Indirect_Environment_;\nuniform float _Width_;\nuniform float _Fuzz_;\nuniform float _Min_Fuzz_;\nuniform float _Clip_Fade_;\nuniform float _Hue_Shift_;\nuniform float _Saturation_Shift_;\nuniform float _Value_Shift_;\nuniform vec3 _Blob_Position_;\nuniform float _Blob_Intensity_;\nuniform float _Blob_Near_Size_;\nuniform float _Blob_Far_Size_;\nuniform float _Blob_Near_Distance_;\nuniform float _Blob_Far_Distance_;\nuniform float _Blob_Fade_Length_;\nuniform float _Blob_Pulse_;\nuniform float _Blob_Fade_;\nuniform sampler2D _Blob_Texture_;\nuniform vec3 _Blob_Position_2_;\nuniform float _Blob_Near_Size_2_;\nuniform float _Blob_Pulse_2_;\nuniform float _Blob_Fade_2_;\nuniform vec3 _Left_Index_Pos_;\nuniform vec3 _Right_Index_Pos_;\nuniform vec3 _Left_Index_Middle_Pos_;\nuniform vec3 _Right_Index_Middle_Pos_;\nuniform sampler2D _Decal_;\nuniform vec2 _Decal_Scale_XY_;\nuniform bool _Decal_Front_Only_;\nuniform float _Rim_Intensity_;\nuniform sampler2D _Rim_Texture_;\nuniform float _Rim_Hue_Shift_;\nuniform float _Rim_Saturation_Shift_;\nuniform float _Rim_Value_Shift_;\nuniform float _Iridescence_Intensity_;\nuniform sampler2D _Iridescence_Texture_;\nuniform bool Use_Global_Left_Index;\nuniform bool Use_Global_Right_Index;\nuniform vec4 Global_Left_Index_Tip_Position;\nuniform vec4 Global_Right_Index_Tip_Position;\nuniform vec4 Global_Left_Thumb_Tip_Position;\nuniform vec4 Global_Right_Thumb_Tip_Position;\nuniform vec4 Global_Left_Index_Middle_Position;\nuniform vec4 Global_Right_Index_Middle_Position;\nuniform float Global_Left_Index_Tip_Proximity;\nuniform float Global_Right_Index_Tip_Proximity;\nvoid Blob_Fragment_B180(\nsampler2D Blob_Texture,\nvec4 Blob_Info1,\nvec4 Blob_Info2,\nout vec4 Blob_Color)\n{\nfloat k1=dot(Blob_Info1.xy,Blob_Info1.xy);\nfloat k2=dot(Blob_Info2.xy,Blob_Info2.xy);\nvec3 closer=k1<k2 ? vec3(k1,Blob_Info1.z,Blob_Info1.w) : vec3(k2,Blob_Info2.z,Blob_Info2.w);\nBlob_Color=closer.z*texture(Blob_Texture,vec2(vec2(sqrt(closer.x),closer.y).x,1.0-vec2(sqrt(closer.x),closer.y).y))*clamp(1.0-closer.x,0.0,1.0);\n}\nvoid FastLinearTosRGB_B192(\nvec4 Linear,\nout vec4 sRGB)\n{\nsRGB.rgb=sqrt(clamp(Linear.rgb,0.0,1.0));\nsRGB.a=Linear.a;\n}\nvoid Scale_RGB_B209(\nvec4 Color,\nfloat Scalar,\nout vec4 Result)\n{\nResult=vec4(Scalar,Scalar,Scalar,1)*Color;\n}\nvoid Fragment_Main_B271(\nfloat Sun_Intensity,\nfloat Sun_Theta,\nfloat Sun_Phi,\nvec3 Normal,\nvec4 Albedo,\nfloat Fresnel_Reflect,\nfloat Shininess,\nvec3 Incident,\nvec4 Horizon_Color,\nvec4 Sky_Color,\nvec4 Ground_Color,\nfloat Indirect_Diffuse,\nfloat Specular,\nfloat Horizon_Power,\nfloat Reflection,\nvec4 Reflection_Sample,\nvec4 Indirect_Sample,\nfloat Sharpness,\nfloat SSS,\nfloat Subsurface,\nvec4 Translucence,\nvec4 Rim_Light,\nvec4 Iridescence,\nout vec4 Result)\n{\nfloat theta=Sun_Theta*2.0*3.14159;\nfloat phi=Sun_Phi*3.14159;\nvec3 lightDir= vec3(cos(phi)*cos(theta),sin(phi),cos(phi)*sin(theta));\nfloat NdotL=max(dot(lightDir,Normal),0.0);\nvec3 R=reflect(Incident,Normal);\nfloat RdotL=max(0.0,dot(R,lightDir));\nfloat specular=pow(RdotL,Shininess);\nspecular=mix(specular,smoothstep(0.495*Sharpness,1.0-0.495*Sharpness,specular),Sharpness);\nvec4 gi=mix(Ground_Color,Sky_Color,Normal.y*0.5+0.5);\nResult=((Sun_Intensity*NdotL+Indirect_Sample*Indirect_Diffuse+Translucence)*(1.0+SSS*Subsurface))*Albedo*(1.0-Fresnel_Reflect)+(Sun_Intensity*specular*Specular+Fresnel_Reflect*Reflection*Reflection_Sample)+Fresnel_Reflect*Rim_Light+Iridescence;\n}\nvoid Bulge_B229(\nbool Enabled,\nvec3 Normal,\nvec3 Tangent,\nfloat Bulge_Height,\nvec4 UV,\nfloat Bulge_Radius,\nvec3 ButtonN,\nout vec3 New_Normal)\n{\nvec2 xy=clamp(UV.xy*2.0,vec2(-1,-1),vec2(1,1));\nvec3 B=(cross(Normal,Tangent));\nfloat k=-clamp(1.0-length(xy)/Bulge_Radius,0.0,1.0)*Bulge_Height;\nk=sin(k*3.14159*0.5);\nk*=smoothstep(0.9998,0.9999,abs(dot(ButtonN,Normal)));\nNew_Normal=Normal*sqrt(1.0-k*k)+(xy.x*Tangent+xy.y*B)*k;\nNew_Normal=Enabled ? New_Normal : Normal;\n}\nvoid SSS_B227(\nvec3 ButtonN,\nvec3 Normal,\nvec3 Incident,\nout float Result)\n{\nfloat NdotI=abs(dot(Normal,Incident));\nfloat BdotI=abs(dot(ButtonN,Incident));\nResult=(abs(NdotI-BdotI)); \n}\nvoid FingerOcclusion_B217(\nfloat Width,\nfloat DistToCenter,\nfloat Fuzz,\nfloat Min_Fuzz,\nvec3 Position,\nvec3 Forward,\nvec3 Nearest,\nfloat Fade_Out,\nout float NotInShadow)\n{\nfloat d=dot((Nearest-Position),Forward);\nfloat sh=smoothstep(Width*0.5,Width*0.5+Fuzz*max(d,0.0)+Min_Fuzz,DistToCenter);\nNotInShadow=1.0-(1.0-sh)*smoothstep(-Fade_Out,0.0,d);\n}\nvoid FingerOcclusion_B218(\nfloat Width,\nfloat DistToCenter,\nfloat Fuzz,\nfloat Min_Fuzz,\nvec3 Position,\nvec3 Forward,\nvec3 Nearest,\nfloat Fade_Out,\nout float NotInShadow)\n{\nfloat d=dot((Nearest-Position),Forward);\nfloat sh=smoothstep(Width*0.5,Width*0.5+Fuzz*max(d,0.0)+Min_Fuzz,DistToCenter);\nNotInShadow=1.0-(1.0-sh)*smoothstep(-Fade_Out,0.0,d);\n}\nvoid Scale_Color_B241(\nvec4 Color,\nfloat Scalar,\nout vec4 Result)\n{\nResult=Scalar*Color;\n}\nvoid From_HSV_B223(\nfloat Hue,\nfloat Saturation,\nfloat Value,\nfloat Alpha,\nout vec4 Color)\n{\nvec4 K=vec4(1.0,2.0/3.0,1.0/3.0,3.0);\nvec3 p=abs(fract(vec3(Hue,Hue,Hue)+K.xyz)*6.0-K.www);\nColor.rgb=Value*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),Saturation);\nColor.a=Alpha;\n}\nvoid Fast_Fresnel_B272(\nfloat Front_Reflect,\nfloat Edge_Reflect,\nfloat Power,\nvec3 Normal,\nvec3 Incident,\nout float Transmit,\nout float Reflect)\n{\nfloat d=max(-dot(Incident,Normal),0.0);\nReflect=Front_Reflect+(Edge_Reflect-Front_Reflect)*pow(1.0-d,Power);\nTransmit=1.0-Reflect;\n}\nvoid Mapped_Environment_B201(\nsampler2D Reflected_Environment,\nsampler2D Indirect_Environment,\nvec3 Dir,\nout vec4 Reflected_Color,\nout vec4 Indirect_Diffuse)\n{\nReflected_Color=texture(Reflected_Environment,vec2(atan(Dir.z,Dir.x)/3.14159*0.5,asin(Dir.y)/3.14159+0.5));\nIndirect_Diffuse=texture(Indirect_Environment,vec2(atan(Dir.z,Dir.x)/3.14159*0.5,asin(Dir.y)/3.14159+0.5));\n}\nvec4 SampleEnv_Bid200(vec3 D,vec4 S,vec4 H,vec4 G,float exponent)\n{\nfloat k=pow(abs(D.y),exponent);\nvec4 C;\nif (D.y>0.0) {\nC=mix(H,S,k);\n} else {\nC=mix(H,G,k); \n}\nreturn C;\n}\nvoid Sky_Environment_B200(\nvec3 Normal,\nvec3 Reflected,\nvec4 Sky_Color,\nvec4 Horizon_Color,\nvec4 Ground_Color,\nfloat Horizon_Power,\nout vec4 Reflected_Color,\nout vec4 Indirect_Color)\n{\nReflected_Color=SampleEnv_Bid200(Reflected,Sky_Color,Horizon_Color,Ground_Color,Horizon_Power);\nIndirect_Color=mix(Ground_Color,Sky_Color,Normal.y*0.5+0.5);\n}\nvoid Min_Segment_Distance_B215(\nvec3 P0,\nvec3 P1,\nvec3 Q0,\nvec3 Q1,\nout vec3 NearP,\nout vec3 NearQ,\nout float Distance)\n{\nvec3 u=P1-P0;\nvec3 v=Q1-Q0;\nvec3 w=P0-Q0;\nfloat a=dot(u,u);\nfloat b=dot(u,v);\nfloat c=dot(v,v);\nfloat d=dot(u,w);\nfloat e=dot(v,w);\nfloat D=a*c-b*b;\nfloat sD=D;\nfloat tD=D;\nfloat sc,sN,tc,tN;\nif (D<0.00001) {\nsN=0.0;\nsD=1.0;\ntN=e;\ntD=c;\n} else {\nsN=(b*e-c*d);\ntN=(a*e-b*d);\nif (sN<0.0) {\nsN=0.0;\ntN=e;\ntD=c;\n} else if (sN>sD) {\nsN=sD;\ntN=e+b;\ntD=c;\n}\n}\nif (tN<0.0) {\ntN=0.0;\nif (-d<0.0) {\nsN=0.0;\n} else if (-d>a) {\nsN=sD;\n} else {\nsN=-d;\nsD=a;\n}\n} else if (tN>tD) {\ntN=tD;\nif ((-d+b)<0.0) {\nsN=0.0;\n} else if ((-d+b)>a) {\nsN=sD;\n} else {\nsN=(-d+b);\nsD=a;\n}\n}\nsc=abs(sN)<0.000001 ? 0.0 : sN/sD;\ntc=abs(tN)<0.000001 ? 0.0 : tN/tD;\nNearP=P0+sc*u;\nNearQ=Q0+tc*v;\nDistance=distance(NearP,NearQ);\n}\nvoid To_XYZ_B224(\nvec3 Vec3,\nout float X,\nout float Y,\nout float Z)\n{\nX=Vec3.x;\nY=Vec3.y;\nZ=Vec3.z;\n}\nvoid Finger_Positions_B214(\nvec3 Left_Index_Pos,\nvec3 Right_Index_Pos,\nvec3 Left_Index_Middle_Pos,\nvec3 Right_Index_Middle_Pos,\nout vec3 Left_Index,\nout vec3 Right_Index,\nout vec3 Left_Index_Middle,\nout vec3 Right_Index_Middle)\n{\nLeft_Index= (Use_Global_Left_Index ? Global_Left_Index_Tip_Position.xyz : Left_Index_Pos);\nRight_Index= (Use_Global_Right_Index ? Global_Right_Index_Tip_Position.xyz : Right_Index_Pos);\nLeft_Index_Middle= (Use_Global_Left_Index ? Global_Left_Index_Middle_Position.xyz : Left_Index_Middle_Pos);\nRight_Index_Middle= (Use_Global_Right_Index ? Global_Right_Index_Middle_Position.xyz : Right_Index_Middle_Pos);\n}\nvoid VaryHSV_B258(\nvec3 HSV_In,\nfloat Hue_Shift,\nfloat Saturation_Shift,\nfloat Value_Shift,\nout vec3 HSV_Out)\n{\nHSV_Out=vec3(fract(HSV_In.x+Hue_Shift),clamp(HSV_In.y+Saturation_Shift,0.0,1.0),clamp(HSV_In.z+Value_Shift,0.0,1.0));\n}\nvoid Remap_Range_B264(\nfloat In_Min,\nfloat In_Max,\nfloat Out_Min,\nfloat Out_Max,\nfloat In,\nout float Out)\n{\nOut=mix(Out_Min,Out_Max,clamp((In-In_Min)/(In_Max-In_Min),0.0,1.0));\n}\nvoid To_HSV_B225(\nvec4 Color,\nout float Hue,\nout float Saturation,\nout float Value,\nout float Alpha,\nout vec3 HSV)\n{\nvec4 K=vec4(0.0,-1.0/3.0,2.0/3.0,-1.0);\nvec4 p=Color.g<Color.b ? vec4(Color.bg,K.wz) : vec4(Color.gb,K.xy);\nvec4 q=Color.r<p.x ? vec4(p.xyw,Color.r) : vec4(Color.r,p.yzx);\nfloat d=q.x-min(q.w,q.y);\nfloat e=1.0e-10;\nHue=abs(q.z+(q.w-q.y)/(6.0*d+e));\nSaturation=d/(q.x+e);\nValue=q.x;\nAlpha=Color.a;\nHSV=vec3(Hue,Saturation,Value);\n}\nvoid Code_B260(\nfloat X,\nout float Result)\n{\nResult=(acos(X)/3.14159-0.5)*2.0;\n}\nvoid Rim_Light_B282(\nvec3 Front,\nvec3 Normal,\nvec3 Incident,\nfloat Rim_Intensity,\nsampler2D Texture,\nout vec4 Result)\n{\nvec3 R=reflect(Incident,Normal);\nfloat RdotF=dot(R,Front);\nfloat RdotL=sqrt(1.0-RdotF*RdotF);\nvec2 UV=vec2(R.y*0.5+0.5,0.5);\nvec4 Color=texture(Texture,UV);\nResult=Color;\n}\nvoid main()\n{\nvec4 Blob_Color_Q180;\n#if BLOB_ENABLE\nBlob_Fragment_B180(_Blob_Texture_,vExtra2,vExtra3,Blob_Color_Q180);\n#else\nBlob_Color_Q180=vec4(0,0,0,0);\n#endif\nvec3 Incident_Q189=normalize(vPosition-cameraPosition);\nvec3 Normalized_Q188=normalize(vNormal);\nvec3 Normalized_Q221=normalize(vTangent);\nvec4 Color_Q233;\n#if DECAL_ENABLE\nColor_Q233=texture(_Decal_,vUV);\n#else\nColor_Q233=vec4(0,0,0,0);\n#endif\nfloat X_Q240;\nfloat Y_Q240;\nfloat Z_Q240;\nfloat W_Q240;\nX_Q240=vExtra1.x;\nY_Q240=vExtra1.y;\nZ_Q240=vExtra1.z;\nW_Q240=vExtra1.w;\nvec4 Linear_Q193;\nLinear_Q193.rgb=clamp(_Sky_Color_.rgb*_Sky_Color_.rgb,0.0,1.0);\nLinear_Q193.a=_Sky_Color_.a;\nvec4 Linear_Q194;\nLinear_Q194.rgb=clamp(_Horizon_Color_.rgb*_Horizon_Color_.rgb,0.0,1.0);\nLinear_Q194.a=_Horizon_Color_.a;\nvec4 Linear_Q195;\nLinear_Q195.rgb=clamp(_Ground_Color_.rgb*_Ground_Color_.rgb,0.0,1.0);\nLinear_Q195.a=_Ground_Color_.a;\nvec3 Left_Index_Q214;\nvec3 Right_Index_Q214;\nvec3 Left_Index_Middle_Q214;\nvec3 Right_Index_Middle_Q214;\nFinger_Positions_B214(_Left_Index_Pos_,_Right_Index_Pos_,_Left_Index_Middle_Pos_,_Right_Index_Middle_Pos_,Left_Index_Q214,Right_Index_Q214,Left_Index_Middle_Q214,Right_Index_Middle_Q214);\nvec4 Linear_Q196;\nLinear_Q196.rgb=clamp(_Albedo_.rgb*_Albedo_.rgb,0.0,1.0);\nLinear_Q196.a=_Albedo_.a;\nvec3 Normalized_Q257=normalize(vBinormal);\nvec3 Incident_Q220=normalize(vPosition-cameraPosition);\nvec3 New_Normal_Q229;\nBulge_B229(_Bulge_Enabled_,Normalized_Q188,Normalized_Q221,_Bulge_Height_,vColor,_Bulge_Radius_,vBinormal,New_Normal_Q229);\nfloat Result_Q227;\nSSS_B227(vBinormal,New_Normal_Q229,Incident_Q189,Result_Q227);\nvec4 Result_Q241;\nScale_Color_B241(Color_Q233,X_Q240,Result_Q241);\nfloat Transmit_Q272;\nfloat Reflect_Q272;\nFast_Fresnel_B272(_Front_Reflect_,_Edge_Reflect_,_Power_,New_Normal_Q229,Incident_Q189,Transmit_Q272,Reflect_Q272);\nfloat Product_Q275=Y_Q240*Y_Q240;\nvec3 NearP_Q215;\nvec3 NearQ_Q215;\nfloat Distance_Q215;\nMin_Segment_Distance_B215(Left_Index_Q214,Left_Index_Middle_Q214,vPosition,cameraPosition,NearP_Q215,NearQ_Q215,Distance_Q215);\nvec3 NearP_Q213;\nvec3 NearQ_Q213;\nfloat Distance_Q213;\nMin_Segment_Distance_B215(Right_Index_Q214,Right_Index_Middle_Q214,vPosition,cameraPosition,NearP_Q213,NearQ_Q213,Distance_Q213);\nvec3 Reflected_Q197=reflect(Incident_Q189,New_Normal_Q229);\nvec4 Product_Q253=Linear_Q196*vec4(1,1,1,1);\nvec4 Result_Q282;\nRim_Light_B282(Normalized_Q257,Normalized_Q188,Incident_Q220,_Rim_Intensity_,_Rim_Texture_,Result_Q282);\nfloat Dot_Q222=dot(Incident_Q220, Normalized_Q221);\nfloat MaxAB_Q273=max(Reflect_Q272,Product_Q275);\nfloat NotInShadow_Q217;\n#if OCCLUSION_ENABLED\nFingerOcclusion_B217(_Width_,Distance_Q215,_Fuzz_,_Min_Fuzz_,vPosition,vBinormal,NearP_Q215,_Clip_Fade_,NotInShadow_Q217);\n#else\nNotInShadow_Q217=1.0;\n#endif\nfloat NotInShadow_Q218;\n#if OCCLUSION_ENABLED\nFingerOcclusion_B218(_Width_,Distance_Q213,_Fuzz_,_Min_Fuzz_,vPosition,vBinormal,NearP_Q213,_Clip_Fade_,NotInShadow_Q218);\n#else\nNotInShadow_Q218=1.0;\n#endif\nvec4 Reflected_Color_Q201;\nvec4 Indirect_Diffuse_Q201;\n#if ENV_ENABLE\nMapped_Environment_B201(_Reflection_Map_,_Indirect_Environment_,Reflected_Q197,Reflected_Color_Q201,Indirect_Diffuse_Q201);\n#else\nReflected_Color_Q201=vec4(0,0,0,1);\nIndirect_Diffuse_Q201=vec4(0,0,0,1);\n#endif\nvec4 Reflected_Color_Q200;\nvec4 Indirect_Color_Q200;\n#if SKY_ENABLED\nSky_Environment_B200(New_Normal_Q229,Reflected_Q197,Linear_Q193,Linear_Q194,Linear_Q195,_Horizon_Power_,Reflected_Color_Q200,Indirect_Color_Q200);\n#else\nReflected_Color_Q200=vec4(0,0,0,1);\nIndirect_Color_Q200=vec4(0,0,0,1);\n#endif\nfloat Hue_Q225;\nfloat Saturation_Q225;\nfloat Value_Q225;\nfloat Alpha_Q225;\nvec3 HSV_Q225;\nTo_HSV_B225(Product_Q253,Hue_Q225,Saturation_Q225,Value_Q225,Alpha_Q225,HSV_Q225);\nfloat Hue_Q277;\nfloat Saturation_Q277;\nfloat Value_Q277;\nfloat Alpha_Q277;\nvec3 HSV_Q277;\nTo_HSV_B225(Result_Q282,Hue_Q277,Saturation_Q277,Value_Q277,Alpha_Q277,HSV_Q277);\nfloat Result_Q260;\nCode_B260(Dot_Q222,Result_Q260);\nfloat AbsA_Q226=abs(Result_Q260);\nfloat MinAB_Q208=min(NotInShadow_Q217,NotInShadow_Q218);\nvec4 Sum_Q198=Reflected_Color_Q201+Reflected_Color_Q200;\nvec4 Sum_Q199=Indirect_Diffuse_Q201+Indirect_Color_Q200;\nvec3 HSV_Out_Q276;\nVaryHSV_B258(HSV_Q277,_Rim_Hue_Shift_,_Rim_Saturation_Shift_,_Rim_Value_Shift_,HSV_Out_Q276);\nfloat Out_Q264;\nRemap_Range_B264(-1.0,1.0,0.0,1.0,Result_Q260,Out_Q264);\nfloat Product_Q256;\nProduct_Q256=AbsA_Q226*_Hue_Shift_;\nfloat X_Q278;\nfloat Y_Q278;\nfloat Z_Q278;\nTo_XYZ_B224(HSV_Out_Q276,X_Q278,Y_Q278,Z_Q278);\nvec2 Vec2_Q262=vec2(Out_Q264,0.5);\nvec3 HSV_Out_Q258;\nVaryHSV_B258(HSV_Q225,Product_Q256,_Saturation_Shift_,_Value_Shift_,HSV_Out_Q258);\nvec4 Color_Q279;\nFrom_HSV_B223(X_Q278,Y_Q278,Z_Q278,0.0,Color_Q279);\nvec4 Color_Q261;\n#if IRIDESCENCE_ENABLED\nColor_Q261=texture(_Iridescence_Texture_,Vec2_Q262);\n#else\nColor_Q261=vec4(0,0,0,0);\n#endif\nfloat X_Q224;\nfloat Y_Q224;\nfloat Z_Q224;\nTo_XYZ_B224(HSV_Out_Q258,X_Q224,Y_Q224,Z_Q224);\nvec4 Result_Q281=_Rim_Intensity_*Color_Q279;\nvec4 Result_Q263=_Iridescence_Intensity_*Color_Q261;\nvec4 Color_Q223;\nFrom_HSV_B223(X_Q224,Y_Q224,Z_Q224,0.0,Color_Q223);\nvec4 Result_Q234=Result_Q241+(1.0-Result_Q241.a)*Color_Q223;\nvec4 Result_Q271;\nFragment_Main_B271(_Sun_Intensity_,_Sun_Theta_,_Sun_Phi_,New_Normal_Q229,Result_Q234,MaxAB_Q273,_Shininess_,Incident_Q189,_Horizon_Color_,_Sky_Color_,_Ground_Color_,_Indirect_Diffuse_,_Specular_,_Horizon_Power_,_Reflection_,Sum_Q198,Sum_Q199,_Sharpness_,Result_Q227,_Subsurface_,vec4(0,0,0,0),Result_Q281,Result_Q263,Result_Q271);\nvec4 Result_Q209;\nScale_RGB_B209(Result_Q271,MinAB_Q208,Result_Q209);\nvec4 sRGB_Q192;\nFastLinearTosRGB_B192(Result_Q209,sRGB_Q192);\nvec4 Result_Q181=Blob_Color_Q180+(1.0-Blob_Color_Q180.a)*sRGB_Q192;\nvec4 Result_Q190=Result_Q181; Result_Q190.a=1.0;\nvec4 Out_Color=Result_Q190;\nfloat Clip_Threshold=0.001;\nbool To_sRGB=false;\ngl_FragColor=Out_Color;\n}";n.ShaderStore.ShadersStore.mrdlSliderThumbVertexShader="uniform mat4 world;\nuniform mat4 viewProjection;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n#ifdef TANGENT\nattribute vec3 tangent;\n#else\nconst vec3 tangent=vec3(0.);\n#endif\nuniform float _Radius_;\nuniform float _Bevel_Front_;\nuniform float _Bevel_Front_Stretch_;\nuniform float _Bevel_Back_;\nuniform float _Bevel_Back_Stretch_;\nuniform float _Radius_Top_Left_;\nuniform float _Radius_Top_Right_;\nuniform float _Radius_Bottom_Left_;\nuniform float _Radius_Bottom_Right_;\nuniform bool _Bulge_Enabled_;\nuniform float _Bulge_Height_;\nuniform float _Bulge_Radius_;\nuniform float _Sun_Intensity_;\nuniform float _Sun_Theta_;\nuniform float _Sun_Phi_;\nuniform float _Indirect_Diffuse_;\nuniform vec4 _Albedo_;\nuniform float _Specular_;\nuniform float _Shininess_;\nuniform float _Sharpness_;\nuniform float _Subsurface_;\nuniform vec4 _Left_Color_;\nuniform vec4 _Right_Color_;\nuniform float _Reflection_;\nuniform float _Front_Reflect_;\nuniform float _Edge_Reflect_;\nuniform float _Power_;\nuniform vec4 _Sky_Color_;\nuniform vec4 _Horizon_Color_;\nuniform vec4 _Ground_Color_;\nuniform float _Horizon_Power_;\nuniform sampler2D _Reflection_Map_;\nuniform sampler2D _Indirect_Environment_;\nuniform float _Width_;\nuniform float _Fuzz_;\nuniform float _Min_Fuzz_;\nuniform float _Clip_Fade_;\nuniform float _Hue_Shift_;\nuniform float _Saturation_Shift_;\nuniform float _Value_Shift_;\nuniform vec3 _Blob_Position_;\nuniform float _Blob_Intensity_;\nuniform float _Blob_Near_Size_;\nuniform float _Blob_Far_Size_;\nuniform float _Blob_Near_Distance_;\nuniform float _Blob_Far_Distance_;\nuniform float _Blob_Fade_Length_;\nuniform float _Blob_Pulse_;\nuniform float _Blob_Fade_;\nuniform sampler2D _Blob_Texture_;\nuniform vec3 _Blob_Position_2_;\nuniform float _Blob_Near_Size_2_;\nuniform float _Blob_Pulse_2_;\nuniform float _Blob_Fade_2_;\nuniform vec3 _Left_Index_Pos_;\nuniform vec3 _Right_Index_Pos_;\nuniform vec3 _Left_Index_Middle_Pos_;\nuniform vec3 _Right_Index_Middle_Pos_;\nuniform sampler2D _Decal_;\nuniform vec2 _Decal_Scale_XY_;\nuniform bool _Decal_Front_Only_;\nuniform float _Rim_Intensity_;\nuniform sampler2D _Rim_Texture_;\nuniform float _Rim_Hue_Shift_;\nuniform float _Rim_Saturation_Shift_;\nuniform float _Rim_Value_Shift_;\nuniform float _Iridescence_Intensity_;\nuniform sampler2D _Iridescence_Texture_;\nuniform bool Use_Global_Left_Index;\nuniform bool Use_Global_Right_Index;\nuniform vec4 Global_Left_Index_Tip_Position;\nuniform vec4 Global_Right_Index_Tip_Position;\nuniform vec4 Global_Left_Thumb_Tip_Position;\nuniform vec4 Global_Right_Thumb_Tip_Position;\nuniform float Global_Left_Index_Tip_Proximity;\nuniform float Global_Right_Index_Tip_Proximity;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec4 vColor;\nvarying vec4 vExtra1;\nvarying vec4 vExtra2;\nvarying vec4 vExtra3;\nvoid Object_To_World_Pos_B162(\nvec3 Pos_Object,\nout vec3 Pos_World)\n{\nPos_World=(world*vec4(Pos_Object,1.0)).xyz;\n}\nvoid Object_To_World_Normal_B182(\nvec3 Nrm_Object,\nout vec3 Nrm_World)\n{\nNrm_World=(vec4(Nrm_Object,0.0)).xyz;\n}\nvoid Blob_Vertex_B173(\nvec3 Position,\nvec3 Normal,\nvec3 Tangent,\nvec3 Bitangent,\nvec3 Blob_Position,\nfloat Intensity,\nfloat Blob_Near_Size,\nfloat Blob_Far_Size,\nfloat Blob_Near_Distance,\nfloat Blob_Far_Distance,\nfloat Blob_Fade_Length,\nfloat Blob_Pulse,\nfloat Blob_Fade,\nout vec4 Blob_Info)\n{\nvec3 blob= (Use_Global_Left_Index ? Global_Left_Index_Tip_Position.xyz : Blob_Position);\nvec3 delta=blob-Position;\nfloat dist=dot(Normal,delta);\nfloat lerpValue=clamp((abs(dist)-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);\nfloat fadeValue=1.0-clamp((abs(dist)-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);\nfloat size=Blob_Near_Size+(Blob_Far_Size-Blob_Near_Size)*lerpValue;\nvec2 blobXY=vec2(dot(delta,Tangent),dot(delta,Bitangent))/(0.0001+size);\nfloat Fade=fadeValue*Intensity*Blob_Fade;\nfloat Distance=(lerpValue*0.5+0.5)*(1.0-Blob_Pulse);\nBlob_Info=vec4(blobXY.x,blobXY.y,Distance,Fade);\n}\nvoid Blob_Vertex_B174(\nvec3 Position,\nvec3 Normal,\nvec3 Tangent,\nvec3 Bitangent,\nvec3 Blob_Position,\nfloat Intensity,\nfloat Blob_Near_Size,\nfloat Blob_Far_Size,\nfloat Blob_Near_Distance,\nfloat Blob_Far_Distance,\nfloat Blob_Fade_Length,\nfloat Blob_Pulse,\nfloat Blob_Fade,\nout vec4 Blob_Info)\n{\nvec3 blob= (Use_Global_Right_Index ? Global_Right_Index_Tip_Position.xyz : Blob_Position);\nvec3 delta=blob-Position;\nfloat dist=dot(Normal,delta);\nfloat lerpValue=clamp((abs(dist)-Blob_Near_Distance)/(Blob_Far_Distance-Blob_Near_Distance),0.0,1.0);\nfloat fadeValue=1.0-clamp((abs(dist)-Blob_Far_Distance)/Blob_Fade_Length,0.0,1.0);\nfloat size=Blob_Near_Size+(Blob_Far_Size-Blob_Near_Size)*lerpValue;\nvec2 blobXY=vec2(dot(delta,Tangent),dot(delta,Bitangent))/(0.0001+size);\nfloat Fade=fadeValue*Intensity*Blob_Fade;\nfloat Distance=(lerpValue*0.5+0.5)*(1.0-Blob_Pulse);\nBlob_Info=vec4(blobXY.x,blobXY.y,Distance,Fade);\n}\nvoid Move_Verts_B280(\nfloat Anisotropy,\nvec3 P,\nfloat Radius,\nfloat Bevel,\nvec3 Normal_Object,\nfloat ScaleZ,\nfloat Stretch,\nout vec3 New_P,\nout vec2 New_UV,\nout float Radial_Gradient,\nout vec3 Radial_Dir,\nout vec3 New_Normal)\n{\nvec2 UV=P.xy*2.0+0.5;\nvec2 center=clamp(UV,0.0,1.0);\nvec2 delta=UV-center;\nfloat deltad=(length(delta)*2.0);\nfloat f=(Bevel+(Radius-Bevel)*Stretch)/Radius;\nfloat innerd=clamp(deltad*2.0,0.0,1.0);\nfloat outerd=clamp(deltad*2.0-1.0,0.0,1.0);\nfloat bevelAngle=outerd*3.14159*0.5;\nfloat sinb=sin(bevelAngle);\nfloat cosb=cos(bevelAngle);\nfloat beveld=(1.0-f)*innerd+f*sinb;\nfloat br=outerd;\nvec2 r2=2.0*vec2(Radius/Anisotropy,Radius);\nfloat dir=P.z<0.0001 ? 1.0 : -1.0;\nNew_UV=center+r2*((0.5-center)+normalize(delta+vec2(0.0,0.000001))*beveld*0.5);\nNew_P=vec3(New_UV-0.5,P.z+dir*(1.0-cosb)*Bevel*ScaleZ);\nRadial_Gradient=clamp((deltad-0.5)*2.0,0.0,1.0);\nRadial_Dir=vec3(delta*r2,0.0);\nvec3 beveledNormal=cosb*Normal_Object+sinb*vec3(delta.x,delta.y,0.0);\nNew_Normal=Normal_Object.z==0.0 ? Normal_Object : beveledNormal;\n}\nvoid Object_To_World_Dir_B210(\nvec3 Dir_Object,\nout vec3 Normal_World,\nout vec3 Normal_World_N,\nout float Normal_Length)\n{\nNormal_World=(world*vec4(Dir_Object,0.0)).xyz;\nNormal_Length=length(Normal_World);\nNormal_World_N=Normal_World/Normal_Length;\n}\nvoid To_XYZ_B228(\nvec3 Vec3,\nout float X,\nout float Y,\nout float Z)\n{\nX=Vec3.x;\nY=Vec3.y;\nZ=Vec3.z;\n}\nvoid Conditional_Float_B243(\nbool Which,\nfloat If_True,\nfloat If_False,\nout float Result)\n{\nResult=Which ? If_True : If_False;\n}\nvoid Object_To_World_Dir_B178(\nvec3 Dir_Object,\nout vec3 Binormal_World,\nout vec3 Binormal_World_N,\nout float Binormal_Length)\n{\nBinormal_World=(world*vec4(Dir_Object,0.0)).xyz;\nBinormal_Length=length(Binormal_World);\nBinormal_World_N=Binormal_World/Binormal_Length;\n}\nvoid Pick_Radius_B219(\nfloat Radius,\nfloat Radius_Top_Left,\nfloat Radius_Top_Right,\nfloat Radius_Bottom_Left,\nfloat Radius_Bottom_Right,\nvec3 Position,\nout float Result)\n{\nbool whichY=Position.y>0.0;\nResult=Position.x<0.0 ? (whichY ? Radius_Top_Left : Radius_Bottom_Left) : (whichY ? Radius_Top_Right : Radius_Bottom_Right);\nResult*=Radius;\n}\nvoid Conditional_Float_B186(\nbool Which,\nfloat If_True,\nfloat If_False,\nout float Result)\n{\nResult=Which ? If_True : If_False;\n}\nvoid Greater_Than_B187(\nfloat Left,\nfloat Right,\nout bool Not_Greater_Than,\nout bool Greater_Than)\n{\nGreater_Than=Left>Right;\nNot_Greater_Than=!Greater_Than;\n}\nvoid Remap_Range_B255(\nfloat In_Min,\nfloat In_Max,\nfloat Out_Min,\nfloat Out_Max,\nfloat In,\nout float Out)\n{\nOut=mix(Out_Min,Out_Max,clamp((In-In_Min)/(In_Max-In_Min),0.0,1.0));\n}\nvoid main()\n{\nvec2 XY_Q235;\nXY_Q235=(uv-vec2(0.5,0.5))*_Decal_Scale_XY_+vec2(0.5,0.5);\nvec3 Tangent_World_Q177;\nvec3 Tangent_World_N_Q177;\nfloat Tangent_Length_Q177;\nTangent_World_Q177=(world*vec4(vec3(1,0,0),0.0)).xyz;\nTangent_Length_Q177=length(Tangent_World_Q177);\nTangent_World_N_Q177=Tangent_World_Q177/Tangent_Length_Q177;\nvec3 Normal_World_Q210;\nvec3 Normal_World_N_Q210;\nfloat Normal_Length_Q210;\nObject_To_World_Dir_B210(vec3(0,0,1),Normal_World_Q210,Normal_World_N_Q210,Normal_Length_Q210);\nfloat X_Q228;\nfloat Y_Q228;\nfloat Z_Q228;\nTo_XYZ_B228(position,X_Q228,Y_Q228,Z_Q228);\nvec3 Nrm_World_Q176;\nNrm_World_Q176=normalize((world*vec4(normal,0.0)).xyz);\nvec3 Binormal_World_Q178;\nvec3 Binormal_World_N_Q178;\nfloat Binormal_Length_Q178;\nObject_To_World_Dir_B178(vec3(0,1,0),Binormal_World_Q178,Binormal_World_N_Q178,Binormal_Length_Q178);\nfloat Anisotropy_Q179=Tangent_Length_Q177/Binormal_Length_Q178;\nfloat Result_Q219;\nPick_Radius_B219(_Radius_,_Radius_Top_Left_,_Radius_Top_Right_,_Radius_Bottom_Left_,_Radius_Bottom_Right_,position,Result_Q219);\nfloat Anisotropy_Q203=Binormal_Length_Q178/Normal_Length_Q210;\nbool Not_Greater_Than_Q187;\nbool Greater_Than_Q187;\nGreater_Than_B187(Z_Q228,0.0,Not_Greater_Than_Q187,Greater_Than_Q187);\nvec4 Linear_Q251;\nLinear_Q251.rgb=clamp(_Left_Color_.rgb*_Left_Color_.rgb,0.0,1.0);\nLinear_Q251.a=_Left_Color_.a;\nvec4 Linear_Q252;\nLinear_Q252.rgb=clamp(_Right_Color_.rgb*_Right_Color_.rgb,0.0,1.0);\nLinear_Q252.a=_Right_Color_.a;\nvec3 Difference_Q211=vec3(0,0,0)-Normal_World_N_Q210;\nvec4 Out_Color_Q184=vec4(X_Q228,Y_Q228,Z_Q228,1);\nfloat Result_Q186;\nConditional_Float_B186(Greater_Than_Q187,_Bevel_Back_,_Bevel_Front_,Result_Q186);\nfloat Result_Q244;\nConditional_Float_B186(Greater_Than_Q187,_Bevel_Back_Stretch_,_Bevel_Front_Stretch_,Result_Q244);\nvec3 New_P_Q280;\nvec2 New_UV_Q280;\nfloat Radial_Gradient_Q280;\nvec3 Radial_Dir_Q280;\nvec3 New_Normal_Q280;\nMove_Verts_B280(Anisotropy_Q179,position,Result_Q219,Result_Q186,normal,Anisotropy_Q203,Result_Q244,New_P_Q280,New_UV_Q280,Radial_Gradient_Q280,Radial_Dir_Q280,New_Normal_Q280);\nfloat X_Q248;\nfloat Y_Q248;\nX_Q248=New_UV_Q280.x;\nY_Q248=New_UV_Q280.y;\nvec3 Pos_World_Q162;\nObject_To_World_Pos_B162(New_P_Q280,Pos_World_Q162);\nvec3 Nrm_World_Q182;\nObject_To_World_Normal_B182(New_Normal_Q280,Nrm_World_Q182);\nvec4 Blob_Info_Q173;\n#if BLOB_ENABLE\nBlob_Vertex_B173(Pos_World_Q162,Nrm_World_Q176,Tangent_World_N_Q177,Binormal_World_N_Q178,_Blob_Position_,_Blob_Intensity_,_Blob_Near_Size_,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,_Blob_Fade_Length_,_Blob_Pulse_,_Blob_Fade_,Blob_Info_Q173);\n#else\nBlob_Info_Q173=vec4(0,0,0,0);\n#endif\nvec4 Blob_Info_Q174;\n#if BLOB_ENABLE_2\nBlob_Vertex_B174(Pos_World_Q162,Nrm_World_Q176,Tangent_World_N_Q177,Binormal_World_N_Q178,_Blob_Position_2_,_Blob_Intensity_,_Blob_Near_Size_2_,_Blob_Far_Size_,_Blob_Near_Distance_,_Blob_Far_Distance_,_Blob_Fade_Length_,_Blob_Pulse_2_,_Blob_Fade_2_,Blob_Info_Q174);\n#else\nBlob_Info_Q174=vec4(0,0,0,0);\n#endif\nfloat Out_Q255;\nRemap_Range_B255(0.0,1.0,0.0,1.0,X_Q248,Out_Q255);\nfloat X_Q236;\nfloat Y_Q236;\nfloat Z_Q236;\nTo_XYZ_B228(Nrm_World_Q182,X_Q236,Y_Q236,Z_Q236);\nvec4 Color_At_T_Q247=mix(Linear_Q251,Linear_Q252,Out_Q255);\nfloat Minus_F_Q237=-Z_Q236;\nfloat R_Q249;\nfloat G_Q249;\nfloat B_Q249;\nfloat A_Q249;\nR_Q249=Color_At_T_Q247.r; G_Q249=Color_At_T_Q247.g; B_Q249=Color_At_T_Q247.b; A_Q249=Color_At_T_Q247.a;\nfloat ClampF_Q238=clamp(0.0,Minus_F_Q237,1.0);\nfloat Result_Q243;\nConditional_Float_B243(_Decal_Front_Only_,ClampF_Q238,1.0,Result_Q243);\nvec4 Vec4_Q239=vec4(Result_Q243,Radial_Gradient_Q280,G_Q249,B_Q249);\nvec3 Position=Pos_World_Q162;\nvec3 Normal=Nrm_World_Q182;\nvec2 UV=XY_Q235;\nvec3 Tangent=Tangent_World_N_Q177;\nvec3 Binormal=Difference_Q211;\nvec4 Color=Out_Color_Q184;\nvec4 Extra1=Vec4_Q239;\nvec4 Extra2=Blob_Info_Q173;\nvec4 Extra3=Blob_Info_Q174;\ngl_Position=viewProjection*vec4(Position,1);\nvPosition=Position;\nvNormal=Normal;\nvUV=UV;\nvTangent=Tangent;\nvBinormal=Binormal;\nvColor=Color;\nvExtra1=Extra1;\nvExtra2=Extra2;\nvExtra3=Extra3;\n}";class Ft extends n.MaterialDefines{constructor(){super(),this.SKY_ENABLED=!0,this.BLOB_ENABLE_2=!0,this.IRIDESCENCE_ENABLED=!0,this._needNormals=!0,this._needUVs=!0,this.rebuild()}}class Nt extends n.PushMaterial{constructor(t,e){super(t,e),this.radius=.157,this.bevelFront=.065,this.bevelFrontStretch=.077,this.bevelBack=.031,this.bevelBackStretch=0,this.radiusTopLeft=1,this.radiusTopRight=1,this.radiusBottomLeft=1,this.radiusBottomRight=1,this.bulgeEnabled=!1,this.bulgeHeight=-.323,this.bulgeRadius=.73,this.sunIntensity=2,this.sunTheta=.937,this.sunPhi=.555,this.indirectDiffuse=1,this.albedo=new n.Color4(.0117647,.505882,.996078,1),this.specular=0,this.shininess=10,this.sharpness=0,this.subsurface=.31,this.leftGradientColor=new n.Color4(.0117647,.505882,.996078,1),this.rightGradientColor=new n.Color4(.0117647,.505882,.996078,1),this.reflection=.749,this.frontReflect=0,this.edgeReflect=.09,this.power=8.1,this.skyColor=new n.Color4(.0117647,.960784,.996078,1),this.horizonColor=new n.Color4(.0117647,.333333,.996078,1),this.groundColor=new n.Color4(0,.254902,.996078,1),this.horizonPower=1,this.width=.02,this.fuzz=.5,this.minFuzz=.001,this.clipFade=.01,this.hueShift=0,this.saturationShift=0,this.valueShift=0,this.blobPosition=new n.Vector3(0,0,.1),this.blobIntensity=.5,this.blobNearSize=.01,this.blobFarSize=.03,this.blobNearDistance=0,this.blobFarDistance=.08,this.blobFadeLength=.576,this.blobPulse=0,this.blobFade=1,this.blobPosition2=new n.Vector3(.2,0,.1),this.blobNearSize2=.01,this.blobPulse2=0,this.blobFade2=1,this.blobTexture=new n.Texture("",this.getScene()),this.leftIndexPosition=new n.Vector3(0,0,1),this.rightIndexPosition=new n.Vector3(-1,-1,-1),this.leftIndexMiddlePosition=new n.Vector3(0,0,0),this.rightIndexMiddlePosition=new n.Vector3(0,0,0),this.decalScaleXY=new n.Vector2(1.5,1.5),this.decalFrontOnly=!0,this.rimIntensity=.287,this.rimHueShift=0,this.rimSaturationShift=0,this.rimValueShift=-1,this.iridescenceIntensity=0,this.useGlobalLeftIndex=1,this.useGlobalRightIndex=1,this.globalLeftIndexTipProximity=0,this.globalRightIndexTipProximity=0,this.globalLeftIndexTipPosition=new n.Vector4(.5,0,-.55,1),this.globaRightIndexTipPosition=new n.Vector4(0,0,0,1),this.globalLeftThumbTipPosition=new n.Vector4(.5,0,-.55,1),this.globalRightThumbTipPosition=new n.Vector4(0,0,0,1),this.globalLeftIndexMiddlePosition=new n.Vector4(.5,0,-.55,1),this.globalRightIndexMiddlePosition=new n.Vector4(0,0,0,1),this.alphaMode=n.Constants.ALPHA_DISABLE,this.backFaceCulling=!1,this._blueGradientTexture=new n.Texture(Nt.BLUE_GRADIENT_TEXTURE_URL,e,!0,!1,n.Texture.NEAREST_SAMPLINGMODE)}needAlphaBlending(){return!1}needAlphaTesting(){return!1}getAlphaTestTexture(){return null}isReadyForSubMesh(t,e,i){if(this.isFrozen&&e.effect&&e.effect._wasPreviouslyReady)return!0;e.materialDefines||(e.materialDefines=new Ft);const o=e.materialDefines,s=this.getScene();if(this._isReadyForSubMesh(e))return!0;const r=s.getEngine();if(n.MaterialHelper.PrepareDefinesForAttributes(t,o,!1,!1),o.isDirty){o.markAsProcessed(),s.resetCachedMaterial();const t=new n.EffectFallbacks;o.FOG&&t.addFallback(1,"FOG"),n.MaterialHelper.HandleFallbacksForShadows(o,t),o.IMAGEPROCESSINGPOSTPROCESS=s.imageProcessingConfiguration.applyByPostProcess;const i=[n.VertexBuffer.PositionKind];o.NORMAL&&i.push(n.VertexBuffer.NormalKind),o.UV1&&i.push(n.VertexBuffer.UVKind),o.UV2&&i.push(n.VertexBuffer.UV2Kind),o.VERTEXCOLOR&&i.push(n.VertexBuffer.ColorKind),o.TANGENT&&i.push(n.VertexBuffer.TangentKind),n.MaterialHelper.PrepareAttributesForInstances(i,o);const a="mrdlSliderThumb",l=o.toString(),_=["world","viewProjection","cameraPosition","_Radius_","_Bevel_Front_","_Bevel_Front_Stretch_","_Bevel_Back_","_Bevel_Back_Stretch_","_Radius_Top_Left_","_Radius_Top_Right_","_Radius_Bottom_Left_","_Radius_Bottom_Right_","_Bulge_Enabled_","_Bulge_Height_","_Bulge_Radius_","_Sun_Intensity_","_Sun_Theta_","_Sun_Phi_","_Indirect_Diffuse_","_Albedo_","_Specular_","_Shininess_","_Sharpness_","_Subsurface_","_Left_Color_","_Right_Color_","_Reflection_","_Front_Reflect_","_Edge_Reflect_","_Power_","_Sky_Color_","_Horizon_Color_","_Ground_Color_","_Horizon_Power_","_Reflection_Map_","_Indirect_Environment_","_Width_","_Fuzz_","_Min_Fuzz_","_Clip_Fade_","_Hue_Shift_","_Saturation_Shift_","_Value_Shift_","_Blob_Position_","_Blob_Intensity_","_Blob_Near_Size_","_Blob_Far_Size_","_Blob_Near_Distance_","_Blob_Far_Distance_","_Blob_Fade_Length_","_Blob_Pulse_","_Blob_Fade_","_Blob_Texture_","_Blob_Position_2_","_Blob_Near_Size_2_","_Blob_Pulse_2_","_Blob_Fade_2_","_Left_Index_Pos_","_Right_Index_Pos_","_Left_Index_Middle_Pos_","_Right_Index_Middle_Pos_","_Decal_","_Decal_Scale_XY_","_Decal_Front_Only_","_Rim_Intensity_","_Rim_Texture_","_Rim_Hue_Shift_","_Rim_Saturation_Shift_","_Rim_Value_Shift_","_Iridescence_Intensity_","_Iridescence_Texture_","Use_Global_Left_Index","Use_Global_Right_Index","Global_Left_Index_Tip_Position","Global_Right_Index_Tip_Position","Global_Left_Thumb_Tip_Position","Global_Right_Thumb_Tip_Position","Global_Left_Index_Middle_Position;","Global_Right_Index_Middle_Position","Global_Left_Index_Tip_Proximity","Global_Right_Index_Tip_Proximity"],h=["_Rim_Texture_","_Iridescence_Texture_"],c=new Array;n.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:_,uniformBuffersNames:c,samplers:h,defines:o,maxSimultaneousLights:4}),e.setEffect(s.getEngine().createEffect(a,{attributes:i,uniformsNames:_,uniformBuffersNames:c,samplers:h,defines:l,fallbacks:t,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},r),o)}return!(!e.effect||!e.effect.isReady()||(o._renderId=s.getRenderId(),e.effect._wasPreviouslyReady=!0,0))}bindForSubMesh(t,e,i){if(!i.materialDefines)return;const o=i.effect;o&&(this._activeEffect=o,this.bindOnlyWorldMatrix(t),this._activeEffect.setMatrix("viewProjection",this.getScene().getTransformMatrix()),this._activeEffect.setVector3("cameraPosition",this.getScene().activeCamera.position),this._activeEffect.setFloat("_Radius_",this.radius),this._activeEffect.setFloat("_Bevel_Front_",this.bevelFront),this._activeEffect.setFloat("_Bevel_Front_Stretch_",this.bevelFrontStretch),this._activeEffect.setFloat("_Bevel_Back_",this.bevelBack),this._activeEffect.setFloat("_Bevel_Back_Stretch_",this.bevelBackStretch),this._activeEffect.setFloat("_Radius_Top_Left_",this.radiusTopLeft),this._activeEffect.setFloat("_Radius_Top_Right_",this.radiusTopRight),this._activeEffect.setFloat("_Radius_Bottom_Left_",this.radiusBottomLeft),this._activeEffect.setFloat("_Radius_Bottom_Right_",this.radiusBottomRight),this._activeEffect.setFloat("_Bulge_Enabled_",this.bulgeEnabled?1:0),this._activeEffect.setFloat("_Bulge_Height_",this.bulgeHeight),this._activeEffect.setFloat("_Bulge_Radius_",this.bulgeRadius),this._activeEffect.setFloat("_Sun_Intensity_",this.sunIntensity),this._activeEffect.setFloat("_Sun_Theta_",this.sunTheta),this._activeEffect.setFloat("_Sun_Phi_",this.sunPhi),this._activeEffect.setFloat("_Indirect_Diffuse_",this.indirectDiffuse),this._activeEffect.setDirectColor4("_Albedo_",this.albedo),this._activeEffect.setFloat("_Specular_",this.specular),this._activeEffect.setFloat("_Shininess_",this.shininess),this._activeEffect.setFloat("_Sharpness_",this.sharpness),this._activeEffect.setFloat("_Subsurface_",this.subsurface),this._activeEffect.setDirectColor4("_Left_Color_",this.leftGradientColor),this._activeEffect.setDirectColor4("_Right_Color_",this.rightGradientColor),this._activeEffect.setFloat("_Reflection_",this.reflection),this._activeEffect.setFloat("_Front_Reflect_",this.frontReflect),this._activeEffect.setFloat("_Edge_Reflect_",this.edgeReflect),this._activeEffect.setFloat("_Power_",this.power),this._activeEffect.setDirectColor4("_Sky_Color_",this.skyColor),this._activeEffect.setDirectColor4("_Horizon_Color_",this.horizonColor),this._activeEffect.setDirectColor4("_Ground_Color_",this.groundColor),this._activeEffect.setFloat("_Horizon_Power_",this.horizonPower),this._activeEffect.setTexture("_Reflection_Map_",new n.Texture("",this.getScene())),this._activeEffect.setTexture("_Indirect_Environment_",new n.Texture("",this.getScene())),this._activeEffect.setFloat("_Width_",this.width),this._activeEffect.setFloat("_Fuzz_",this.fuzz),this._activeEffect.setFloat("_Min_Fuzz_",this.minFuzz),this._activeEffect.setFloat("_Clip_Fade_",this.clipFade),this._activeEffect.setFloat("_Hue_Shift_",this.hueShift),this._activeEffect.setFloat("_Saturation_Shift_",this.saturationShift),this._activeEffect.setFloat("_Value_Shift_",this.valueShift),this._activeEffect.setVector3("_Blob_Position_",this.blobPosition),this._activeEffect.setFloat("_Blob_Intensity_",this.blobIntensity),this._activeEffect.setFloat("_Blob_Near_Size_",this.blobNearSize),this._activeEffect.setFloat("_Blob_Far_Size_",this.blobFarSize),this._activeEffect.setFloat("_Blob_Near_Distance_",this.blobNearDistance),this._activeEffect.setFloat("_Blob_Far_Distance_",this.blobFarDistance),this._activeEffect.setFloat("_Blob_Fade_Length_",this.blobFadeLength),this._activeEffect.setFloat("_Blob_Pulse_",this.blobPulse),this._activeEffect.setFloat("_Blob_Fade_",this.blobFade),this._activeEffect.setTexture("_Blob_Texture_",this.blobTexture),this._activeEffect.setVector3("_Blob_Position_2_",this.blobPosition2),this._activeEffect.setFloat("_Blob_Near_Size_2_",this.blobNearSize2),this._activeEffect.setFloat("_Blob_Pulse_2_",this.blobPulse2),this._activeEffect.setFloat("_Blob_Fade_2_",this.blobFade2),this._activeEffect.setVector3("_Left_Index_Pos_",this.leftIndexPosition),this._activeEffect.setVector3("_Right_Index_Pos_",this.rightIndexPosition),this._activeEffect.setVector3("_Left_Index_Middle_Pos_",this.leftIndexMiddlePosition),this._activeEffect.setVector3("_Right_Index_Middle_Pos_",this.rightIndexMiddlePosition),this._activeEffect.setTexture("_Decal_",new n.Texture("",this.getScene())),this._activeEffect.setVector2("_Decal_Scale_XY_",this.decalScaleXY),this._activeEffect.setFloat("_Decal_Front_Only_",this.decalFrontOnly?1:0),this._activeEffect.setFloat("_Rim_Intensity_",this.rimIntensity),this._activeEffect.setTexture("_Rim_Texture_",this._blueGradientTexture),this._activeEffect.setFloat("_Rim_Hue_Shift_",this.rimHueShift),this._activeEffect.setFloat("_Rim_Saturation_Shift_",this.rimSaturationShift),this._activeEffect.setFloat("_Rim_Value_Shift_",this.rimValueShift),this._activeEffect.setFloat("_Iridescence_Intensity_",this.iridescenceIntensity),this._activeEffect.setTexture("_Iridescence_Texture_",this._blueGradientTexture),this._activeEffect.setFloat("Use_Global_Left_Index",this.useGlobalLeftIndex),this._activeEffect.setFloat("Use_Global_Right_Index",this.useGlobalRightIndex),this._activeEffect.setVector4("Global_Left_Index_Tip_Position",this.globalLeftIndexTipPosition),this._activeEffect.setVector4("Global_Right_Index_Tip_Position",this.globaRightIndexTipPosition),this._activeEffect.setVector4("Global_Left_Thumb_Tip_Position",this.globalLeftThumbTipPosition),this._activeEffect.setVector4("Global_Right_Thumb_Tip_Position",this.globalRightThumbTipPosition),this._activeEffect.setVector4("Global_Left_Index_Middle_Position",this.globalLeftIndexMiddlePosition),this._activeEffect.setVector4("Global_Right_Index_Middle_Position",this.globalRightIndexMiddlePosition),this._activeEffect.setFloat("Global_Left_Index_Tip_Proximity",this.globalLeftIndexTipProximity),this._activeEffect.setFloat("Global_Right_Index_Tip_Proximity",this.globalRightIndexTipProximity),this._afterBind(e,this._activeEffect))}getAnimatables(){return[]}dispose(t){super.dispose(t)}clone(t){return n.SerializationHelper.Clone((()=>new Nt(t,this.getScene())),this)}serialize(){const t=super.serialize();return t.customType="BABYLON.MRDLSliderThumbMaterial",t}getClassName(){return"MRDLSliderThumbMaterial"}static Parse(t,e,i){return n.SerializationHelper.Parse((()=>new Nt(t.name,e)),t,e,i)}}Nt.BLUE_GRADIENT_TEXTURE_URL="https://assets.babylonjs.com/meshes/MRTK/MRDL/mrtk-mrdl-blue-gradient.png",i([(0,n.serialize)()],Nt.prototype,"radius",void 0),i([(0,n.serialize)()],Nt.prototype,"bevelFront",void 0),i([(0,n.serialize)()],Nt.prototype,"bevelFrontStretch",void 0),i([(0,n.serialize)()],Nt.prototype,"bevelBack",void 0),i([(0,n.serialize)()],Nt.prototype,"bevelBackStretch",void 0),i([(0,n.serialize)()],Nt.prototype,"radiusTopLeft",void 0),i([(0,n.serialize)()],Nt.prototype,"radiusTopRight",void 0),i([(0,n.serialize)()],Nt.prototype,"radiusBottomLeft",void 0),i([(0,n.serialize)()],Nt.prototype,"radiusBottomRight",void 0),i([(0,n.serialize)()],Nt.prototype,"bulgeEnabled",void 0),i([(0,n.serialize)()],Nt.prototype,"bulgeHeight",void 0),i([(0,n.serialize)()],Nt.prototype,"bulgeRadius",void 0),i([(0,n.serialize)()],Nt.prototype,"sunIntensity",void 0),i([(0,n.serialize)()],Nt.prototype,"sunTheta",void 0),i([(0,n.serialize)()],Nt.prototype,"sunPhi",void 0),i([(0,n.serialize)()],Nt.prototype,"indirectDiffuse",void 0),i([(0,n.serialize)()],Nt.prototype,"albedo",void 0),i([(0,n.serialize)()],Nt.prototype,"specular",void 0),i([(0,n.serialize)()],Nt.prototype,"shininess",void 0),i([(0,n.serialize)()],Nt.prototype,"sharpness",void 0),i([(0,n.serialize)()],Nt.prototype,"subsurface",void 0),i([(0,n.serialize)()],Nt.prototype,"leftGradientColor",void 0),i([(0,n.serialize)()],Nt.prototype,"rightGradientColor",void 0),i([(0,n.serialize)()],Nt.prototype,"reflection",void 0),i([(0,n.serialize)()],Nt.prototype,"frontReflect",void 0),i([(0,n.serialize)()],Nt.prototype,"edgeReflect",void 0),i([(0,n.serialize)()],Nt.prototype,"power",void 0),i([(0,n.serialize)()],Nt.prototype,"skyColor",void 0),i([(0,n.serialize)()],Nt.prototype,"horizonColor",void 0),i([(0,n.serialize)()],Nt.prototype,"groundColor",void 0),i([(0,n.serialize)()],Nt.prototype,"horizonPower",void 0),i([(0,n.serialize)()],Nt.prototype,"width",void 0),i([(0,n.serialize)()],Nt.prototype,"fuzz",void 0),i([(0,n.serialize)()],Nt.prototype,"minFuzz",void 0),i([(0,n.serialize)()],Nt.prototype,"clipFade",void 0),i([(0,n.serialize)()],Nt.prototype,"hueShift",void 0),i([(0,n.serialize)()],Nt.prototype,"saturationShift",void 0),i([(0,n.serialize)()],Nt.prototype,"valueShift",void 0),i([(0,n.serialize)()],Nt.prototype,"blobPosition",void 0),i([(0,n.serialize)()],Nt.prototype,"blobIntensity",void 0),i([(0,n.serialize)()],Nt.prototype,"blobNearSize",void 0),i([(0,n.serialize)()],Nt.prototype,"blobFarSize",void 0),i([(0,n.serialize)()],Nt.prototype,"blobNearDistance",void 0),i([(0,n.serialize)()],Nt.prototype,"blobFarDistance",void 0),i([(0,n.serialize)()],Nt.prototype,"blobFadeLength",void 0),i([(0,n.serialize)()],Nt.prototype,"blobPulse",void 0),i([(0,n.serialize)()],Nt.prototype,"blobFade",void 0),i([(0,n.serialize)()],Nt.prototype,"blobPosition2",void 0),i([(0,n.serialize)()],Nt.prototype,"blobNearSize2",void 0),i([(0,n.serialize)()],Nt.prototype,"blobPulse2",void 0),i([(0,n.serialize)()],Nt.prototype,"blobFade2",void 0),i([(0,n.serialize)()],Nt.prototype,"blobTexture",void 0),i([(0,n.serialize)()],Nt.prototype,"leftIndexPosition",void 0),i([(0,n.serialize)()],Nt.prototype,"rightIndexPosition",void 0),i([(0,n.serialize)()],Nt.prototype,"leftIndexMiddlePosition",void 0),i([(0,n.serialize)()],Nt.prototype,"rightIndexMiddlePosition",void 0),i([(0,n.serialize)()],Nt.prototype,"decalScaleXY",void 0),i([(0,n.serialize)()],Nt.prototype,"decalFrontOnly",void 0),i([(0,n.serialize)()],Nt.prototype,"rimIntensity",void 0),i([(0,n.serialize)()],Nt.prototype,"rimHueShift",void 0),i([(0,n.serialize)()],Nt.prototype,"rimSaturationShift",void 0),i([(0,n.serialize)()],Nt.prototype,"rimValueShift",void 0),i([(0,n.serialize)()],Nt.prototype,"iridescenceIntensity",void 0),(0,n.RegisterClass)("BABYLON.GUI.MRDLSliderThumbMaterial",Nt);n.ShaderStore.ShadersStore.mrdlBackplatePixelShader="uniform vec3 cameraPosition;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec4 vExtra1;\nvarying vec4 vExtra2;\nuniform float _Radius_;\nuniform float _Line_Width_;\nuniform bool _Absolute_Sizes_;\nuniform float _Filter_Width_;\nuniform vec4 _Base_Color_;\nuniform vec4 _Line_Color_;\nuniform float _Radius_Top_Left_;\nuniform float _Radius_Top_Right_;\nuniform float _Radius_Bottom_Left_;\nuniform float _Radius_Bottom_Right_;\nuniform float _Rate_;\nuniform vec4 _Highlight_Color_;\nuniform float _Highlight_Width_;\nuniform vec4 _Highlight_Transform_;\nuniform float _Highlight_;\nuniform float _Iridescence_Intensity_;\nuniform float _Iridescence_Edge_Intensity_;\nuniform vec4 _Iridescence_Tint_;\nuniform sampler2D _Iridescent_Map_;\nuniform float _Angle_;\nuniform bool _Reflected_;\nuniform float _Frequency_;\nuniform float _Vertical_Offset_;\nuniform vec4 _Gradient_Color_;\nuniform vec4 _Top_Left_;\nuniform vec4 _Top_Right_;\nuniform vec4 _Bottom_Left_;\nuniform vec4 _Bottom_Right_;\nuniform float _Edge_Width_;\nuniform float _Edge_Power_;\nuniform float _Line_Gradient_Blend_;\nuniform float _Fade_Out_;\nvoid FastLinearTosRGB_B353(\nvec4 Linear,\nout vec4 sRGB)\n{\nsRGB.rgb=sqrt(clamp(Linear.rgb,0.0,1.0));\nsRGB.a=Linear.a;\n}\nvoid Round_Rect_Fragment_B332(\nfloat Radius,\nfloat Line_Width,\nvec4 Line_Color,\nfloat Filter_Width,\nvec2 UV,\nfloat Line_Visibility,\nvec4 Rect_Parms,\nvec4 Fill_Color,\nout vec4 Color)\n{\nfloat d=length(max(abs(UV)-Rect_Parms.xy,0.0));\nfloat dx=max(fwidth(d)*Filter_Width,0.00001);\nfloat g=min(Rect_Parms.z,Rect_Parms.w);\nfloat dgrad=max(fwidth(g)*Filter_Width,0.00001);\nfloat Inside_Rect=clamp(g/dgrad,0.0,1.0);\nfloat inner=clamp((d+dx*0.5-max(Radius-Line_Width,d-dx*0.5))/dx,0.0,1.0);\nColor=clamp(mix(Fill_Color,Line_Color,inner),0.0,1.0)*Inside_Rect;\n}\nvoid Iridescence_B343(\nvec3 Position,\nvec3 Normal,\nvec2 UV,\nvec3 Axis,\nvec3 Eye,\nvec4 Tint,\nsampler2D Texture,\nbool Reflected,\nfloat Frequency,\nfloat Vertical_Offset,\nout vec4 Color)\n{\nvec3 i=normalize(Position-Eye);\nvec3 r=reflect(i,Normal);\nfloat idota=dot(i,Axis);\nfloat idotr=dot(i,r);\nfloat x=Reflected ? idotr : idota;\nvec2 xy;\nxy.x=fract((x*Frequency+1.0)*0.5+UV.y*Vertical_Offset);\nxy.y=0.5;\nColor=texture(Texture,xy);\nColor.rgb*=Tint.rgb;\n}\nvoid Scale_RGB_B346(\nvec4 Color,\nfloat Scalar,\nout vec4 Result)\n{\nResult=vec4(Scalar,Scalar,Scalar,1)*Color;\n}\nvoid Scale_RGB_B344(\nfloat Scalar,\nvec4 Color,\nout vec4 Result)\n{\nResult=vec4(Scalar,Scalar,Scalar,1)*Color;\n}\nvoid Line_Fragment_B362(\nvec4 Base_Color,\nvec4 Highlight_Color,\nfloat Highlight_Width,\nvec3 Line_Vertex,\nfloat Highlight,\nout vec4 Line_Color)\n{\nfloat k2=1.0-clamp(abs(Line_Vertex.y/Highlight_Width),0.0,1.0);\nLine_Color=mix(Base_Color,Highlight_Color,Highlight*k2);\n}\nvoid Edge_B356(\nvec4 RectParms,\nfloat Radius,\nfloat Line_Width,\nvec2 UV,\nfloat Edge_Width,\nfloat Edge_Power,\nout float Result)\n{\nfloat d=length(max(abs(UV)-RectParms.xy,0.0));\nfloat edge=1.0-clamp((1.0-d/(Radius-Line_Width))/Edge_Width,0.0,1.0);\nResult=pow(edge,Edge_Power);\n}\nvoid Gradient_B355(\nvec4 Gradient_Color,\nvec4 Top_Left,\nvec4 Top_Right,\nvec4 Bottom_Left,\nvec4 Bottom_Right,\nvec2 UV,\nout vec4 Result)\n{\nvec3 top=Top_Left.rgb+(Top_Right.rgb-Top_Left.rgb)*UV.x;\nvec3 bottom=Bottom_Left.rgb+(Bottom_Right.rgb-Bottom_Left.rgb)*UV.x;\nResult.rgb=Gradient_Color.rgb*(bottom+(top-bottom)*UV.y);\nResult.a=1.0;\n}\nvoid main()\n{\nfloat X_Q338;\nfloat Y_Q338;\nfloat Z_Q338;\nfloat W_Q338;\nX_Q338=vExtra2.x;\nY_Q338=vExtra2.y;\nZ_Q338=vExtra2.z;\nW_Q338=vExtra2.w;\nvec4 Color_Q343;\n#if IRIDESCENCE_ENABLE\nIridescence_B343(vPosition,vNormal,vUV,vBinormal,cameraPosition,_Iridescence_Tint_,_Iridescent_Map_,_Reflected_,_Frequency_,_Vertical_Offset_,Color_Q343);\n#else\nColor_Q343=vec4(0,0,0,0);\n#endif\nvec4 Result_Q344;\nScale_RGB_B344(_Iridescence_Intensity_,Color_Q343,Result_Q344);\nvec4 Line_Color_Q362;\nLine_Fragment_B362(_Line_Color_,_Highlight_Color_,_Highlight_Width_,vTangent,_Highlight_,Line_Color_Q362);\nfloat Result_Q356;\n#if EDGE_ONLY\nEdge_B356(vExtra1,Z_Q338,W_Q338,vUV,_Edge_Width_,_Edge_Power_,Result_Q356);\n#else\nResult_Q356=1.0;\n#endif\nvec2 Vec2_Q339=vec2(X_Q338,Y_Q338);\nvec4 Result_Q355;\nGradient_B355(_Gradient_Color_,_Top_Left_,_Top_Right_,_Bottom_Left_,_Bottom_Right_,Vec2_Q339,Result_Q355);\nvec4 Linear_Q348;\nLinear_Q348.rgb=clamp(Result_Q355.rgb*Result_Q355.rgb,0.0,1.0);\nLinear_Q348.a=Result_Q355.a;\nvec4 Result_Q346;\nScale_RGB_B346(Linear_Q348,Result_Q356,Result_Q346);\nvec4 Sum_Q345=Result_Q346+Result_Q344;\nvec4 Color_At_T_Q347=mix(Line_Color_Q362,Result_Q346,_Line_Gradient_Blend_);\nvec4 Base_And_Iridescent_Q350;\nBase_And_Iridescent_Q350=_Base_Color_+vec4(Sum_Q345.rgb,0.0);\nvec4 Sum_Q349=Color_At_T_Q347+_Iridescence_Edge_Intensity_*Color_Q343;\nvec4 Result_Q351=Sum_Q349; Result_Q351.a=1.0;\nvec4 Color_Q332;\nRound_Rect_Fragment_B332(Z_Q338,W_Q338,Result_Q351,_Filter_Width_,vUV,1.0,vExtra1,Base_And_Iridescent_Q350,Color_Q332);\nvec4 Result_Q354=_Fade_Out_*Color_Q332;\nvec4 sRGB_Q353;\nFastLinearTosRGB_B353(Result_Q354,sRGB_Q353);\nvec4 Out_Color=sRGB_Q353;\nfloat Clip_Threshold=0.001;\nbool To_sRGB=false;\ngl_FragColor=Out_Color;\n}";n.ShaderStore.ShadersStore.mrdlBackplateVertexShader="uniform mat4 world;\nuniform mat4 viewProjection;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 tangent;\nuniform float _Radius_;\nuniform float _Line_Width_;\nuniform bool _Absolute_Sizes_;\nuniform float _Filter_Width_;\nuniform vec4 _Base_Color_;\nuniform vec4 _Line_Color_;\nuniform float _Radius_Top_Left_;\nuniform float _Radius_Top_Right_;\nuniform float _Radius_Bottom_Left_;\nuniform float _Radius_Bottom_Right_;\nuniform float _Rate_;\nuniform vec4 _Highlight_Color_;\nuniform float _Highlight_Width_;\nuniform vec4 _Highlight_Transform_;\nuniform float _Highlight_;\nuniform float _Iridescence_Intensity_;\nuniform float _Iridescence_Edge_Intensity_;\nuniform vec4 _Iridescence_Tint_;\nuniform sampler2D _Iridescent_Map_;\nuniform float _Angle_;\nuniform bool _Reflected_;\nuniform float _Frequency_;\nuniform float _Vertical_Offset_;\nuniform vec4 _Gradient_Color_;\nuniform vec4 _Top_Left_;\nuniform vec4 _Top_Right_;\nuniform vec4 _Bottom_Left_;\nuniform vec4 _Bottom_Right_;\nuniform float _Edge_Width_;\nuniform float _Edge_Power_;\nuniform float _Line_Gradient_Blend_;\nuniform float _Fade_Out_;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vUV;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec4 vExtra1;\nvarying vec4 vExtra2;\nvoid Object_To_World_Pos_B314(\nvec3 Pos_Object,\nout vec3 Pos_World)\n{\nPos_World=(world*vec4(Pos_Object,1.0)).xyz;\n}\nvoid Round_Rect_Vertex_B357(\nvec2 UV,\nfloat Radius,\nfloat Margin,\nfloat Anisotropy,\nfloat Gradient1,\nfloat Gradient2,\nvec3 Normal,\nvec4 Color_Scale_Translate,\nout vec2 Rect_UV,\nout vec4 Rect_Parms,\nout vec2 Scale_XY,\nout vec2 Line_UV,\nout vec2 Color_UV_Info)\n{\nScale_XY=vec2(Anisotropy,1.0);\nLine_UV=(UV-vec2(0.5,0.5));\nRect_UV=Line_UV*Scale_XY;\nRect_Parms.xy=Scale_XY*0.5-vec2(Radius,Radius)-vec2(Margin,Margin);\nRect_Parms.z=Gradient1; \nRect_Parms.w=Gradient2;\nColor_UV_Info=(Line_UV+vec2(0.5,0.5))*Color_Scale_Translate.xy+Color_Scale_Translate.zw;\n}\nvoid Line_Vertex_B333(\nvec2 Scale_XY,\nvec2 UV,\nfloat Time,\nfloat Rate,\nvec4 Highlight_Transform,\nout vec3 Line_Vertex)\n{\nfloat angle2=(Rate*Time)*2.0*3.1416;\nfloat sinAngle2=sin(angle2);\nfloat cosAngle2=cos(angle2);\nvec2 xformUV=UV*Highlight_Transform.xy+Highlight_Transform.zw;\nLine_Vertex.x=0.0;\nLine_Vertex.y=cosAngle2*xformUV.x-sinAngle2*xformUV.y;\nLine_Vertex.z=0.0; \n}\nvoid PickDir_B334(\nfloat Degrees,\nvec3 DirX,\nvec3 DirY,\nout vec3 Dir)\n{\nfloat a=Degrees*3.14159/180.0;\nDir=cos(a)*DirX+sin(a)*DirY;\n}\nvoid Move_Verts_B327(\nfloat Anisotropy,\nvec3 P,\nfloat Radius,\nout vec3 New_P,\nout vec2 New_UV,\nout float Radial_Gradient,\nout vec3 Radial_Dir)\n{\nvec2 UV=P.xy*2.0+0.5;\nvec2 center=clamp(UV,0.0,1.0);\nvec2 delta=UV-center;\nvec2 r2=2.0*vec2(Radius/Anisotropy,Radius);\nNew_UV=center+r2*(UV-2.0*center+0.5);\nNew_P=vec3(New_UV-0.5,P.z);\nRadial_Gradient=1.0-length(delta)*2.0;\nRadial_Dir=vec3(delta*r2,0.0);\n}\nvoid Pick_Radius_B336(\nfloat Radius,\nfloat Radius_Top_Left,\nfloat Radius_Top_Right,\nfloat Radius_Bottom_Left,\nfloat Radius_Bottom_Right,\nvec3 Position,\nout float Result)\n{\nbool whichY=Position.y>0.0;\nResult=Position.x<0.0 ? (whichY ? Radius_Top_Left : Radius_Bottom_Left) : (whichY ? Radius_Top_Right : Radius_Bottom_Right);\nResult*=Radius;\n}\nvoid Edge_AA_Vertex_B328(\nvec3 Position_World,\nvec3 Position_Object,\nvec3 Normal_Object,\nvec3 Eye,\nfloat Radial_Gradient,\nvec3 Radial_Dir,\nvec3 Tangent,\nout float Gradient1,\nout float Gradient2)\n{\nvec3 I=(Eye-Position_World);\nvec3 T=(vec4(Tangent,0.0)).xyz;\nfloat g=(dot(T,I)<0.0) ? 0.0 : 1.0;\nif (Normal_Object.z==0.0) { \nGradient1=Position_Object.z>0.0 ? g : 1.0;\nGradient2=Position_Object.z>0.0 ? 1.0 : g;\n} else {\nGradient1=g+(1.0-g)*(Radial_Gradient);\nGradient2=1.0;\n}\n}\nvoid Object_To_World_Dir_B330(\nvec3 Dir_Object,\nout vec3 Binormal_World,\nout vec3 Binormal_World_N,\nout float Binormal_Length)\n{\nBinormal_World=(world*vec4(Dir_Object,0.0)).xyz;\nBinormal_Length=length(Binormal_World);\nBinormal_World_N=Binormal_World/Binormal_Length;\n}\nvoid RelativeOrAbsoluteDetail_B341(\nfloat Nominal_Radius,\nfloat Nominal_LineWidth,\nbool Absolute_Measurements,\nfloat Height,\nout float Radius,\nout float Line_Width)\n{\nfloat scale=Absolute_Measurements ? 1.0/Height : 1.0;\nRadius=Nominal_Radius*scale;\nLine_Width=Nominal_LineWidth*scale;\n}\nvoid main()\n{\nvec3 Nrm_World_Q326;\nNrm_World_Q326=normalize((world*vec4(normal,0.0)).xyz);\nvec3 Tangent_World_Q329;\nvec3 Tangent_World_N_Q329;\nfloat Tangent_Length_Q329;\nTangent_World_Q329=(world*vec4(vec3(1,0,0),0.0)).xyz;\nTangent_Length_Q329=length(Tangent_World_Q329);\nTangent_World_N_Q329=Tangent_World_Q329/Tangent_Length_Q329;\nvec3 Binormal_World_Q330;\nvec3 Binormal_World_N_Q330;\nfloat Binormal_Length_Q330;\nObject_To_World_Dir_B330(vec3(0,1,0),Binormal_World_Q330,Binormal_World_N_Q330,Binormal_Length_Q330);\nfloat Radius_Q341;\nfloat Line_Width_Q341;\nRelativeOrAbsoluteDetail_B341(_Radius_,_Line_Width_,_Absolute_Sizes_,Binormal_Length_Q330,Radius_Q341,Line_Width_Q341);\nvec3 Dir_Q334;\nPickDir_B334(_Angle_,Tangent_World_N_Q329,Binormal_World_N_Q330,Dir_Q334);\nfloat Result_Q336;\nPick_Radius_B336(Radius_Q341,_Radius_Top_Left_,_Radius_Top_Right_,_Radius_Bottom_Left_,_Radius_Bottom_Right_,position,Result_Q336);\nfloat Anisotropy_Q331=Tangent_Length_Q329/Binormal_Length_Q330;\nvec4 Out_Color_Q337=vec4(Result_Q336,Line_Width_Q341,0,1);\nvec3 New_P_Q327;\nvec2 New_UV_Q327;\nfloat Radial_Gradient_Q327;\nvec3 Radial_Dir_Q327;\nMove_Verts_B327(Anisotropy_Q331,position,Result_Q336,New_P_Q327,New_UV_Q327,Radial_Gradient_Q327,Radial_Dir_Q327);\nvec3 Pos_World_Q314;\nObject_To_World_Pos_B314(New_P_Q327,Pos_World_Q314);\nfloat Gradient1_Q328;\nfloat Gradient2_Q328;\n#if SMOOTH_EDGES\nEdge_AA_Vertex_B328(Pos_World_Q314,position,normal,cameraPosition,Radial_Gradient_Q327,Radial_Dir_Q327,tangent,Gradient1_Q328,Gradient2_Q328);\n#else\nGradient1_Q328=1.0;\nGradient2_Q328=1.0;\n#endif\nvec2 Rect_UV_Q357;\nvec4 Rect_Parms_Q357;\nvec2 Scale_XY_Q357;\nvec2 Line_UV_Q357;\nvec2 Color_UV_Info_Q357;\nRound_Rect_Vertex_B357(New_UV_Q327,Result_Q336,0.0,Anisotropy_Q331,Gradient1_Q328,Gradient2_Q328,normal,vec4(1,1,0,0),Rect_UV_Q357,Rect_Parms_Q357,Scale_XY_Q357,Line_UV_Q357,Color_UV_Info_Q357);\nvec3 Line_Vertex_Q333;\nLine_Vertex_B333(Scale_XY_Q357,Line_UV_Q357,(20.0),_Rate_,_Highlight_Transform_,Line_Vertex_Q333);\nfloat X_Q359;\nfloat Y_Q359;\nX_Q359=Color_UV_Info_Q357.x;\nY_Q359=Color_UV_Info_Q357.y;\nvec4 Vec4_Q358=vec4(X_Q359,Y_Q359,Result_Q336,Line_Width_Q341);\nvec3 Position=Pos_World_Q314;\nvec3 Normal=Nrm_World_Q326;\nvec2 UV=Rect_UV_Q357;\nvec3 Tangent=Line_Vertex_Q333;\nvec3 Binormal=Dir_Q334;\nvec4 Color=Out_Color_Q337;\nvec4 Extra1=Rect_Parms_Q357;\nvec4 Extra2=Vec4_Q358;\nvec4 Extra3=vec4(0,0,0,0);\ngl_Position=viewProjection*vec4(Position,1);\nvPosition=Position;\nvNormal=Normal;\nvUV=UV;\nvTangent=Tangent;\nvBinormal=Binormal;\nvExtra1=Extra1;\nvExtra2=Extra2;\n}";class kt extends n.MaterialDefines{constructor(){super(),this.IRIDESCENCE_ENABLED=!0,this.SMOOTH_EDGES=!0,this._needNormals=!0,this.rebuild()}}class At extends n.PushMaterial{constructor(t,e){super(t,e),this.radius=.3,this.lineWidth=.003,this.absoluteSizes=!1,this._filterWidth=1,this.baseColor=new n.Color4(0,0,0,1),this.lineColor=new n.Color4(.2,.262745,.4,1),this.radiusTopLeft=1,this.radiusTopRight=1,this.radiusBottomLeft=1,this.radiusBottomRight=1,this._rate=0,this.highlightColor=new n.Color4(.239216,.435294,.827451,1),this.highlightWidth=0,this._highlightTransform=new n.Vector4(1,1,0,0),this._highlight=1,this.iridescenceIntensity=.45,this.iridescenceEdgeIntensity=1,this.iridescenceTint=new n.Color4(1,1,1,1),this._angle=-45,this.fadeOut=1,this._reflected=!0,this._frequency=1,this._verticalOffset=0,this.gradientColor=new n.Color4(.74902,.74902,.74902,1),this.topLeftGradientColor=new n.Color4(.00784314,.294118,.580392,1),this.topRightGradientColor=new n.Color4(.305882,0,1,1),this.bottomLeftGradientColor=new n.Color4(.133333,.258824,.992157,1),this.bottomRightGradientColor=new n.Color4(.176471,.176471,.619608,1),this.edgeWidth=.5,this.edgePower=1,this.edgeLineGradientBlend=.5,this.alphaMode=n.Constants.ALPHA_DISABLE,this.backFaceCulling=!1,this._iridescentMapTexture=new n.Texture(At.IRIDESCENT_MAP_TEXTURE_URL,this.getScene(),!0,!1,n.Texture.NEAREST_SAMPLINGMODE)}needAlphaBlending(){return!1}needAlphaTesting(){return!1}getAlphaTestTexture(){return null}isReadyForSubMesh(t,e,i){if(this.isFrozen&&e.effect&&e.effect._wasPreviouslyReady)return!0;e.materialDefines||(e.materialDefines=new kt);const o=e.materialDefines,s=this.getScene();if(this._isReadyForSubMesh(e))return!0;const r=s.getEngine();if(n.MaterialHelper.PrepareDefinesForAttributes(t,o,!1,!1),o.isDirty){o.markAsProcessed(),s.resetCachedMaterial();const t=new n.EffectFallbacks;o.FOG&&t.addFallback(1,"FOG"),n.MaterialHelper.HandleFallbacksForShadows(o,t),o.IMAGEPROCESSINGPOSTPROCESS=s.imageProcessingConfiguration.applyByPostProcess;const i=[n.VertexBuffer.PositionKind];o.NORMAL&&i.push(n.VertexBuffer.NormalKind),o.UV1&&i.push(n.VertexBuffer.UVKind),o.UV2&&i.push(n.VertexBuffer.UV2Kind),o.VERTEXCOLOR&&i.push(n.VertexBuffer.ColorKind),o.TANGENT&&i.push(n.VertexBuffer.TangentKind),n.MaterialHelper.PrepareAttributesForInstances(i,o);const a="mrdlBackplate",l=o.toString(),_=["world","viewProjection","cameraPosition","_Radius_","_Line_Width_","_Absolute_Sizes_","_Filter_Width_","_Base_Color_","_Line_Color_","_Radius_Top_Left_","_Radius_Top_Right_","_Radius_Bottom_Left_","_Radius_Bottom_Right_","_Rate_","_Highlight_Color_","_Highlight_Width_","_Highlight_Transform_","_Highlight_","_Iridescence_Intensity_","_Iridescence_Edge_Intensity_","_Iridescence_Tint_","_Iridescent_Map_","_Angle_","_Reflected_","_Frequency_","_Vertical_Offset_","_Gradient_Color_","_Top_Left_","_Top_Right_","_Bottom_Left_","_Bottom_Right_","_Edge_Width_","_Edge_Power_","_Line_Gradient_Blend_","_Fade_Out_"],h=[],c=new Array;n.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:_,uniformBuffersNames:c,samplers:h,defines:o,maxSimultaneousLights:4}),e.setEffect(s.getEngine().createEffect(a,{attributes:i,uniformsNames:_,uniformBuffersNames:c,samplers:h,defines:l,fallbacks:t,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},r),o)}return!(!e.effect||!e.effect.isReady()||(o._renderId=s.getRenderId(),e.effect._wasPreviouslyReady=!0,0))}bindForSubMesh(t,e,i){if(!i.materialDefines)return;const o=i.effect;o&&(this._activeEffect=o,this.bindOnlyWorldMatrix(t),this._activeEffect.setMatrix("viewProjection",this.getScene().getTransformMatrix()),this._activeEffect.setVector3("cameraPosition",this.getScene().activeCamera.position),this._activeEffect.setFloat("_Radius_",this.radius),this._activeEffect.setFloat("_Line_Width_",this.lineWidth),this._activeEffect.setFloat("_Absolute_Sizes_",this.absoluteSizes?1:0),this._activeEffect.setFloat("_Filter_Width_",this._filterWidth),this._activeEffect.setDirectColor4("_Base_Color_",this.baseColor),this._activeEffect.setDirectColor4("_Line_Color_",this.lineColor),this._activeEffect.setFloat("_Radius_Top_Left_",this.radiusTopLeft),this._activeEffect.setFloat("_Radius_Top_Right_",this.radiusTopRight),this._activeEffect.setFloat("_Radius_Bottom_Left_",this.radiusBottomLeft),this._activeEffect.setFloat("_Radius_Bottom_Right_",this.radiusBottomRight),this._activeEffect.setFloat("_Rate_",this._rate),this._activeEffect.setDirectColor4("_Highlight_Color_",this.highlightColor),this._activeEffect.setFloat("_Highlight_Width_",this.highlightWidth),this._activeEffect.setVector4("_Highlight_Transform_",this._highlightTransform),this._activeEffect.setFloat("_Highlight_",this._highlight),this._activeEffect.setFloat("_Iridescence_Intensity_",this.iridescenceIntensity),this._activeEffect.setFloat("_Iridescence_Edge_Intensity_",this.iridescenceEdgeIntensity),this._activeEffect.setDirectColor4("_Iridescence_Tint_",this.iridescenceTint),this._activeEffect.setTexture("_Iridescent_Map_",this._iridescentMapTexture),this._activeEffect.setFloat("_Angle_",this._angle),this._activeEffect.setFloat("_Reflected_",this._reflected?1:0),this._activeEffect.setFloat("_Frequency_",this._frequency),this._activeEffect.setFloat("_Vertical_Offset_",this._verticalOffset),this._activeEffect.setDirectColor4("_Gradient_Color_",this.gradientColor),this._activeEffect.setDirectColor4("_Top_Left_",this.topLeftGradientColor),this._activeEffect.setDirectColor4("_Top_Right_",this.topRightGradientColor),this._activeEffect.setDirectColor4("_Bottom_Left_",this.bottomLeftGradientColor),this._activeEffect.setDirectColor4("_Bottom_Right_",this.bottomRightGradientColor),this._activeEffect.setFloat("_Edge_Width_",this.edgeWidth),this._activeEffect.setFloat("_Edge_Power_",this.edgePower),this._activeEffect.setFloat("_Line_Gradient_Blend_",this.edgeLineGradientBlend),this._activeEffect.setFloat("_Fade_Out_",this.fadeOut),this._afterBind(e,this._activeEffect))}getAnimatables(){return[]}dispose(t){super.dispose(t)}clone(t){return n.SerializationHelper.Clone((()=>new At(t,this.getScene())),this)}serialize(){const t=super.serialize();return t.customType="BABYLON.MRDLBackplateMaterial",t}getClassName(){return"MRDLBackplateMaterial"}static Parse(t,e,i){return n.SerializationHelper.Parse((()=>new At(t.name,e)),t,e,i)}}At.IRIDESCENT_MAP_TEXTURE_URL="https://assets.babylonjs.com/meshes/MRTK/MRDL/mrtk-mrdl-backplate-iridescence.png",i([(0,n.serialize)()],At.prototype,"radius",void 0),i([(0,n.serialize)()],At.prototype,"lineWidth",void 0),i([(0,n.serialize)()],At.prototype,"absoluteSizes",void 0),i([(0,n.serialize)()],At.prototype,"baseColor",void 0),i([(0,n.serialize)()],At.prototype,"lineColor",void 0),i([(0,n.serialize)()],At.prototype,"radiusTopLeft",void 0),i([(0,n.serialize)()],At.prototype,"radiusTopRight",void 0),i([(0,n.serialize)()],At.prototype,"radiusBottomLeft",void 0),i([(0,n.serialize)()],At.prototype,"radiusBottomRight",void 0),i([(0,n.serialize)()],At.prototype,"highlightColor",void 0),i([(0,n.serialize)()],At.prototype,"highlightWidth",void 0),i([(0,n.serialize)()],At.prototype,"iridescenceIntensity",void 0),i([(0,n.serialize)()],At.prototype,"iridescenceEdgeIntensity",void 0),i([(0,n.serialize)()],At.prototype,"iridescenceTint",void 0),i([(0,n.serialize)()],At.prototype,"fadeOut",void 0),i([(0,n.serialize)()],At.prototype,"gradientColor",void 0),i([(0,n.serialize)()],At.prototype,"topLeftGradientColor",void 0),i([(0,n.serialize)()],At.prototype,"topRightGradientColor",void 0),i([(0,n.serialize)()],At.prototype,"bottomLeftGradientColor",void 0),i([(0,n.serialize)()],At.prototype,"bottomRightGradientColor",void 0),i([(0,n.serialize)()],At.prototype,"edgeWidth",void 0),i([(0,n.serialize)()],At.prototype,"edgePower",void 0),i([(0,n.serialize)()],At.prototype,"edgeLineGradientBlend",void 0),(0,n.RegisterClass)("BABYLON.GUI.MRDLBackplateMaterial",At);class zt extends ot{constructor(t,e){super(t),this.onValueChangedObservable=new n.Observable,this._sliderBackplateVisible=e||!1,this._minimum=0,this._maximum=100,this._step=0,this._value=50}get mesh(){return this.node?this._sliderThumb:null}get minimum(){return this._minimum}set minimum(t){this._minimum!==t&&(this._minimum=Math.max(t,0),this._value=Math.max(Math.min(this._value,this._maximum),this._minimum))}get maximum(){return this._maximum}set maximum(t){this._maximum!==t&&(this._maximum=Math.max(t,this._minimum),this._value=Math.max(Math.min(this._value,this._maximum),this._minimum))}get step(){return this._step}set step(t){this._step!==t&&(this._step=Math.max(Math.min(t,this._maximum-this._minimum),0))}get value(){return this._value}set value(t){this._value!==t&&(this._value=Math.max(Math.min(t,this._maximum),this._minimum),this._sliderThumb&&(this._sliderThumb.position.x=this._convertToPosition(this.value)),this.onValueChangedObservable.notifyObservers(this._value))}get start(){return this.node?this._sliderBar.position.x-this._sliderBar.scaling.x/2:-.5}get end(){return this.node?this._sliderBar.position.x+this._sliderBar.scaling.x/2:.5}get sliderBarMaterial(){return this._sliderBarMaterial}get sliderThumbMaterial(){return this._sliderThumbMaterial}get sliderBackplateMaterial(){return this._sliderBackplateMaterial}_createNode(t){const e=(0,n.CreateBox)(`${this.name}_sliderbackplate`,{width:1,height:1,depth:1},t);return e.isPickable=!1,e.visibility=0,e.scaling=new n.Vector3(1,.5,.8),n.SceneLoader.ImportMeshAsync(void 0,zt.MODEL_BASE_URL,zt.MODEL_FILENAME,t).then((t=>{const i=t.meshes[1],o=t.meshes[1].clone(`${this.name}_sliderbar`,e),s=t.meshes[1].clone(`${this.name}_sliderthumb`,e);i.visibility=0,this._sliderBackplateVisible&&(i.visibility=1,i.name=`${this.name}_sliderbackplate`,i.isPickable=!1,i.scaling.x=1,i.scaling.z=.2,i.parent=e,this._sliderBackplateMaterial&&(i.material=this._sliderBackplateMaterial),this._sliderBackplate=i),o&&(o.parent=e,o.position.z=-.1,o.scaling=new n.Vector3(.8,.04,.3),o.isPickable=!1,this._sliderBarMaterial&&(o.material=this._sliderBarMaterial),this._sliderBar=o),s&&(s.parent=e,s.isPickable=!0,s.position.z=-.115,s.scaling=new n.Vector3(.025,.3,.6),s.position.x=this._convertToPosition(this.value),s.addBehavior(this._createBehavior()),this._sliderThumbMaterial&&(s.material=this._sliderThumbMaterial),this._sliderThumb=s)})),this._affectMaterial(e),e}_affectMaterial(t){var e,i,o;this._sliderBackplateMaterial=null!==(e=this._sliderBackplateMaterial)&&void 0!==e?e:new At(`${this.name}_sliderbackplate_material`,t.getScene()),this._sliderBarMaterial=null!==(i=this._sliderBarMaterial)&&void 0!==i?i:new Lt(`${this.name}_sliderbar_material`,t.getScene()),this._sliderThumbMaterial=null!==(o=this._sliderThumbMaterial)&&void 0!==o?o:new Nt(`${this.name}_sliderthumb_material`,t.getScene())}_createBehavior(){const t=new n.PointerDragBehavior({dragAxis:n.Vector3.Right()});return t.moveAttached=!1,t.onDragStartObservable.add((t=>{this._draggedPosition=this._sliderThumb.position.x})),t.onDragObservable.add((t=>{this._draggedPosition+=t.dragDistance/this.scaling.x,this.value=this._convertToValue(this._draggedPosition)})),t}_convertToPosition(t){const e=(t-this.minimum)/(this.maximum-this.minimum)*(this.end-this.start)+this.start;return Math.min(Math.max(e,this.start),this.end)}_convertToValue(t){let e=(t-this.start)/(this.end-this.start)*(this.maximum-this.minimum);return e=this.step?Math.round(e/this.step)*this.step:e,Math.max(Math.min(this.minimum+e,this._maximum),this._minimum)}dispose(){var t,e,i,o,s,n;super.dispose(),null===(t=this._sliderBar)||void 0===t||t.dispose(),null===(e=this._sliderThumb)||void 0===e||e.dispose(),null===(i=this._sliderBarMaterial)||void 0===i||i.dispose(),null===(o=this._sliderThumbMaterial)||void 0===o||o.dispose(),null===(s=this._sliderBackplate)||void 0===s||s.dispose(),null===(n=this._sliderBackplateMaterial)||void 0===n||n.dispose()}}zt.MODEL_BASE_URL="https://assets.babylonjs.com/meshes/MRTK/",zt.MODEL_FILENAME="mrtk-fluent-backplate.glb";class Qt extends lt{constructor(){super(...arguments),this._radius=5}get radius(){return this._radius}set radius(t){this._radius!==t&&(this._radius=t,n.Tools.SetImmediate((()=>{this._arrangeChildren()})))}_mapGridNode(t,e){const i=t.mesh;if(!i)return;const o=this._sphericalMapping(e);switch(t.position=o,this.orientation){case at.FACEORIGIN_ORIENTATION:i.lookAt(new n.Vector3(2*o.x,2*o.y,2*o.z));break;case at.FACEORIGINREVERSED_ORIENTATION:i.lookAt(new n.Vector3(-o.x,-o.y,-o.z));break;case at.FACEFORWARD_ORIENTATION:break;case at.FACEFORWARDREVERSED_ORIENTATION:i.rotate(n.Axis.Y,Math.PI,n.Space.LOCAL)}}_sphericalMapping(t){const e=new n.Vector3(0,0,this._radius),i=t.y/this._radius,o=-t.x/this._radius;return n.Matrix.RotationYawPitchRollToRef(o,i,0,n.TmpVectors.Matrix[0]),n.Vector3.TransformNormal(e,n.TmpVectors.Matrix[0])}}class Vt extends at{constructor(t=!1){super(),this._isVertical=!1,this.margin=.1,this._isVertical=t}get isVertical(){return this._isVertical}set isVertical(t){this._isVertical!==t&&(this._isVertical=t,n.Tools.SetImmediate((()=>{this._arrangeChildren()})))}_arrangeChildren(){let t=0,e=0,i=0;const o=[],s=n.Matrix.Invert(this.node.computeWorldMatrix(!0));for(var r of this._children){if(!r.mesh)continue;i++,r.mesh.computeWorldMatrix(!0),r.mesh.getWorldMatrix().multiplyToRef(s,n.TmpVectors.Matrix[0]);const a=r.mesh.getBoundingInfo().boundingBox,l=n.Vector3.TransformNormal(a.extendSize,n.TmpVectors.Matrix[0]);o.push(l),this._isVertical?e+=l.y:t+=l.x}let a;this._isVertical?e+=(i-1)*this.margin/2:t+=(i-1)*this.margin/2,a=this._isVertical?-e:-t;let l=0;for(var r of this._children){if(!r.mesh)continue;i--;const t=o[l++];this._isVertical?(r.position.y=a+t.y,r.position.x=0,a+=2*t.y):(r.position.x=a+t.x,r.position.y=0,a+=2*t.x),a+=i>0?this.margin:0}}}class Ht extends gt{constructor(t,e){super(e,t),this._currentMesh=t,this.pointerEnterAnimation=()=>{this.mesh&&this.mesh.scaling.scaleInPlace(1.1)},this.pointerOutAnimation=()=>{this.mesh&&this.mesh.scaling.scaleInPlace(1/1.1)},this.pointerDownAnimation=()=>{this.mesh&&this.mesh.scaling.scaleInPlace(.95)},this.pointerUpAnimation=()=>{this.mesh&&this.mesh.scaling.scaleInPlace(1/.95)}}_getTypeName(){return"TouchMeshButton3D"}_createNode(t){return this._currentMesh.getChildMeshes().forEach((t=>{this._injectGUI3DReservedDataStore(t).control=this})),this._currentMesh}_affectMaterial(t){}}class Wt extends ot{constructor(t,e=!0){super(t),this._shareMaterials=e}set renderingGroupId(t){this._model.renderingGroupId=t}get renderingGroupId(){return this._model.renderingGroupId}get material(){return this._material}get shareMaterials(){return this._shareMaterials}_getTypeName(){return"HolographicBackplate"}_createNode(t){var e;const i=(0,n.CreateBox)((null!==(e=this.name)&&void 0!==e?e:"HolographicBackplate")+"_CollisionMesh",{width:1,height:1,depth:1},t);return i.isPickable=!0,i.visibility=0,n.SceneLoader.ImportMeshAsync(void 0,Wt.MODEL_BASE_URL,Wt.MODEL_FILENAME,t).then((t=>{const e=t.meshes[1];e.name=`${this.name}_frontPlate`,e.isPickable=!1,e.parent=i,this._material&&(e.material=this._material),this._model=e})),i}_createMaterial(t){this._material=new Pt(this.name+" Material",t.getScene())}_affectMaterial(t){this._shareMaterials?this._host._touchSharedMaterials.fluentBackplateMaterial?this._material=this._host._touchSharedMaterials.fluentBackplateMaterial:(this._createMaterial(t),this._host._touchSharedMaterials.fluentBackplateMaterial=this._material):this._createMaterial(t)}dispose(){super.dispose(),this.shareMaterials||this._material.dispose(),this._model.dispose()}}Wt.MODEL_BASE_URL="https://assets.babylonjs.com/meshes/MRTK/",Wt.MODEL_FILENAME="mrtk-fluent-backplate.glb";class Gt{constructor(t){this._customControlScaling=1,this._lastControlOver={},this._lastControlDown={},this.onPickedPointChangedObservable=new n.Observable,this.onPickingObservable=new n.Observable,this._sharedMaterials={},this._touchSharedMaterials={},this._scene=t||n.EngineStore.LastCreatedScene,this._sceneDisposeObserver=this._scene.onDisposeObservable.add((()=>{this._sceneDisposeObserver=null,this._utilityLayer=null,this.dispose()})),this._utilityLayer=n.UtilityLayerRenderer._CreateDefaultUtilityLayerFromScene(this._scene),this._utilityLayer.onlyCheckPointerDownEvents=!1,this._utilityLayer.pickUtilitySceneFirst=!1,this._utilityLayer.mainSceneTrackerPredicate=t=>{var e,i,o;return t&&(null===(o=null===(i=null===(e=t.reservedDataStore)||void 0===e?void 0:e.GUI3D)||void 0===i?void 0:i.control)||void 0===o?void 0:o._node)},this._rootContainer=new at("RootContainer"),this._rootContainer._host=this;const e=this._utilityLayer.utilityLayerScene;this._pointerOutObserver=this._utilityLayer.onPointerOutObservable.add((t=>{this._handlePointerOut(t,!0)})),this._pointerObserver=e.onPointerObservable.add(((t,e)=>{this._doPicking(t)})),this._utilityLayer.utilityLayerScene.autoClear=!1,this._utilityLayer.utilityLayerScene.autoClearDepthAndStencil=!1,new n.HemisphericLight("hemi",n.Vector3.Up(),this._utilityLayer.utilityLayerScene)}get scene(){return this._scene}get utilityLayer(){return this._utilityLayer}get controlScaling(){return this._customControlScaling}set controlScaling(t){if(this._customControlScaling!==t&&t>0){const e=t/this._customControlScaling;this._customControlScaling=t,this._rootContainer.children.forEach((i=>{i.scaling.scaleInPlace(e),1!==t&&(i._isScaledByManager=!0)}))}}get useRealisticScaling(){return this.controlScaling===Gt.MRTK_REALISTIC_SCALING}set useRealisticScaling(t){this.controlScaling=t?Gt.MRTK_REALISTIC_SCALING:1}_handlePointerOut(t,e){const i=this._lastControlOver[t];i&&(i._onPointerOut(i),delete this._lastControlOver[t]),e&&this._lastControlDown[t]&&(this._lastControlDown[t].forcePointerUp(),delete this._lastControlDown[t]),this.onPickedPointChangedObservable.notifyObservers(null)}_doPicking(t){var e,i,o;if(!this._utilityLayer||!this._utilityLayer.shouldRender||!this._utilityLayer.utilityLayerScene.activeCamera)return!1;const s=t.event,r=s.pointerId||0,a=s.button,l=t.pickInfo;if(l&&this.onPickingObservable.notifyObservers(l.pickedMesh),!l||!l.hit)return this._handlePointerOut(r,t.type===n.PointerEventTypes.POINTERUP),!1;l.pickedPoint&&this.onPickedPointChangedObservable.notifyObservers(l.pickedPoint);const _=null===(i=null===(e=l.pickedMesh.reservedDataStore)||void 0===e?void 0:e.GUI3D)||void 0===i?void 0:i.control;return _&&!_._processObservables(t.type,l.pickedPoint,(null===(o=l.originMesh)||void 0===o?void 0:o.position)||null,r,a)&&t.type===n.PointerEventTypes.POINTERMOVE&&(this._lastControlOver[r]&&this._lastControlOver[r]._onPointerOut(this._lastControlOver[r]),delete this._lastControlOver[r]),t.type===n.PointerEventTypes.POINTERUP&&(this._lastControlDown[s.pointerId]&&(this._lastControlDown[s.pointerId].forcePointerUp(),delete this._lastControlDown[s.pointerId]),"touch"===s.pointerType&&this._handlePointerOut(r,!1)),!0}get rootContainer(){return this._rootContainer}containsControl(t){return this._rootContainer.containsControl(t)}addControl(t){return this._rootContainer.addControl(t),1!==this._customControlScaling&&(t.scaling.scaleInPlace(this._customControlScaling),t._isScaledByManager=!0),this}removeControl(t){return this._rootContainer.removeControl(t),t._isScaledByManager&&(t.scaling.scaleInPlace(1/this._customControlScaling),t._isScaledByManager=!1),this}dispose(){for(var t in this._rootContainer.dispose(),this._sharedMaterials)this._sharedMaterials.hasOwnProperty(t)&&this._sharedMaterials[t].dispose();for(var t in this._sharedMaterials={},this._touchSharedMaterials)this._touchSharedMaterials.hasOwnProperty(t)&&this._touchSharedMaterials[t].dispose();this._touchSharedMaterials={},this._pointerOutObserver&&this._utilityLayer&&(this._utilityLayer.onPointerOutObservable.remove(this._pointerOutObserver),this._pointerOutObserver=null),this.onPickedPointChangedObservable.clear(),this.onPickingObservable.clear();const e=this._utilityLayer?this._utilityLayer.utilityLayerScene:null;e&&this._pointerObserver&&(e.onPointerObservable.remove(this._pointerObserver),this._pointerObserver=null),this._scene&&this._sceneDisposeObserver&&(this._scene.onDisposeObservable.remove(this._sceneDisposeObserver),this._sceneDisposeObserver=null),this._utilityLayer&&this._utilityLayer.dispose()}}Gt.MRTK_REALISTIC_SCALING=.032;const Ut=void 0!==o.g?o.g:"undefined"!=typeof window?window:void 0;void 0!==Ut&&(Ut.BABYLON=Ut.BABYLON||{},Ut.BABYLON.GUI=t);const Xt=e})(),s.default})()}));
//# sourceMappingURL=babylon.gui.min.js.map